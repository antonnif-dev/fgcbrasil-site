(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}})();function Jg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var bh={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function cE(){if(pm)return Ae;pm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),k=Symbol.iterator;function D(V){return V===null||typeof V!="object"?null:(V=k&&V[k]||V["@@iterator"],typeof V=="function"?V:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,G={};function B(V,q,Se){this.props=V,this.context=q,this.refs=G,this.updater=Se||z}B.prototype.isReactComponent={},B.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ne(){}ne.prototype=B.prototype;function re(V,q,Se){this.props=V,this.context=q,this.refs=G,this.updater=Se||z}var pe=re.prototype=new ne;pe.constructor=re,$(pe,B.prototype),pe.isPureReactComponent=!0;var Ee=Array.isArray,ce=Object.prototype.hasOwnProperty,he={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function S(V,q,Se){var Ce,ke={},Re=null,ze=null;if(q!=null)for(Ce in q.ref!==void 0&&(ze=q.ref),q.key!==void 0&&(Re=""+q.key),q)ce.call(q,Ce)&&!R.hasOwnProperty(Ce)&&(ke[Ce]=q[Ce]);var Oe=arguments.length-2;if(Oe===1)ke.children=Se;else if(1<Oe){for(var Be=Array(Oe),zt=0;zt<Oe;zt++)Be[zt]=arguments[zt+2];ke.children=Be}if(V&&V.defaultProps)for(Ce in Oe=V.defaultProps,Oe)ke[Ce]===void 0&&(ke[Ce]=Oe[Ce]);return{$$typeof:s,type:V,key:Re,ref:ze,props:ke,_owner:he.current}}function I(V,q){return{$$typeof:s,type:V.type,key:q,ref:V.ref,props:V.props,_owner:V._owner}}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function N(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Se){return q[Se]})}var O=/\/+/g;function A(V,q){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):q.toString(36)}function Me(V,q,Se,Ce,ke){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Re){case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case s:case e:ze=!0}}if(ze)return ze=V,ke=ke(ze),V=Ce===""?"."+A(ze,0):Ce,Ee(ke)?(Se="",V!=null&&(Se=V.replace(O,"$&/")+"/"),Me(ke,q,Se,"",function(zt){return zt})):ke!=null&&(P(ke)&&(ke=I(ke,Se+(!ke.key||ze&&ze.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+V)),q.push(ke)),1;if(ze=0,Ce=Ce===""?".":Ce+":",Ee(V))for(var Oe=0;Oe<V.length;Oe++){Re=V[Oe];var Be=Ce+A(Re,Oe);ze+=Me(Re,q,Se,Be,ke)}else if(Be=D(V),typeof Be=="function")for(V=Be.call(V),Oe=0;!(Re=V.next()).done;)Re=Re.value,Be=Ce+A(Re,Oe++),ze+=Me(Re,q,Se,Be,ke);else if(Re==="object")throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ze}function nt(V,q,Se){if(V==null)return V;var Ce=[],ke=0;return Me(V,Ce,"","",function(Re){return q.call(Se,Re,ke++)}),Ce}function Nt(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(Se){(V._status===0||V._status===-1)&&(V._status=1,V._result=Se)},function(Se){(V._status===0||V._status===-1)&&(V._status=2,V._result=Se)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var Ke={current:null},ee={transition:null},fe={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:ee,ReactCurrentOwner:he};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:nt,forEach:function(V,q,Se){nt(V,function(){q.apply(this,arguments)},Se)},count:function(V){var q=0;return nt(V,function(){q++}),q},toArray:function(V){return nt(V,function(q){return q})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ae.Component=B,Ae.Fragment=t,Ae.Profiler=a,Ae.PureComponent=re,Ae.StrictMode=i,Ae.Suspense=g,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ae.act=se,Ae.cloneElement=function(V,q,Se){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ce=$({},V.props),ke=V.key,Re=V.ref,ze=V._owner;if(q!=null){if(q.ref!==void 0&&(Re=q.ref,ze=he.current),q.key!==void 0&&(ke=""+q.key),V.type&&V.type.defaultProps)var Oe=V.type.defaultProps;for(Be in q)ce.call(q,Be)&&!R.hasOwnProperty(Be)&&(Ce[Be]=q[Be]===void 0&&Oe!==void 0?Oe[Be]:q[Be])}var Be=arguments.length-2;if(Be===1)Ce.children=Se;else if(1<Be){Oe=Array(Be);for(var zt=0;zt<Be;zt++)Oe[zt]=arguments[zt+2];Ce.children=Oe}return{$$typeof:s,type:V.type,key:ke,ref:Re,props:Ce,_owner:ze}},Ae.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:u,_context:V},V.Consumer=V},Ae.createElement=S,Ae.createFactory=function(V){var q=S.bind(null,V);return q.type=V,q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(V){return{$$typeof:m,render:V}},Ae.isValidElement=P,Ae.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:Nt}},Ae.memo=function(V,q){return{$$typeof:v,type:V,compare:q===void 0?null:q}},Ae.startTransition=function(V){var q=ee.transition;ee.transition={};try{V()}finally{ee.transition=q}},Ae.unstable_act=se,Ae.useCallback=function(V,q){return Ke.current.useCallback(V,q)},Ae.useContext=function(V){return Ke.current.useContext(V)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(V){return Ke.current.useDeferredValue(V)},Ae.useEffect=function(V,q){return Ke.current.useEffect(V,q)},Ae.useId=function(){return Ke.current.useId()},Ae.useImperativeHandle=function(V,q,Se){return Ke.current.useImperativeHandle(V,q,Se)},Ae.useInsertionEffect=function(V,q){return Ke.current.useInsertionEffect(V,q)},Ae.useLayoutEffect=function(V,q){return Ke.current.useLayoutEffect(V,q)},Ae.useMemo=function(V,q){return Ke.current.useMemo(V,q)},Ae.useReducer=function(V,q,Se){return Ke.current.useReducer(V,q,Se)},Ae.useRef=function(V){return Ke.current.useRef(V)},Ae.useState=function(V){return Ke.current.useState(V)},Ae.useSyncExternalStore=function(V,q,Se){return Ke.current.useSyncExternalStore(V,q,Se)},Ae.useTransition=function(){return Ke.current.useTransition()},Ae.version="18.3.1",Ae}var mm;function Zg(){return mm||(mm=1,bh.exports=cE()),bh.exports}var Q=Zg();const _=Jg(Q);var pu={},Oh={exports:{}},Yt={},Vh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function hE(){return gm||(gm=1,(function(s){function e(ee,fe){var se=ee.length;ee.push(fe);e:for(;0<se;){var V=se-1>>>1,q=ee[V];if(0<a(q,fe))ee[V]=fe,ee[se]=q,se=V;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var fe=ee[0],se=ee.pop();if(se!==fe){ee[0]=se;e:for(var V=0,q=ee.length,Se=q>>>1;V<Se;){var Ce=2*(V+1)-1,ke=ee[Ce],Re=Ce+1,ze=ee[Re];if(0>a(ke,se))Re<q&&0>a(ze,ke)?(ee[V]=ze,ee[Re]=se,V=Re):(ee[V]=ke,ee[Ce]=se,V=Ce);else if(Re<q&&0>a(ze,se))ee[V]=ze,ee[Re]=se,V=Re;else break e}}return fe}function a(ee,fe){var se=ee.sortIndex-fe.sortIndex;return se!==0?se:ee.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],v=[],T=1,k=null,D=3,z=!1,$=!1,G=!1,B=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pe(ee){for(var fe=t(v);fe!==null;){if(fe.callback===null)i(v);else if(fe.startTime<=ee)i(v),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=t(v)}}function Ee(ee){if(G=!1,pe(ee),!$)if(t(g)!==null)$=!0,Nt(ce);else{var fe=t(v);fe!==null&&Ke(Ee,fe.startTime-ee)}}function ce(ee,fe){$=!1,G&&(G=!1,ne(S),S=-1),z=!0;var se=D;try{for(pe(fe),k=t(g);k!==null&&(!(k.expirationTime>fe)||ee&&!N());){var V=k.callback;if(typeof V=="function"){k.callback=null,D=k.priorityLevel;var q=V(k.expirationTime<=fe);fe=s.unstable_now(),typeof q=="function"?k.callback=q:k===t(g)&&i(g),pe(fe)}else i(g);k=t(g)}if(k!==null)var Se=!0;else{var Ce=t(v);Ce!==null&&Ke(Ee,Ce.startTime-fe),Se=!1}return Se}finally{k=null,D=se,z=!1}}var he=!1,R=null,S=-1,I=5,P=-1;function N(){return!(s.unstable_now()-P<I)}function O(){if(R!==null){var ee=s.unstable_now();P=ee;var fe=!0;try{fe=R(!0,ee)}finally{fe?A():(he=!1,R=null)}}else he=!1}var A;if(typeof re=="function")A=function(){re(O)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,nt=Me.port2;Me.port1.onmessage=O,A=function(){nt.postMessage(null)}}else A=function(){B(O,0)};function Nt(ee){R=ee,he||(he=!0,A())}function Ke(ee,fe){S=B(function(){ee(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_continueExecution=function(){$||z||($=!0,Nt(ce))},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(ee){switch(D){case 1:case 2:case 3:var fe=3;break;default:fe=D}var se=D;D=fe;try{return ee()}finally{D=se}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=D;D=ee;try{return fe()}finally{D=se}},s.unstable_scheduleCallback=function(ee,fe,se){var V=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?V+se:V):se=V,ee){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=se+q,ee={id:T++,callback:fe,priorityLevel:ee,startTime:se,expirationTime:q,sortIndex:-1},se>V?(ee.sortIndex=se,e(v,ee),t(g)===null&&ee===t(v)&&(G?(ne(S),S=-1):G=!0,Ke(Ee,se-V))):(ee.sortIndex=q,e(g,ee),$||z||($=!0,Nt(ce))),ee},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(ee){var fe=D;return function(){var se=D;D=fe;try{return ee.apply(this,arguments)}finally{D=se}}}})(Lh)),Lh}var ym;function dE(){return ym||(ym=1,Vh.exports=hE()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function fE(){if(_m)return Yt;_m=1;var s=Zg(),e=dE();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(a[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},k={};function D(n){return g.call(k,n)?!0:g.call(T,n)?!1:v.test(n)?k[n]=!0:(T[n]=!0,!1)}function z(n,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,r,o,c){if(r===null||typeof r>"u"||z(n,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function G(n,r,o,c,d,f,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=n,this.type=r,this.sanitizeURL=f,this.removeEmptyString=E}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){B[n]=new G(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];B[r]=new G(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){B[n]=new G(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){B[n]=new G(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){B[n]=new G(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){B[n]=new G(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){B[n]=new G(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){B[n]=new G(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){B[n]=new G(n,5,!1,n.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(ne,re);B[r]=new G(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(ne,re);B[r]=new G(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(ne,re);B[r]=new G(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){B[n]=new G(n,1,!1,n.toLowerCase(),null,!1,!1)}),B.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){B[n]=new G(n,1,!1,n.toLowerCase(),null,!0,!0)});function pe(n,r,o,c){var d=B.hasOwnProperty(r)?B[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&($(r,o,d,c)&&(o=null),c||d===null?D(r)&&(o===null?n.removeAttribute(r):n.setAttribute(r,""+o)):d.mustUseProperty?n[d.propertyName]=o===null?d.type===3?!1:"":o:(r=d.attributeName,c=d.attributeNamespace,o===null?n.removeAttribute(r):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,c?n.setAttributeNS(c,r,o):n.setAttribute(r,o))))}var Ee=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),he=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Ke=Symbol.for("react.offscreen"),ee=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,V;function q(n){if(V===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);V=r&&r[1]||""}return`
`+V+n}var Se=!1;function Ce(n,r){if(!n||Se)return"";Se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var c=U}Reflect.construct(n,[],r)}else{try{r.call()}catch(U){c=U}n.call(r.prototype)}else{try{throw Error()}catch(U){c=U}n()}}catch(U){if(U&&c&&typeof U.stack=="string"){for(var d=U.stack.split(`
`),f=c.stack.split(`
`),E=d.length-1,C=f.length-1;1<=E&&0<=C&&d[E]!==f[C];)C--;for(;1<=E&&0<=C;E--,C--)if(d[E]!==f[C]){if(E!==1||C!==1)do if(E--,C--,0>C||d[E]!==f[C]){var x=`
`+d[E].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=E&&0<=C);break}}}finally{Se=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?q(n):""}function ke(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function Re(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case he:return"Portal";case I:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case Me:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case O:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nt:return r=n.displayName||null,r!==null?r:Re(n.type)||"Memo";case Nt:r=n._payload,n=n._init;try{return Re(n(r))}catch{}}return null}function ze(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function zt(n){var r=Be(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,f.call(this,E)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function hi(n){n._valueTracker||(n._valueTracker=zt(n))}function ko(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function di(n,r){var o=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function Za(n,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=Oe(r.value!=null?r.value:o),n._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function fi(n,r){r=r.checked,r!=null&&pe(n,"checked",r,!1)}function ks(n,r){fi(n,r);var o=Oe(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ut(n,r.type,o):r.hasOwnProperty("defaultValue")&&ut(n,r.type,Oe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Ro(n,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,o||r===n.value||(n.value=r),n.defaultValue=r}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function ut(n,r,o){(r!=="number"||Nr(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var rt=Array.isArray;function vn(n,r,o,c){if(n=n.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=r.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Oe(o),r=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Po(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function No(n,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(t(92));if(rt(o)){if(1<o.length)throw Error(t(93));o=o[0]}r=o}r==null&&(r=""),o=r}n._wrapperState={initialValue:Oe(o)}}function el(n,r){var o=Oe(r.value),c=Oe(r.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),r.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),c!=null&&(n.defaultValue=""+c)}function xr(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function xo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pi(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?xo(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Dr,tl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,o,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Rs(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nl=["Webkit","ms","Moz","O"];Object.keys(br).forEach(function(n){nl.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),br[r]=br[n]})});function Or(n,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||br.hasOwnProperty(n)&&br[n]?(""+r).trim():r+"px"}function mi(n,r){n=n.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,d=Or(o,r[o],c);o==="float"&&(o="cssFloat"),c?n.setProperty(o,d):n[o]=d}}var Do=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function En(n,r){if(r){if(Do[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function gi(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=null;function yi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ir=null,or=null,et=null;function bo(n){if(n=oa(n)){if(typeof ir!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Pl(r),ir(n.stateNode,n.type,r))}}function Lr(n){or?et?et.push(n):et=[n]:or=n}function Mr(){if(or){var n=or,r=et;if(et=or=null,bo(n),r)for(n=0;n<r.length;n++)bo(r[n])}}function rl(n,r){return n(r)}function sl(){}var bn=!1;function il(n,r,o){if(bn)return n(r,o);bn=!0;try{return rl(n,r,o)}finally{bn=!1,(or!==null||et!==null)&&(sl(),Mr())}}function Ps(n,r){var o=n.stateNode;if(o===null)return null;var c=Pl(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,r,typeof o));return o}var Fr=!1;if(m)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{Fr=!1}function ol(n,r,o,c,d,f,E,C,x){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(K){this.onError(K)}}var ar=!1,On=null,_i=!1,cn=null,al={onError:function(n){ar=!0,On=n}};function ll(n,r,o,c,d,f,E,C,x){ar=!1,On=null,ol.apply(al,arguments)}function Oo(n,r,o,c,d,f,E,C,x){if(ll.apply(this,arguments),ar){if(ar){var U=On;ar=!1,On=null}else throw Error(t(198));_i||(_i=!0,cn=U)}}function wn(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function Vo(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function ul(n){if(wn(n)!==n)throw Error(t(188))}function cl(n){var r=n.alternate;if(!r){if(r=wn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var o=n,c=r;;){var d=o.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===o)return ul(d),n;if(f===c)return ul(d),r;f=f.sibling}throw Error(t(188))}if(o.return!==c.return)o=d,c=f;else{for(var E=!1,C=d.child;C;){if(C===o){E=!0,o=d,c=f;break}if(C===c){E=!0,c=d,o=f;break}C=C.sibling}if(!E){for(C=f.child;C;){if(C===o){E=!0,o=f,c=d;break}if(C===c){E=!0,c=f,o=d;break}C=C.sibling}if(!E)throw Error(t(189))}}if(o.alternate!==c)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:r}function hl(n){return n=cl(n),n!==null?Ns(n):null}function Ns(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Ns(n);if(r!==null)return r;n=n.sibling}return null}var Lo=e.unstable_scheduleCallback,vi=e.unstable_cancelCallback,xs=e.unstable_shouldYield,lr=e.unstable_requestPaint,qe=e.unstable_now,cc=e.unstable_getCurrentPriorityLevel,Ei=e.unstable_ImmediatePriority,Mo=e.unstable_UserBlockingPriority,Ds=e.unstable_NormalPriority,Fo=e.unstable_LowPriority,wi=e.unstable_IdlePriority,bs=null,en=null;function dl(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(bs,n,void 0,(n.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Os,Vn=Math.log,hn=Math.LN2;function Os(n){return n>>>=0,n===0?32:31-(Vn(n)/hn|0)|0}var Ln=64,zr=4194304;function Ue(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ur(n,r){var o=n.pendingLanes;if(o===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,E=o&268435455;if(E!==0){var C=E&~d;C!==0?c=Ue(C):(f&=E,f!==0&&(c=Ue(f)))}else E=o&~d,E!==0?c=Ue(E):f!==0&&(c=Ue(f));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,f=r&-r,d>=f||d===16&&(f&4194240)!==0))return r;if((c&4)!==0&&(c|=o&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)o=31-tn(r),d=1<<o,c|=n[o],r&=~d;return c}function Vs(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ls(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var E=31-tn(f),C=1<<E,x=d[E];x===-1?((C&o)===0||(C&c)!==0)&&(d[E]=Vs(C,r)):x<=r&&(n.expiredLanes|=C),f&=~C}}function Uo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zo(){var n=Ln;return Ln<<=1,(Ln&4194240)===0&&(Ln=64),n}function jo(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ms(n,r,o){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-tn(r),n[r]=o}function hc(n,r){var o=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<o;){var d=31-tn(o),f=1<<d;r[d]=0,c[d]=-1,n[d]=-1,o&=~f}}function Bo(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-tn(o),d=1<<c;d&r|n[c]&r&&(n[c]|=r),o&=~d}}var Ne=0;function Mn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var $o,Ti,Ho,qo,Wo,Fn=!1,Ii=[],Un=null,zn=null,St=null,Fs=new Map,cr=new Map,nn=[],fl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jr(n,r){switch(n){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Fs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cr.delete(r.pointerId)}}function Tn(n,r,o,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},r!==null&&(r=oa(r),r!==null&&Ti(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function pl(n,r,o,c,d){switch(r){case"focusin":return Un=Tn(Un,n,r,o,c,d),!0;case"dragenter":return zn=Tn(zn,n,r,o,c,d),!0;case"mouseover":return St=Tn(St,n,r,o,c,d),!0;case"pointerover":var f=d.pointerId;return Fs.set(f,Tn(Fs.get(f)||null,n,r,o,c,d)),!0;case"gotpointercapture":return f=d.pointerId,cr.set(f,Tn(cr.get(f)||null,n,r,o,c,d)),!0}return!1}function Si(n){var r=Bs(n.target);if(r!==null){var o=wn(r);if(o!==null){if(r=o.tag,r===13){if(r=Vo(o),r!==null){n.blockedOn=r,Wo(n.priority,function(){Ho(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $e(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Ci(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Vr=c,o.target.dispatchEvent(c),Vr=null}else return r=oa(o),r!==null&&Ti(r),n.blockedOn=o,!1;r.shift()}return!0}function ml(n,r,o){$e(n)&&o.delete(r)}function dc(){Fn=!1,Un!==null&&$e(Un)&&(Un=null),zn!==null&&$e(zn)&&(zn=null),St!==null&&$e(St)&&(St=null),Fs.forEach(ml),cr.forEach(ml)}function Br(n,r){n.blockedOn===r&&(n.blockedOn=null,Fn||(Fn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dc)))}function $r(n){function r(d){return Br(d,n)}if(0<Ii.length){Br(Ii[0],n);for(var o=1;o<Ii.length;o++){var c=Ii[o];c.blockedOn===n&&(c.blockedOn=null)}}for(Un!==null&&Br(Un,n),zn!==null&&Br(zn,n),St!==null&&Br(St,n),Fs.forEach(r),cr.forEach(r),o=0;o<nn.length;o++)c=nn[o],c.blockedOn===n&&(c.blockedOn=null);for(;0<nn.length&&(o=nn[0],o.blockedOn===null);)Si(o),o.blockedOn===null&&nn.shift()}var hr=Ee.ReactCurrentBatchConfig,dr=!0;function jn(n,r,o,c){var d=Ne,f=hr.transition;hr.transition=null;try{Ne=1,Go(n,r,o,c)}finally{Ne=d,hr.transition=f}}function gl(n,r,o,c){var d=Ne,f=hr.transition;hr.transition=null;try{Ne=4,Go(n,r,o,c)}finally{Ne=d,hr.transition=f}}function Go(n,r,o,c){if(dr){var d=Ci(n,r,o,c);if(d===null)Ic(n,r,c,Bn,o),jr(n,c);else if(pl(d,n,r,o,c))c.stopPropagation();else if(jr(n,c),r&4&&-1<fl.indexOf(n)){for(;d!==null;){var f=oa(d);if(f!==null&&$o(f),f=Ci(n,r,o,c),f===null&&Ic(n,r,c,Bn,o),f===d)break;d=f}d!==null&&c.stopPropagation()}else Ic(n,r,c,null,o)}}var Bn=null;function Ci(n,r,o,c){if(Bn=null,n=yi(c),n=Bs(n),n!==null)if(r=wn(n),r===null)n=null;else if(o=r.tag,o===13){if(n=Vo(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Bn=n,null}function Ai(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cc()){case Ei:return 1;case Mo:return 4;case Ds:case Fo:return 16;case wi:return 536870912;default:return 16}default:return 16}}var rn=null,ki=null,fr=null;function yl(){if(fr)return fr;var n,r=ki,o=r.length,c,d="value"in rn?rn.value:rn.textContent,f=d.length;for(n=0;n<o&&r[n]===d[n];n++);var E=o-n;for(c=1;c<=E&&r[o-c]===d[f-c];c++);return fr=d.slice(n,1<c?1-c:void 0)}function Us(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function $n(){return!0}function Ko(){return!1}function xt(n){function r(o,c,d,f,E){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(o=n[C],this[C]=o?o(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$n:Ko,this.isPropagationStopped=Ko,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),r}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=xt(Hn),Hr=se({},Hn,{view:0,detail:0}),Ri=xt(Hr),Pi,Ni,sn,js=se({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:we,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sn&&(sn&&n.type==="mousemove"?(Pi=n.screenX-sn.screenX,Ni=n.screenY-sn.screenY):Ni=Pi=0,sn=n),Pi)},movementY:function(n){return"movementY"in n?n.movementY:Ni}}),Qo=xt(js),_l=se({},js,{dataTransfer:0}),vl=xt(_l),xi=se({},Hr,{relatedTarget:0}),Ct=xt(xi),El=se({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),wl=xt(El),qr=se({},Hn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),l=xt(qr),p=se({},Hn,{data:0}),y=xt(p),w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=j[n])?!!r[n]:!1}function we(){return J}var st=se({},Hr,{key:function(n){if(n.key){var r=w[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Us(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:we,charCode:function(n){return n.type==="keypress"?Us(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Us(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),je=xt(st),ct=se({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),on=xt(ct),pr=se({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:we}),qn=xt(pr),Wn=se({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Di=xt(Wn),Xo=se({},js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sv=xt(Xo),iv=[9,13,27,32],fc=m&&"CompositionEvent"in window,Yo=null;m&&"documentMode"in document&&(Yo=document.documentMode);var ov=m&&"TextEvent"in window&&!Yo,of=m&&(!fc||Yo&&8<Yo&&11>=Yo),af=" ",lf=!1;function uf(n,r){switch(n){case"keyup":return iv.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var bi=!1;function av(n,r){switch(n){case"compositionend":return cf(r);case"keypress":return r.which!==32?null:(lf=!0,af);case"textInput":return n=r.data,n===af&&lf?null:n;default:return null}}function lv(n,r){if(bi)return n==="compositionend"||!fc&&uf(n,r)?(n=yl(),fr=ki=rn=null,bi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return of&&r.locale!=="ko"?null:r.data;default:return null}}var uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!uv[n.type]:r==="textarea"}function df(n,r,o,c){Lr(c),r=Al(r,"onChange"),0<r.length&&(o=new zs("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var Jo=null,Zo=null;function cv(n){Nf(n,0)}function Tl(n){var r=Fi(n);if(ko(r))return n}function hv(n,r){if(n==="change")return r}var ff=!1;if(m){var pc;if(m){var mc="oninput"in document;if(!mc){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),mc=typeof pf.oninput=="function"}pc=mc}else pc=!1;ff=pc&&(!document.documentMode||9<document.documentMode)}function mf(){Jo&&(Jo.detachEvent("onpropertychange",gf),Zo=Jo=null)}function gf(n){if(n.propertyName==="value"&&Tl(Zo)){var r=[];df(r,Zo,n,yi(n)),il(cv,r)}}function dv(n,r,o){n==="focusin"?(mf(),Jo=r,Zo=o,Jo.attachEvent("onpropertychange",gf)):n==="focusout"&&mf()}function fv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tl(Zo)}function pv(n,r){if(n==="click")return Tl(r)}function mv(n,r){if(n==="input"||n==="change")return Tl(r)}function gv(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var In=typeof Object.is=="function"?Object.is:gv;function ea(n,r){if(In(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!g.call(r,d)||!In(n[d],r[d]))return!1}return!0}function yf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _f(n,r){var o=yf(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=yf(o)}}function vf(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?vf(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Ef(){for(var n=window,r=Nr();r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Nr(n.document)}return r}function gc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function yv(n){var r=Ef(),o=n.focusedElem,c=n.selectionRange;if(r!==o&&o&&o.ownerDocument&&vf(o.ownerDocument.documentElement,o)){if(c!==null&&gc(o)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(n,o.value.length);else if(n=(r=o.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=o.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=_f(o,f);var E=_f(o,c);d&&E&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(r),n.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),n.addRange(r)))}}for(r=[],n=o;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)n=r[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _v=m&&"documentMode"in document&&11>=document.documentMode,Oi=null,yc=null,ta=null,_c=!1;function wf(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;_c||Oi==null||Oi!==Nr(c)||(c=Oi,"selectionStart"in c&&gc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ta&&ea(ta,c)||(ta=c,c=Al(yc,"onSelect"),0<c.length&&(r=new zs("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=Oi)))}function Il(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Vi={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},vc={},Tf={};m&&(Tf=document.createElement("div").style,"AnimationEvent"in window||(delete Vi.animationend.animation,delete Vi.animationiteration.animation,delete Vi.animationstart.animation),"TransitionEvent"in window||delete Vi.transitionend.transition);function Sl(n){if(vc[n])return vc[n];if(!Vi[n])return n;var r=Vi[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Tf)return vc[n]=r[o];return n}var If=Sl("animationend"),Sf=Sl("animationiteration"),Cf=Sl("animationstart"),Af=Sl("transitionend"),kf=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(n,r){kf.set(n,r),u(r,[n])}for(var Ec=0;Ec<Rf.length;Ec++){var wc=Rf[Ec],vv=wc.toLowerCase(),Ev=wc[0].toUpperCase()+wc.slice(1);Wr(vv,"on"+Ev)}Wr(If,"onAnimationEnd"),Wr(Sf,"onAnimationIteration"),Wr(Cf,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(Af,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function Pf(n,r,o){var c=n.type||"unknown-event";n.currentTarget=o,Oo(c,r,void 0,n),n.currentTarget=null}function Nf(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],d=c.event;c=c.listeners;e:{var f=void 0;if(r)for(var E=c.length-1;0<=E;E--){var C=c[E],x=C.instance,U=C.currentTarget;if(C=C.listener,x!==f&&d.isPropagationStopped())break e;Pf(d,C,U),f=x}else for(E=0;E<c.length;E++){if(C=c[E],x=C.instance,U=C.currentTarget,C=C.listener,x!==f&&d.isPropagationStopped())break e;Pf(d,C,U),f=x}}}if(_i)throw n=cn,_i=!1,cn=null,n}function We(n,r){var o=r[Pc];o===void 0&&(o=r[Pc]=new Set);var c=n+"__bubble";o.has(c)||(xf(r,n,2,!1),o.add(c))}function Tc(n,r,o){var c=0;r&&(c|=4),xf(o,n,c,r)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function ra(n){if(!n[Cl]){n[Cl]=!0,i.forEach(function(o){o!=="selectionchange"&&(wv.has(o)||Tc(o,!1,n),Tc(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Cl]||(r[Cl]=!0,Tc("selectionchange",!1,r))}}function xf(n,r,o,c){switch(Ai(r)){case 1:var d=jn;break;case 4:d=gl;break;default:d=Go}o=d.bind(null,r,o,n),d=void 0,!Fr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,o,{capture:!0,passive:d}):n.addEventListener(r,o,!0):d!==void 0?n.addEventListener(r,o,{passive:d}):n.addEventListener(r,o,!1)}function Ic(n,r,o,c,d){var f=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(E===4)for(E=c.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;E=E.return}for(;C!==null;){if(E=Bs(C),E===null)return;if(x=E.tag,x===5||x===6){c=f=E;continue e}C=C.parentNode}}c=c.return}il(function(){var U=f,K=yi(o),X=[];e:{var W=kf.get(n);if(W!==void 0){var te=zs,ae=n;switch(n){case"keypress":if(Us(o)===0)break e;case"keydown":case"keyup":te=je;break;case"focusin":ae="focus",te=Ct;break;case"focusout":ae="blur",te=Ct;break;case"beforeblur":case"afterblur":te=Ct;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=qn;break;case If:case Sf:case Cf:te=wl;break;case Af:te=Di;break;case"scroll":te=Ri;break;case"wheel":te=sv;break;case"copy":case"cut":case"paste":te=l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=on}var le=(r&4)!==0,it=!le&&n==="scroll",L=le?W!==null?W+"Capture":null:W;le=[];for(var b=U,F;b!==null;){F=b;var Y=F.stateNode;if(F.tag===5&&Y!==null&&(F=Y,L!==null&&(Y=Ps(b,L),Y!=null&&le.push(sa(b,Y,F)))),it)break;b=b.return}0<le.length&&(W=new te(W,ae,null,o,K),X.push({event:W,listeners:le}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",W&&o!==Vr&&(ae=o.relatedTarget||o.fromElement)&&(Bs(ae)||ae[mr]))break e;if((te||W)&&(W=K.window===K?K:(W=K.ownerDocument)?W.defaultView||W.parentWindow:window,te?(ae=o.relatedTarget||o.toElement,te=U,ae=ae?Bs(ae):null,ae!==null&&(it=wn(ae),ae!==it||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(te=null,ae=U),te!==ae)){if(le=Qo,Y="onMouseLeave",L="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(le=on,Y="onPointerLeave",L="onPointerEnter",b="pointer"),it=te==null?W:Fi(te),F=ae==null?W:Fi(ae),W=new le(Y,b+"leave",te,o,K),W.target=it,W.relatedTarget=F,Y=null,Bs(K)===U&&(le=new le(L,b+"enter",ae,o,K),le.target=F,le.relatedTarget=it,Y=le),it=Y,te&&ae)t:{for(le=te,L=ae,b=0,F=le;F;F=Li(F))b++;for(F=0,Y=L;Y;Y=Li(Y))F++;for(;0<b-F;)le=Li(le),b--;for(;0<F-b;)L=Li(L),F--;for(;b--;){if(le===L||L!==null&&le===L.alternate)break t;le=Li(le),L=Li(L)}le=null}else le=null;te!==null&&Df(X,W,te,le,!1),ae!==null&&it!==null&&Df(X,it,ae,le,!0)}}e:{if(W=U?Fi(U):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var ue=hv;else if(hf(W))if(ff)ue=mv;else{ue=fv;var me=dv}else(te=W.nodeName)&&te.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ue=pv);if(ue&&(ue=ue(n,U))){df(X,ue,o,K);break e}me&&me(n,W,U),n==="focusout"&&(me=W._wrapperState)&&me.controlled&&W.type==="number"&&ut(W,"number",W.value)}switch(me=U?Fi(U):window,n){case"focusin":(hf(me)||me.contentEditable==="true")&&(Oi=me,yc=U,ta=null);break;case"focusout":ta=yc=Oi=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,wf(X,o,K);break;case"selectionchange":if(_v)break;case"keydown":case"keyup":wf(X,o,K)}var ge;if(fc)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else bi?uf(n,o)&&(ve="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ve="onCompositionStart");ve&&(of&&o.locale!=="ko"&&(bi||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&bi&&(ge=yl()):(rn=K,ki="value"in rn?rn.value:rn.textContent,bi=!0)),me=Al(U,ve),0<me.length&&(ve=new y(ve,n,null,o,K),X.push({event:ve,listeners:me}),ge?ve.data=ge:(ge=cf(o),ge!==null&&(ve.data=ge)))),(ge=ov?av(n,o):lv(n,o))&&(U=Al(U,"onBeforeInput"),0<U.length&&(K=new y("onBeforeInput","beforeinput",null,o,K),X.push({event:K,listeners:U}),K.data=ge))}Nf(X,r)})}function sa(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Al(n,r){for(var o=r+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Ps(n,o),f!=null&&c.unshift(sa(n,f,d)),f=Ps(n,r),f!=null&&c.push(sa(n,f,d))),n=n.return}return c}function Li(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Df(n,r,o,c,d){for(var f=r._reactName,E=[];o!==null&&o!==c;){var C=o,x=C.alternate,U=C.stateNode;if(x!==null&&x===c)break;C.tag===5&&U!==null&&(C=U,d?(x=Ps(o,f),x!=null&&E.unshift(sa(o,x,C))):d||(x=Ps(o,f),x!=null&&E.push(sa(o,x,C)))),o=o.return}E.length!==0&&n.push({event:r,listeners:E})}var Tv=/\r\n?/g,Iv=/\u0000|\uFFFD/g;function bf(n){return(typeof n=="string"?n:""+n).replace(Tv,`
`).replace(Iv,"")}function kl(n,r,o){if(r=bf(r),bf(n)!==r&&o)throw Error(t(425))}function Rl(){}var Sc=null,Cc=null;function Ac(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var kc=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(n){return Of.resolve(null).then(n).catch(Av)}:kc;function Av(n){setTimeout(function(){throw n})}function Rc(n,r){var o=r,c=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){n.removeChild(d),$r(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);$r(r)}function Gr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Vf(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Mi,ia="__reactProps$"+Mi,mr="__reactContainer$"+Mi,Pc="__reactEvents$"+Mi,kv="__reactListeners$"+Mi,Rv="__reactHandles$"+Mi;function Bs(n){var r=n[Gn];if(r)return r;for(var o=n.parentNode;o;){if(r=o[mr]||o[Gn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=Vf(n);n!==null;){if(o=n[Gn])return o;n=Vf(n)}return r}n=o,o=n.parentNode}return null}function oa(n){return n=n[Gn]||n[mr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Pl(n){return n[ia]||null}var Nc=[],Ui=-1;function Kr(n){return{current:n}}function Ge(n){0>Ui||(n.current=Nc[Ui],Nc[Ui]=null,Ui--)}function He(n,r){Ui++,Nc[Ui]=n.current,n.current=r}var Qr={},Dt=Kr(Qr),Wt=Kr(!1),$s=Qr;function zi(n,r){var o=n.type.contextTypes;if(!o)return Qr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in o)d[f]=r[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Gt(n){return n=n.childContextTypes,n!=null}function Nl(){Ge(Wt),Ge(Dt)}function Lf(n,r,o){if(Dt.current!==Qr)throw Error(t(168));He(Dt,r),He(Wt,o)}function Mf(n,r,o){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,ze(n)||"Unknown",d));return se({},o,c)}function xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qr,$s=Dt.current,He(Dt,n),He(Wt,Wt.current),!0}function Ff(n,r,o){var c=n.stateNode;if(!c)throw Error(t(169));o?(n=Mf(n,r,$s),c.__reactInternalMemoizedMergedChildContext=n,Ge(Wt),Ge(Dt),He(Dt,n)):Ge(Wt),He(Wt,o)}var gr=null,Dl=!1,xc=!1;function Uf(n){gr===null?gr=[n]:gr.push(n)}function Pv(n){Dl=!0,Uf(n)}function Xr(){if(!xc&&gr!==null){xc=!0;var n=0,r=Ne;try{var o=gr;for(Ne=1;n<o.length;n++){var c=o[n];do c=c(!0);while(c!==null)}gr=null,Dl=!1}catch(d){throw gr!==null&&(gr=gr.slice(n+1)),Lo(Ei,Xr),d}finally{Ne=r,xc=!1}}return null}var ji=[],Bi=0,bl=null,Ol=0,dn=[],fn=0,Hs=null,yr=1,_r="";function qs(n,r){ji[Bi++]=Ol,ji[Bi++]=bl,bl=n,Ol=r}function zf(n,r,o){dn[fn++]=yr,dn[fn++]=_r,dn[fn++]=Hs,Hs=n;var c=yr;n=_r;var d=32-tn(c)-1;c&=~(1<<d),o+=1;var f=32-tn(r)+d;if(30<f){var E=d-d%5;f=(c&(1<<E)-1).toString(32),c>>=E,d-=E,yr=1<<32-tn(r)+d|o<<d|c,_r=f+n}else yr=1<<f|o<<d|c,_r=n}function Dc(n){n.return!==null&&(qs(n,1),zf(n,1,0))}function bc(n){for(;n===bl;)bl=ji[--Bi],ji[Bi]=null,Ol=ji[--Bi],ji[Bi]=null;for(;n===Hs;)Hs=dn[--fn],dn[fn]=null,_r=dn[--fn],dn[fn]=null,yr=dn[--fn],dn[fn]=null}var an=null,ln=null,Qe=!1,Sn=null;function jf(n,r){var o=yn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=n,r=n.deletions,r===null?(n.deletions=[o],n.flags|=16):r.push(o)}function Bf(n,r){switch(n.tag){case 5:var o=n.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,an=n,ln=Gr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,an=n,ln=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Hs!==null?{id:yr,overflow:_r}:null,n.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=yn(18,null,null,0),o.stateNode=r,o.return=n,n.child=o,an=n,ln=null,!0):!1;default:return!1}}function Oc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vc(n){if(Qe){var r=ln;if(r){var o=r;if(!Bf(n,r)){if(Oc(n))throw Error(t(418));r=Gr(o.nextSibling);var c=an;r&&Bf(n,r)?jf(c,o):(n.flags=n.flags&-4097|2,Qe=!1,an=n)}}else{if(Oc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Qe=!1,an=n}}}function $f(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function Vl(n){if(n!==an)return!1;if(!Qe)return $f(n),Qe=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Ac(n.type,n.memoizedProps)),r&&(r=ln)){if(Oc(n))throw Hf(),Error(t(418));for(;r;)jf(n,r),r=Gr(r.nextSibling)}if($f(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(r===0){ln=Gr(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}n=n.nextSibling}ln=null}}else ln=an?Gr(n.stateNode.nextSibling):null;return!0}function Hf(){for(var n=ln;n;)n=Gr(n.nextSibling)}function $i(){ln=an=null,Qe=!1}function Lc(n){Sn===null?Sn=[n]:Sn.push(n)}var Nv=Ee.ReactCurrentBatchConfig;function aa(n,r,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var c=o.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===f?r.ref:(r=function(E){var C=d.refs;E===null?delete C[f]:C[f]=E},r._stringRef=f,r)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function Ll(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function qf(n){var r=n._init;return r(n._payload)}function Wf(n){function r(L,b){if(n){var F=L.deletions;F===null?(L.deletions=[b],L.flags|=16):F.push(b)}}function o(L,b){if(!n)return null;for(;b!==null;)r(L,b),b=b.sibling;return null}function c(L,b){for(L=new Map;b!==null;)b.key!==null?L.set(b.key,b):L.set(b.index,b),b=b.sibling;return L}function d(L,b){return L=ss(L,b),L.index=0,L.sibling=null,L}function f(L,b,F){return L.index=F,n?(F=L.alternate,F!==null?(F=F.index,F<b?(L.flags|=2,b):F):(L.flags|=2,b)):(L.flags|=1048576,b)}function E(L){return n&&L.alternate===null&&(L.flags|=2),L}function C(L,b,F,Y){return b===null||b.tag!==6?(b=kh(F,L.mode,Y),b.return=L,b):(b=d(b,F),b.return=L,b)}function x(L,b,F,Y){var ue=F.type;return ue===R?K(L,b,F.props.children,Y,F.key):b!==null&&(b.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Nt&&qf(ue)===b.type)?(Y=d(b,F.props),Y.ref=aa(L,b,F),Y.return=L,Y):(Y=ou(F.type,F.key,F.props,null,L.mode,Y),Y.ref=aa(L,b,F),Y.return=L,Y)}function U(L,b,F,Y){return b===null||b.tag!==4||b.stateNode.containerInfo!==F.containerInfo||b.stateNode.implementation!==F.implementation?(b=Rh(F,L.mode,Y),b.return=L,b):(b=d(b,F.children||[]),b.return=L,b)}function K(L,b,F,Y,ue){return b===null||b.tag!==7?(b=Zs(F,L.mode,Y,ue),b.return=L,b):(b=d(b,F),b.return=L,b)}function X(L,b,F){if(typeof b=="string"&&b!==""||typeof b=="number")return b=kh(""+b,L.mode,F),b.return=L,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ce:return F=ou(b.type,b.key,b.props,null,L.mode,F),F.ref=aa(L,null,b),F.return=L,F;case he:return b=Rh(b,L.mode,F),b.return=L,b;case Nt:var Y=b._init;return X(L,Y(b._payload),F)}if(rt(b)||fe(b))return b=Zs(b,L.mode,F,null),b.return=L,b;Ll(L,b)}return null}function W(L,b,F,Y){var ue=b!==null?b.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ue!==null?null:C(L,b,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ce:return F.key===ue?x(L,b,F,Y):null;case he:return F.key===ue?U(L,b,F,Y):null;case Nt:return ue=F._init,W(L,b,ue(F._payload),Y)}if(rt(F)||fe(F))return ue!==null?null:K(L,b,F,Y,null);Ll(L,F)}return null}function te(L,b,F,Y,ue){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return L=L.get(F)||null,C(b,L,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case ce:return L=L.get(Y.key===null?F:Y.key)||null,x(b,L,Y,ue);case he:return L=L.get(Y.key===null?F:Y.key)||null,U(b,L,Y,ue);case Nt:var me=Y._init;return te(L,b,F,me(Y._payload),ue)}if(rt(Y)||fe(Y))return L=L.get(F)||null,K(b,L,Y,ue,null);Ll(b,Y)}return null}function ae(L,b,F,Y){for(var ue=null,me=null,ge=b,ve=b=0,Tt=null;ge!==null&&ve<F.length;ve++){ge.index>ve?(Tt=ge,ge=null):Tt=ge.sibling;var Fe=W(L,ge,F[ve],Y);if(Fe===null){ge===null&&(ge=Tt);break}n&&ge&&Fe.alternate===null&&r(L,ge),b=f(Fe,b,ve),me===null?ue=Fe:me.sibling=Fe,me=Fe,ge=Tt}if(ve===F.length)return o(L,ge),Qe&&qs(L,ve),ue;if(ge===null){for(;ve<F.length;ve++)ge=X(L,F[ve],Y),ge!==null&&(b=f(ge,b,ve),me===null?ue=ge:me.sibling=ge,me=ge);return Qe&&qs(L,ve),ue}for(ge=c(L,ge);ve<F.length;ve++)Tt=te(ge,L,ve,F[ve],Y),Tt!==null&&(n&&Tt.alternate!==null&&ge.delete(Tt.key===null?ve:Tt.key),b=f(Tt,b,ve),me===null?ue=Tt:me.sibling=Tt,me=Tt);return n&&ge.forEach(function(is){return r(L,is)}),Qe&&qs(L,ve),ue}function le(L,b,F,Y){var ue=fe(F);if(typeof ue!="function")throw Error(t(150));if(F=ue.call(F),F==null)throw Error(t(151));for(var me=ue=null,ge=b,ve=b=0,Tt=null,Fe=F.next();ge!==null&&!Fe.done;ve++,Fe=F.next()){ge.index>ve?(Tt=ge,ge=null):Tt=ge.sibling;var is=W(L,ge,Fe.value,Y);if(is===null){ge===null&&(ge=Tt);break}n&&ge&&is.alternate===null&&r(L,ge),b=f(is,b,ve),me===null?ue=is:me.sibling=is,me=is,ge=Tt}if(Fe.done)return o(L,ge),Qe&&qs(L,ve),ue;if(ge===null){for(;!Fe.done;ve++,Fe=F.next())Fe=X(L,Fe.value,Y),Fe!==null&&(b=f(Fe,b,ve),me===null?ue=Fe:me.sibling=Fe,me=Fe);return Qe&&qs(L,ve),ue}for(ge=c(L,ge);!Fe.done;ve++,Fe=F.next())Fe=te(ge,L,ve,Fe.value,Y),Fe!==null&&(n&&Fe.alternate!==null&&ge.delete(Fe.key===null?ve:Fe.key),b=f(Fe,b,ve),me===null?ue=Fe:me.sibling=Fe,me=Fe);return n&&ge.forEach(function(uE){return r(L,uE)}),Qe&&qs(L,ve),ue}function it(L,b,F,Y){if(typeof F=="object"&&F!==null&&F.type===R&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case ce:e:{for(var ue=F.key,me=b;me!==null;){if(me.key===ue){if(ue=F.type,ue===R){if(me.tag===7){o(L,me.sibling),b=d(me,F.props.children),b.return=L,L=b;break e}}else if(me.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Nt&&qf(ue)===me.type){o(L,me.sibling),b=d(me,F.props),b.ref=aa(L,me,F),b.return=L,L=b;break e}o(L,me);break}else r(L,me);me=me.sibling}F.type===R?(b=Zs(F.props.children,L.mode,Y,F.key),b.return=L,L=b):(Y=ou(F.type,F.key,F.props,null,L.mode,Y),Y.ref=aa(L,b,F),Y.return=L,L=Y)}return E(L);case he:e:{for(me=F.key;b!==null;){if(b.key===me)if(b.tag===4&&b.stateNode.containerInfo===F.containerInfo&&b.stateNode.implementation===F.implementation){o(L,b.sibling),b=d(b,F.children||[]),b.return=L,L=b;break e}else{o(L,b);break}else r(L,b);b=b.sibling}b=Rh(F,L.mode,Y),b.return=L,L=b}return E(L);case Nt:return me=F._init,it(L,b,me(F._payload),Y)}if(rt(F))return ae(L,b,F,Y);if(fe(F))return le(L,b,F,Y);Ll(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,b!==null&&b.tag===6?(o(L,b.sibling),b=d(b,F),b.return=L,L=b):(o(L,b),b=kh(F,L.mode,Y),b.return=L,L=b),E(L)):o(L,b)}return it}var Hi=Wf(!0),Gf=Wf(!1),Ml=Kr(null),Fl=null,qi=null,Mc=null;function Fc(){Mc=qi=Fl=null}function Uc(n){var r=Ml.current;Ge(Ml),n._currentValue=r}function zc(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Wi(n,r){Fl=n,Mc=qi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Kt=!0),n.firstContext=null)}function pn(n){var r=n._currentValue;if(Mc!==n)if(n={context:n,memoizedValue:r,next:null},qi===null){if(Fl===null)throw Error(t(308));qi=n,Fl.dependencies={lanes:0,firstContext:n}}else qi=qi.next=n;return r}var Ws=null;function jc(n){Ws===null?Ws=[n]:Ws.push(n)}function Kf(n,r,o,c){var d=r.interleaved;return d===null?(o.next=o,jc(r)):(o.next=d.next,d.next=o),r.interleaved=o,vr(n,c)}function vr(n,r){n.lanes|=r;var o=n.alternate;for(o!==null&&(o.lanes|=r),o=n,n=n.return;n!==null;)n.childLanes|=r,o=n.alternate,o!==null&&(o.childLanes|=r),o=n,n=n.return;return o.tag===3?o.stateNode:null}var Yr=!1;function Bc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Er(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Jr(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ve&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,vr(n,o)}return d=c.interleaved,d===null?(r.next=r,jc(c)):(r.next=d.next,d.next=r),c.interleaved=r,vr(n,o)}function Ul(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Bo(n,o)}}function Xf(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var E={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};f===null?d=f=E:f=f.next=E,o=o.next}while(o!==null);f===null?d=f=r:f=f.next=r}else d=f=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}function zl(n,r,o,c){var d=n.updateQueue;Yr=!1;var f=d.firstBaseUpdate,E=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var x=C,U=x.next;x.next=null,E===null?f=U:E.next=U,E=x;var K=n.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==E&&(C===null?K.firstBaseUpdate=U:C.next=U,K.lastBaseUpdate=x))}if(f!==null){var X=d.baseState;E=0,K=U=x=null,C=f;do{var W=C.lane,te=C.eventTime;if((c&W)===W){K!==null&&(K=K.next={eventTime:te,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ae=n,le=C;switch(W=r,te=o,le.tag){case 1:if(ae=le.payload,typeof ae=="function"){X=ae.call(te,X,W);break e}X=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=le.payload,W=typeof ae=="function"?ae.call(te,X,W):ae,W==null)break e;X=se({},X,W);break e;case 2:Yr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,W=d.effects,W===null?d.effects=[C]:W.push(C))}else te={eventTime:te,lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?(U=K=te,x=X):K=K.next=te,E|=W;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;W=C,C=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);if(K===null&&(x=X),d.baseState=x,d.firstBaseUpdate=U,d.lastBaseUpdate=K,r=d.shared.interleaved,r!==null){d=r;do E|=d.lane,d=d.next;while(d!==r)}else f===null&&(d.shared.lanes=0);Qs|=E,n.lanes=E,n.memoizedState=X}}function Yf(n,r,o){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=o,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var la={},Kn=Kr(la),ua=Kr(la),ca=Kr(la);function Gs(n){if(n===la)throw Error(t(174));return n}function $c(n,r){switch(He(ca,r),He(ua,n),He(Kn,la),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:pi(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=pi(r,n)}Ge(Kn),He(Kn,r)}function Gi(){Ge(Kn),Ge(ua),Ge(ca)}function Jf(n){Gs(ca.current);var r=Gs(Kn.current),o=pi(r,n.type);r!==o&&(He(ua,n),He(Kn,o))}function Hc(n){ua.current===n&&(Ge(Kn),Ge(ua))}var Xe=Kr(0);function jl(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qc=[];function Wc(){for(var n=0;n<qc.length;n++)qc[n]._workInProgressVersionPrimary=null;qc.length=0}var Bl=Ee.ReactCurrentDispatcher,Gc=Ee.ReactCurrentBatchConfig,Ks=0,Ye=null,mt=null,Et=null,$l=!1,ha=!1,da=0,xv=0;function bt(){throw Error(t(321))}function Kc(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!In(n[o],r[o]))return!1;return!0}function Qc(n,r,o,c,d,f){if(Ks=f,Ye=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Bl.current=n===null||n.memoizedState===null?Vv:Lv,n=o(c,d),ha){f=0;do{if(ha=!1,da=0,25<=f)throw Error(t(301));f+=1,Et=mt=null,r.updateQueue=null,Bl.current=Mv,n=o(c,d)}while(ha)}if(Bl.current=Wl,r=mt!==null&&mt.next!==null,Ks=0,Et=mt=Ye=null,$l=!1,r)throw Error(t(300));return n}function Xc(){var n=da!==0;return da=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ye.memoizedState=Et=n:Et=Et.next=n,Et}function mn(){if(mt===null){var n=Ye.alternate;n=n!==null?n.memoizedState:null}else n=mt.next;var r=Et===null?Ye.memoizedState:Et.next;if(r!==null)Et=r,mt=n;else{if(n===null)throw Error(t(310));mt=n,n={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Et===null?Ye.memoizedState=Et=n:Et=Et.next=n}return Et}function fa(n,r){return typeof r=="function"?r(n):r}function Yc(n){var r=mn(),o=r.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var c=mt,d=c.baseQueue,f=o.pending;if(f!==null){if(d!==null){var E=d.next;d.next=f.next,f.next=E}c.baseQueue=d=f,o.pending=null}if(d!==null){f=d.next,c=c.baseState;var C=E=null,x=null,U=f;do{var K=U.lane;if((Ks&K)===K)x!==null&&(x=x.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),c=U.hasEagerState?U.eagerState:n(c,U.action);else{var X={lane:K,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};x===null?(C=x=X,E=c):x=x.next=X,Ye.lanes|=K,Qs|=K}U=U.next}while(U!==null&&U!==f);x===null?E=c:x.next=C,In(c,r.memoizedState)||(Kt=!0),r.memoizedState=c,r.baseState=E,r.baseQueue=x,o.lastRenderedState=c}if(n=o.interleaved,n!==null){d=n;do f=d.lane,Ye.lanes|=f,Qs|=f,d=d.next;while(d!==n)}else d===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Jc(n){var r=mn(),o=r.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var c=o.dispatch,d=o.pending,f=r.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do f=n(f,E.action),E=E.next;while(E!==d);In(f,r.memoizedState)||(Kt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),o.lastRenderedState=f}return[f,c]}function Zf(){}function ep(n,r){var o=Ye,c=mn(),d=r(),f=!In(c.memoizedState,d);if(f&&(c.memoizedState=d,Kt=!0),c=c.queue,Zc(rp.bind(null,o,c,n),[n]),c.getSnapshot!==r||f||Et!==null&&Et.memoizedState.tag&1){if(o.flags|=2048,pa(9,np.bind(null,o,c,d,r),void 0,null),wt===null)throw Error(t(349));(Ks&30)!==0||tp(o,r,d)}return d}function tp(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ye.updateQueue,r===null?(r={lastEffect:null,stores:null},Ye.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function np(n,r,o,c){r.value=o,r.getSnapshot=c,sp(r)&&ip(n)}function rp(n,r,o){return o(function(){sp(r)&&ip(n)})}function sp(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!In(n,o)}catch{return!0}}function ip(n){var r=vr(n,1);r!==null&&Rn(r,n,1,-1)}function op(n){var r=Qn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},r.queue=n,n=n.dispatch=Ov.bind(null,Ye,n),[r.memoizedState,n]}function pa(n,r,o,c){return n={tag:n,create:r,destroy:o,deps:c,next:null},r=Ye.updateQueue,r===null?(r={lastEffect:null,stores:null},Ye.updateQueue=r,r.lastEffect=n.next=n):(o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n)),n}function ap(){return mn().memoizedState}function Hl(n,r,o,c){var d=Qn();Ye.flags|=n,d.memoizedState=pa(1|r,o,void 0,c===void 0?null:c)}function ql(n,r,o,c){var d=mn();c=c===void 0?null:c;var f=void 0;if(mt!==null){var E=mt.memoizedState;if(f=E.destroy,c!==null&&Kc(c,E.deps)){d.memoizedState=pa(r,o,f,c);return}}Ye.flags|=n,d.memoizedState=pa(1|r,o,f,c)}function lp(n,r){return Hl(8390656,8,n,r)}function Zc(n,r){return ql(2048,8,n,r)}function up(n,r){return ql(4,2,n,r)}function cp(n,r){return ql(4,4,n,r)}function hp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function dp(n,r,o){return o=o!=null?o.concat([n]):null,ql(4,4,hp.bind(null,r,n),o)}function eh(){}function fp(n,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Kc(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function pp(n,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Kc(r,c[1])?c[0]:(n=n(),o.memoizedState=[n,r],n)}function mp(n,r,o){return(Ks&21)===0?(n.baseState&&(n.baseState=!1,Kt=!0),n.memoizedState=o):(In(o,r)||(o=zo(),Ye.lanes|=o,Qs|=o,n.baseState=!0),r)}function Dv(n,r){var o=Ne;Ne=o!==0&&4>o?o:4,n(!0);var c=Gc.transition;Gc.transition={};try{n(!1),r()}finally{Ne=o,Gc.transition=c}}function gp(){return mn().memoizedState}function bv(n,r,o){var c=ns(n);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},yp(n))_p(r,o);else if(o=Kf(n,r,o,c),o!==null){var d=Bt();Rn(o,n,c,d),vp(o,r,c)}}function Ov(n,r,o){var c=ns(n),d={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(yp(n))_p(r,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,C=f(E,o);if(d.hasEagerState=!0,d.eagerState=C,In(C,E)){var x=r.interleaved;x===null?(d.next=d,jc(r)):(d.next=x.next,x.next=d),r.interleaved=d;return}}catch{}finally{}o=Kf(n,r,d,c),o!==null&&(d=Bt(),Rn(o,n,c,d),vp(o,r,c))}}function yp(n){var r=n.alternate;return n===Ye||r!==null&&r===Ye}function _p(n,r){ha=$l=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function vp(n,r,o){if((o&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Bo(n,o)}}var Wl={readContext:pn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},Vv={readContext:pn,useCallback:function(n,r){return Qn().memoizedState=[n,r===void 0?null:r],n},useContext:pn,useEffect:lp,useImperativeHandle:function(n,r,o){return o=o!=null?o.concat([n]):null,Hl(4194308,4,hp.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Hl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Hl(4,2,n,r)},useMemo:function(n,r){var o=Qn();return r=r===void 0?null:r,n=n(),o.memoizedState=[n,r],n},useReducer:function(n,r,o){var c=Qn();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=bv.bind(null,Ye,n),[c.memoizedState,n]},useRef:function(n){var r=Qn();return n={current:n},r.memoizedState=n},useState:op,useDebugValue:eh,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=op(!1),r=n[0];return n=Dv.bind(null,n[1]),Qn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,o){var c=Ye,d=Qn();if(Qe){if(o===void 0)throw Error(t(407));o=o()}else{if(o=r(),wt===null)throw Error(t(349));(Ks&30)!==0||tp(c,r,o)}d.memoizedState=o;var f={value:o,getSnapshot:r};return d.queue=f,lp(rp.bind(null,c,f,n),[n]),c.flags|=2048,pa(9,np.bind(null,c,f,o,r),void 0,null),o},useId:function(){var n=Qn(),r=wt.identifierPrefix;if(Qe){var o=_r,c=yr;o=(c&~(1<<32-tn(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=da++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=xv++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Lv={readContext:pn,useCallback:fp,useContext:pn,useEffect:Zc,useImperativeHandle:dp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:pp,useReducer:Yc,useRef:ap,useState:function(){return Yc(fa)},useDebugValue:eh,useDeferredValue:function(n){var r=mn();return mp(r,mt.memoizedState,n)},useTransition:function(){var n=Yc(fa)[0],r=mn().memoizedState;return[n,r]},useMutableSource:Zf,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1},Mv={readContext:pn,useCallback:fp,useContext:pn,useEffect:Zc,useImperativeHandle:dp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:pp,useReducer:Jc,useRef:ap,useState:function(){return Jc(fa)},useDebugValue:eh,useDeferredValue:function(n){var r=mn();return mt===null?r.memoizedState=n:mp(r,mt.memoizedState,n)},useTransition:function(){var n=Jc(fa)[0],r=mn().memoizedState;return[n,r]},useMutableSource:Zf,useSyncExternalStore:ep,useId:gp,unstable_isNewReconciler:!1};function Cn(n,r){if(n&&n.defaultProps){r=se({},r),n=n.defaultProps;for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}return r}function th(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:se({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Gl={isMounted:function(n){return(n=n._reactInternals)?wn(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Bt(),d=ns(n),f=Er(c,d);f.payload=r,o!=null&&(f.callback=o),r=Jr(n,f,d),r!==null&&(Rn(r,n,d,c),Ul(r,n,d))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Bt(),d=ns(n),f=Er(c,d);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Jr(n,f,d),r!==null&&(Rn(r,n,d,c),Ul(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Bt(),c=ns(n),d=Er(o,c);d.tag=2,r!=null&&(d.callback=r),r=Jr(n,d,c),r!==null&&(Rn(r,n,c,o),Ul(r,n,c))}};function Ep(n,r,o,c,d,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,E):r.prototype&&r.prototype.isPureReactComponent?!ea(o,c)||!ea(d,f):!0}function wp(n,r,o){var c=!1,d=Qr,f=r.contextType;return typeof f=="object"&&f!==null?f=pn(f):(d=Gt(r)?$s:Dt.current,c=r.contextTypes,f=(c=c!=null)?zi(n,d):Qr),r=new r(o,f),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Gl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),r}function Tp(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Gl.enqueueReplaceState(r,r.state,null)}function nh(n,r,o,c){var d=n.stateNode;d.props=o,d.state=n.memoizedState,d.refs={},Bc(n);var f=r.contextType;typeof f=="object"&&f!==null?d.context=pn(f):(f=Gt(r)?$s:Dt.current,d.context=zi(n,f)),d.state=n.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(th(n,r,f,o),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Gl.enqueueReplaceState(d,d.state,null),zl(n,o,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Ki(n,r){try{var o="",c=r;do o+=ke(c),c=c.return;while(c);var d=o}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:r,stack:d,digest:null}}function rh(n,r,o){return{value:n,source:null,stack:o??null,digest:r??null}}function sh(n,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function Ip(n,r,o){o=Er(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){eu||(eu=!0,vh=c),sh(n,r)},o}function Sp(n,r,o){o=Er(-1,o),o.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;o.payload=function(){return c(d)},o.callback=function(){sh(n,r)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(o.callback=function(){sh(n,r),typeof c!="function"&&(es===null?es=new Set([this]):es.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),o}function Cp(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new Fv;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(d.add(o),n=Jv.bind(null,n,r,o),r.then(n,n))}function Ap(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function kp(n,r,o,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=Er(-1,1),r.tag=2,Jr(o,r,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Uv=Ee.ReactCurrentOwner,Kt=!1;function jt(n,r,o,c){r.child=n===null?Gf(r,null,o,c):Hi(r,n.child,o,c)}function Rp(n,r,o,c,d){o=o.render;var f=r.ref;return Wi(r,d),c=Qc(n,r,o,c,f,d),o=Xc(),n!==null&&!Kt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,wr(n,r,d)):(Qe&&o&&Dc(r),r.flags|=1,jt(n,r,c,d),r.child)}function Pp(n,r,o,c,d){if(n===null){var f=o.type;return typeof f=="function"&&!Ah(f)&&f.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=f,Np(n,r,f,c,d)):(n=ou(o.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(f=n.child,(n.lanes&d)===0){var E=f.memoizedProps;if(o=o.compare,o=o!==null?o:ea,o(E,c)&&n.ref===r.ref)return wr(n,r,d)}return r.flags|=1,n=ss(f,c),n.ref=r.ref,n.return=r,r.child=n}function Np(n,r,o,c,d){if(n!==null){var f=n.memoizedProps;if(ea(f,c)&&n.ref===r.ref)if(Kt=!1,r.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Kt=!0);else return r.lanes=n.lanes,wr(n,r,d)}return ih(n,r,o,c,d)}function xp(n,r,o){var c=r.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Xi,un),un|=o;else{if((o&1073741824)===0)return n=f!==null?f.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,He(Xi,un),un|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:o,He(Xi,un),un|=c}else f!==null?(c=f.baseLanes|o,r.memoizedState=null):c=o,He(Xi,un),un|=c;return jt(n,r,d,o),r.child}function Dp(n,r){var o=r.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function ih(n,r,o,c,d){var f=Gt(o)?$s:Dt.current;return f=zi(r,f),Wi(r,d),o=Qc(n,r,o,c,f,d),c=Xc(),n!==null&&!Kt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,wr(n,r,d)):(Qe&&c&&Dc(r),r.flags|=1,jt(n,r,o,d),r.child)}function bp(n,r,o,c,d){if(Gt(o)){var f=!0;xl(r)}else f=!1;if(Wi(r,d),r.stateNode===null)Ql(n,r),wp(r,o,c),nh(r,o,c,d),c=!0;else if(n===null){var E=r.stateNode,C=r.memoizedProps;E.props=C;var x=E.context,U=o.contextType;typeof U=="object"&&U!==null?U=pn(U):(U=Gt(o)?$s:Dt.current,U=zi(r,U));var K=o.getDerivedStateFromProps,X=typeof K=="function"||typeof E.getSnapshotBeforeUpdate=="function";X||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==c||x!==U)&&Tp(r,E,c,U),Yr=!1;var W=r.memoizedState;E.state=W,zl(r,c,E,d),x=r.memoizedState,C!==c||W!==x||Wt.current||Yr?(typeof K=="function"&&(th(r,o,K,c),x=r.memoizedState),(C=Yr||Ep(r,o,C,c,W,x,U))?(X||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=x),E.props=c,E.state=x,E.context=U,c=C):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{E=r.stateNode,Qf(n,r),C=r.memoizedProps,U=r.type===r.elementType?C:Cn(r.type,C),E.props=U,X=r.pendingProps,W=E.context,x=o.contextType,typeof x=="object"&&x!==null?x=pn(x):(x=Gt(o)?$s:Dt.current,x=zi(r,x));var te=o.getDerivedStateFromProps;(K=typeof te=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==X||W!==x)&&Tp(r,E,c,x),Yr=!1,W=r.memoizedState,E.state=W,zl(r,c,E,d);var ae=r.memoizedState;C!==X||W!==ae||Wt.current||Yr?(typeof te=="function"&&(th(r,o,te,c),ae=r.memoizedState),(U=Yr||Ep(r,o,U,c,W,ae,x)||!1)?(K||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,ae,x),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,ae,x)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ae),E.props=c,E.state=ae,E.context=x,c=U):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return oh(n,r,o,c,f,d)}function oh(n,r,o,c,d,f){Dp(n,r);var E=(r.flags&128)!==0;if(!c&&!E)return d&&Ff(r,o,!1),wr(n,r,f);c=r.stateNode,Uv.current=r;var C=E&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&E?(r.child=Hi(r,n.child,null,f),r.child=Hi(r,null,C,f)):jt(n,r,C,f),r.memoizedState=c.state,d&&Ff(r,o,!0),r.child}function Op(n){var r=n.stateNode;r.pendingContext?Lf(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Lf(n,r.context,!1),$c(n,r.containerInfo)}function Vp(n,r,o,c,d){return $i(),Lc(d),r.flags|=256,jt(n,r,o,c),r.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Lp(n,r,o){var c=r.pendingProps,d=Xe.current,f=!1,E=(r.flags&128)!==0,C;if((C=E)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(f=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),He(Xe,d&1),n===null)return Vc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(E=c.children,n=c.fallback,f?(c=r.mode,f=r.child,E={mode:"hidden",children:E},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=E):f=au(E,c,0,null),n=Zs(n,c,o,null),f.return=r,n.return=r,f.sibling=n,r.child=f,r.child.memoizedState=lh(o),r.memoizedState=ah,n):uh(r,E));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return zv(n,r,E,c,C,d,o);if(f){f=c.fallback,E=r.mode,d=n.child,C=d.sibling;var x={mode:"hidden",children:c.children};return(E&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=x,r.deletions=null):(c=ss(d,x),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?f=ss(C,f):(f=Zs(f,E,o,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,E=n.child.memoizedState,E=E===null?lh(o):{baseLanes:E.baseLanes|o,cachePool:null,transitions:E.transitions},f.memoizedState=E,f.childLanes=n.childLanes&~o,r.memoizedState=ah,c}return f=n.child,n=f.sibling,c=ss(f,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=o),c.return=r,c.sibling=null,n!==null&&(o=r.deletions,o===null?(r.deletions=[n],r.flags|=16):o.push(n)),r.child=c,r.memoizedState=null,c}function uh(n,r){return r=au({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Kl(n,r,o,c){return c!==null&&Lc(c),Hi(r,n.child,null,o),n=uh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function zv(n,r,o,c,d,f,E){if(o)return r.flags&256?(r.flags&=-257,c=rh(Error(t(422))),Kl(n,r,E,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(f=c.fallback,d=r.mode,c=au({mode:"visible",children:c.children},d,0,null),f=Zs(f,d,E,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,(r.mode&1)!==0&&Hi(r,n.child,null,E),r.child.memoizedState=lh(E),r.memoizedState=ah,f);if((r.mode&1)===0)return Kl(n,r,E,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,f=Error(t(419)),c=rh(f,c,void 0),Kl(n,r,E,c)}if(C=(E&n.childLanes)!==0,Kt||C){if(c=wt,c!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|E))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,vr(n,d),Rn(c,n,d,-1))}return Ch(),c=rh(Error(t(421))),Kl(n,r,E,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=Zv.bind(null,n),d._reactRetry=r,null):(n=f.treeContext,ln=Gr(d.nextSibling),an=r,Qe=!0,Sn=null,n!==null&&(dn[fn++]=yr,dn[fn++]=_r,dn[fn++]=Hs,yr=n.id,_r=n.overflow,Hs=r),r=uh(r,c.children),r.flags|=4096,r)}function Mp(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),zc(n.return,r,o)}function ch(n,r,o,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=o,f.tailMode=d)}function Fp(n,r,o){var c=r.pendingProps,d=c.revealOrder,f=c.tail;if(jt(n,r,c.children,o),c=Xe.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mp(n,o,r);else if(n.tag===19)Mp(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(He(Xe,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(o=r.child,d=null;o!==null;)n=o.alternate,n!==null&&jl(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),ch(r,!1,d,o,f);break;case"backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&jl(n)===null){r.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}ch(r,!0,o,null,f);break;case"together":ch(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ql(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function wr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Qs|=r.lanes,(o&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,o=ss(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=ss(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function jv(n,r,o){switch(r.tag){case 3:Op(r),$i();break;case 5:Jf(r);break;case 1:Gt(r.type)&&xl(r);break;case 4:$c(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;He(Ml,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(He(Xe,Xe.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Lp(n,r,o):(He(Xe,Xe.current&1),n=wr(n,r,o),n!==null?n.sibling:null);He(Xe,Xe.current&1);break;case 19:if(c=(o&r.childLanes)!==0,(n.flags&128)!==0){if(c)return Fp(n,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(Xe,Xe.current),c)break;return null;case 22:case 23:return r.lanes=0,xp(n,r,o)}return wr(n,r,o)}var Up,hh,zp,jp;Up=function(n,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},hh=function(){},zp=function(n,r,o,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Gs(Kn.current);var f=null;switch(o){case"input":d=di(n,d),c=di(n,c),f=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),f=[];break;case"textarea":d=Po(n,d),c=Po(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Rl)}En(o,c);var E;o=null;for(U in d)if(!c.hasOwnProperty(U)&&d.hasOwnProperty(U)&&d[U]!=null)if(U==="style"){var C=d[U];for(E in C)C.hasOwnProperty(E)&&(o||(o={}),o[E]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?f||(f=[]):(f=f||[]).push(U,null));for(U in c){var x=c[U];if(C=d?.[U],c.hasOwnProperty(U)&&x!==C&&(x!=null||C!=null))if(U==="style")if(C){for(E in C)!C.hasOwnProperty(E)||x&&x.hasOwnProperty(E)||(o||(o={}),o[E]="");for(E in x)x.hasOwnProperty(E)&&C[E]!==x[E]&&(o||(o={}),o[E]=x[E])}else o||(f||(f=[]),f.push(U,o)),o=x;else U==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,C=C?C.__html:void 0,x!=null&&C!==x&&(f=f||[]).push(U,x)):U==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push(U,""+x):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(x!=null&&U==="onScroll"&&We("scroll",n),f||C===x||(f=[])):(f=f||[]).push(U,x))}o&&(f=f||[]).push("style",o);var U=f;(r.updateQueue=U)&&(r.flags|=4)}},jp=function(n,r,o,c){o!==c&&(r.flags|=4)};function ma(n,r){if(!Qe)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function Bv(n,r,o){var c=r.pendingProps;switch(bc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(r),null;case 1:return Gt(r.type)&&Nl(),Ot(r),null;case 3:return c=r.stateNode,Gi(),Ge(Wt),Ge(Dt),Wc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Vl(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sn!==null&&(Th(Sn),Sn=null))),hh(n,r),Ot(r),null;case 5:Hc(r);var d=Gs(ca.current);if(o=r.type,n!==null&&r.stateNode!=null)zp(n,r,o,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ot(r),null}if(n=Gs(Kn.current),Vl(r)){c=r.stateNode,o=r.type;var f=r.memoizedProps;switch(c[Gn]=r,c[ia]=f,n=(r.mode&1)!==0,o){case"dialog":We("cancel",c),We("close",c);break;case"iframe":case"object":case"embed":We("load",c);break;case"video":case"audio":for(d=0;d<na.length;d++)We(na[d],c);break;case"source":We("error",c);break;case"img":case"image":case"link":We("error",c),We("load",c);break;case"details":We("toggle",c);break;case"input":Za(c,f),We("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},We("invalid",c);break;case"textarea":No(c,f),We("invalid",c)}En(o,f),d=null;for(var E in f)if(f.hasOwnProperty(E)){var C=f[E];E==="children"?typeof C=="string"?c.textContent!==C&&(f.suppressHydrationWarning!==!0&&kl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(f.suppressHydrationWarning!==!0&&kl(c.textContent,C,n),d=["children",""+C]):a.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&We("scroll",c)}switch(o){case"input":hi(c),Ro(c,f,!0);break;case"textarea":hi(c),xr(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Rl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=xo(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(o,{is:c.is}):(n=E.createElement(o),o==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,o),n[Gn]=r,n[ia]=c,Up(n,r,!1,!1),r.stateNode=n;e:{switch(E=gi(o,c),o){case"dialog":We("cancel",n),We("close",n),d=c;break;case"iframe":case"object":case"embed":We("load",n),d=c;break;case"video":case"audio":for(d=0;d<na.length;d++)We(na[d],n);d=c;break;case"source":We("error",n),d=c;break;case"img":case"image":case"link":We("error",n),We("load",n),d=c;break;case"details":We("toggle",n),d=c;break;case"input":Za(n,c),d=di(n,c),We("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),We("invalid",n);break;case"textarea":No(n,c),d=Po(n,c),We("invalid",n);break;default:d=c}En(o,d),C=d;for(f in C)if(C.hasOwnProperty(f)){var x=C[f];f==="style"?mi(n,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&tl(n,x)):f==="children"?typeof x=="string"?(o!=="textarea"||x!=="")&&Rs(n,x):typeof x=="number"&&Rs(n,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(a.hasOwnProperty(f)?x!=null&&f==="onScroll"&&We("scroll",n):x!=null&&pe(n,f,x,E))}switch(o){case"input":hi(n),Ro(n,c,!1);break;case"textarea":hi(n),xr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?vn(n,!!c.multiple,f,!1):c.defaultValue!=null&&vn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Rl)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ot(r),null;case 6:if(n&&r.stateNode!=null)jp(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(o=Gs(ca.current),Gs(Kn.current),Vl(r)){if(c=r.stateNode,o=r.memoizedProps,c[Gn]=r,(f=c.nodeValue!==o)&&(n=an,n!==null))switch(n.tag){case 3:kl(c.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&kl(c.nodeValue,o,(n.mode&1)!==0)}f&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Gn]=r,r.stateNode=c}return Ot(r),null;case 13:if(Ge(Xe),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&ln!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Hf(),$i(),r.flags|=98560,f=!1;else if(f=Vl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[Gn]=r}else $i(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ot(r),f=!1}else Sn!==null&&(Th(Sn),Sn=null),f=!0;if(!f)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Xe.current&1)!==0?gt===0&&(gt=3):Ch())),r.updateQueue!==null&&(r.flags|=4),Ot(r),null);case 4:return Gi(),hh(n,r),n===null&&ra(r.stateNode.containerInfo),Ot(r),null;case 10:return Uc(r.type._context),Ot(r),null;case 17:return Gt(r.type)&&Nl(),Ot(r),null;case 19:if(Ge(Xe),f=r.memoizedState,f===null)return Ot(r),null;if(c=(r.flags&128)!==0,E=f.rendering,E===null)if(c)ma(f,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(E=jl(n),E!==null){for(r.flags|=128,ma(f,!1),c=E.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)f=o,n=c,f.flags&=14680066,E=f.alternate,E===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=E.childLanes,f.lanes=E.lanes,f.child=E.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=E.memoizedProps,f.memoizedState=E.memoizedState,f.updateQueue=E.updateQueue,f.type=E.type,n=E.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return He(Xe,Xe.current&1|2),r.child}n=n.sibling}f.tail!==null&&qe()>Yi&&(r.flags|=128,c=!0,ma(f,!1),r.lanes=4194304)}else{if(!c)if(n=jl(E),n!==null){if(r.flags|=128,c=!0,o=n.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),ma(f,!0),f.tail===null&&f.tailMode==="hidden"&&!E.alternate&&!Qe)return Ot(r),null}else 2*qe()-f.renderingStartTime>Yi&&o!==1073741824&&(r.flags|=128,c=!0,ma(f,!1),r.lanes=4194304);f.isBackwards?(E.sibling=r.child,r.child=E):(o=f.last,o!==null?o.sibling=E:r.child=E,f.last=E)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=qe(),r.sibling=null,o=Xe.current,He(Xe,c?o&1|2:o&1),r):(Ot(r),null);case 22:case 23:return Sh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(un&1073741824)!==0&&(Ot(r),r.subtreeFlags&6&&(r.flags|=8192)):Ot(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function $v(n,r){switch(bc(r),r.tag){case 1:return Gt(r.type)&&Nl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Gi(),Ge(Wt),Ge(Dt),Wc(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Hc(r),null;case 13:if(Ge(Xe),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));$i()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ge(Xe),null;case 4:return Gi(),null;case 10:return Uc(r.type._context),null;case 22:case 23:return Sh(),null;case 24:return null;default:return null}}var Xl=!1,Vt=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Qi(n,r){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){tt(n,r,c)}else o.current=null}function dh(n,r,o){try{o()}catch(c){tt(n,r,c)}}var Bp=!1;function qv(n,r){if(Sc=dr,n=Ef(),gc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var E=0,C=-1,x=-1,U=0,K=0,X=n,W=null;t:for(;;){for(var te;X!==o||d!==0&&X.nodeType!==3||(C=E+d),X!==f||c!==0&&X.nodeType!==3||(x=E+c),X.nodeType===3&&(E+=X.nodeValue.length),(te=X.firstChild)!==null;)W=X,X=te;for(;;){if(X===n)break t;if(W===o&&++U===d&&(C=E),W===f&&++K===c&&(x=E),(te=X.nextSibling)!==null)break;X=W,W=X.parentNode}X=te}o=C===-1||x===-1?null:{start:C,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cc={focusedElem:n,selectionRange:o},dr=!1,oe=r;oe!==null;)if(r=oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,oe=n;else for(;oe!==null;){r=oe;try{var ae=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var le=ae.memoizedProps,it=ae.memoizedState,L=r.stateNode,b=L.getSnapshotBeforeUpdate(r.elementType===r.type?le:Cn(r.type,le),it);L.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){tt(r,r.return,Y)}if(n=r.sibling,n!==null){n.return=r.return,oe=n;break}oe=r.return}return ae=Bp,Bp=!1,ae}function ga(n,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&dh(r,o,f)}d=d.next}while(d!==c)}}function Yl(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function fh(n){var r=n.ref;if(r!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof r=="function"?r(n):r.current=n}}function $p(n){var r=n.alternate;r!==null&&(n.alternate=null,$p(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Gn],delete r[ia],delete r[Pc],delete r[kv],delete r[Rv])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hp(n){return n.tag===5||n.tag===3||n.tag===4}function qp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ph(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Rl));else if(c!==4&&(n=n.child,n!==null))for(ph(n,r,o),n=n.sibling;n!==null;)ph(n,r,o),n=n.sibling}function mh(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(mh(n,r,o),n=n.sibling;n!==null;)mh(n,r,o),n=n.sibling}var At=null,An=!1;function Zr(n,r,o){for(o=o.child;o!==null;)Wp(n,r,o),o=o.sibling}function Wp(n,r,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(bs,o)}catch{}switch(o.tag){case 5:Vt||Qi(o,r);case 6:var c=At,d=An;At=null,Zr(n,r,o),At=c,An=d,At!==null&&(An?(n=At,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):At.removeChild(o.stateNode));break;case 18:At!==null&&(An?(n=At,o=o.stateNode,n.nodeType===8?Rc(n.parentNode,o):n.nodeType===1&&Rc(n,o),$r(n)):Rc(At,o.stateNode));break;case 4:c=At,d=An,At=o.stateNode.containerInfo,An=!0,Zr(n,r,o),At=c,An=d;break;case 0:case 11:case 14:case 15:if(!Vt&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,E=f.destroy;f=f.tag,E!==void 0&&((f&2)!==0||(f&4)!==0)&&dh(o,r,E),d=d.next}while(d!==c)}Zr(n,r,o);break;case 1:if(!Vt&&(Qi(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(C){tt(o,r,C)}Zr(n,r,o);break;case 21:Zr(n,r,o);break;case 22:o.mode&1?(Vt=(c=Vt)||o.memoizedState!==null,Zr(n,r,o),Vt=c):Zr(n,r,o);break;default:Zr(n,r,o)}}function Gp(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new Hv),r.forEach(function(c){var d=eE.bind(null,n,c);o.has(c)||(o.add(c),c.then(d,d))})}}function kn(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];try{var f=n,E=r,C=E;e:for(;C!==null;){switch(C.tag){case 5:At=C.stateNode,An=!1;break e;case 3:At=C.stateNode.containerInfo,An=!0;break e;case 4:At=C.stateNode.containerInfo,An=!0;break e}C=C.return}if(At===null)throw Error(t(160));Wp(f,E,d),At=null,An=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch(U){tt(d,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Kp(r,n),r=r.sibling}function Kp(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(kn(r,n),Xn(n),c&4){try{ga(3,n,n.return),Yl(3,n)}catch(le){tt(n,n.return,le)}try{ga(5,n,n.return)}catch(le){tt(n,n.return,le)}}break;case 1:kn(r,n),Xn(n),c&512&&o!==null&&Qi(o,o.return);break;case 5:if(kn(r,n),Xn(n),c&512&&o!==null&&Qi(o,o.return),n.flags&32){var d=n.stateNode;try{Rs(d,"")}catch(le){tt(n,n.return,le)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,E=o!==null?o.memoizedProps:f,C=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{C==="input"&&f.type==="radio"&&f.name!=null&&fi(d,f),gi(C,E);var U=gi(C,f);for(E=0;E<x.length;E+=2){var K=x[E],X=x[E+1];K==="style"?mi(d,X):K==="dangerouslySetInnerHTML"?tl(d,X):K==="children"?Rs(d,X):pe(d,K,X,U)}switch(C){case"input":ks(d,f);break;case"textarea":el(d,f);break;case"select":var W=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var te=f.value;te!=null?vn(d,!!f.multiple,te,!1):W!==!!f.multiple&&(f.defaultValue!=null?vn(d,!!f.multiple,f.defaultValue,!0):vn(d,!!f.multiple,f.multiple?[]:"",!1))}d[ia]=f}catch(le){tt(n,n.return,le)}}break;case 6:if(kn(r,n),Xn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(le){tt(n,n.return,le)}}break;case 3:if(kn(r,n),Xn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{$r(r.containerInfo)}catch(le){tt(n,n.return,le)}break;case 4:kn(r,n),Xn(n);break;case 13:kn(r,n),Xn(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(_h=qe())),c&4&&Gp(n);break;case 22:if(K=o!==null&&o.memoizedState!==null,n.mode&1?(Vt=(U=Vt)||K,kn(r,n),Vt=U):kn(r,n),Xn(n),c&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!K&&(n.mode&1)!==0)for(oe=n,K=n.child;K!==null;){for(X=oe=K;oe!==null;){switch(W=oe,te=W.child,W.tag){case 0:case 11:case 14:case 15:ga(4,W,W.return);break;case 1:Qi(W,W.return);var ae=W.stateNode;if(typeof ae.componentWillUnmount=="function"){c=W,o=W.return;try{r=c,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(le){tt(c,o,le)}}break;case 5:Qi(W,W.return);break;case 22:if(W.memoizedState!==null){Yp(X);continue}}te!==null?(te.return=W,oe=te):Yp(X)}K=K.sibling}e:for(K=null,X=n;;){if(X.tag===5){if(K===null){K=X;try{d=X.stateNode,U?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(C=X.stateNode,x=X.memoizedProps.style,E=x!=null&&x.hasOwnProperty("display")?x.display:null,C.style.display=Or("display",E))}catch(le){tt(n,n.return,le)}}}else if(X.tag===6){if(K===null)try{X.stateNode.nodeValue=U?"":X.memoizedProps}catch(le){tt(n,n.return,le)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;K===X&&(K=null),X=X.return}K===X&&(K=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:kn(r,n),Xn(n),c&4&&Gp(n);break;case 21:break;default:kn(r,n),Xn(n)}}function Xn(n){var r=n.flags;if(r&2){try{e:{for(var o=n.return;o!==null;){if(Hp(o)){var c=o;break e}o=o.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Rs(d,""),c.flags&=-33);var f=qp(n);mh(n,f,d);break;case 3:case 4:var E=c.stateNode.containerInfo,C=qp(n);ph(n,C,E);break;default:throw Error(t(161))}}catch(x){tt(n,n.return,x)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Wv(n,r,o){oe=n,Qp(n)}function Qp(n,r,o){for(var c=(n.mode&1)!==0;oe!==null;){var d=oe,f=d.child;if(d.tag===22&&c){var E=d.memoizedState!==null||Xl;if(!E){var C=d.alternate,x=C!==null&&C.memoizedState!==null||Vt;C=Xl;var U=Vt;if(Xl=E,(Vt=x)&&!U)for(oe=d;oe!==null;)E=oe,x=E.child,E.tag===22&&E.memoizedState!==null?Jp(d):x!==null?(x.return=E,oe=x):Jp(d);for(;f!==null;)oe=f,Qp(f),f=f.sibling;oe=d,Xl=C,Vt=U}Xp(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,oe=f):Xp(n)}}function Xp(n){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Vt||Yl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Vt)if(o===null)c.componentDidMount();else{var d=r.elementType===r.type?o.memoizedProps:Cn(r.type,o.memoizedProps);c.componentDidUpdate(d,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=r.updateQueue;f!==null&&Yf(r,f,c);break;case 3:var E=r.updateQueue;if(E!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Yf(r,E,o)}break;case 5:var C=r.stateNode;if(o===null&&r.flags&4){o=C;var x=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&o.focus();break;case"img":x.src&&(o.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var K=U.memoizedState;if(K!==null){var X=K.dehydrated;X!==null&&$r(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vt||r.flags&512&&fh(r)}catch(W){tt(r,r.return,W)}}if(r===n){oe=null;break}if(o=r.sibling,o!==null){o.return=r.return,oe=o;break}oe=r.return}}function Yp(n){for(;oe!==null;){var r=oe;if(r===n){oe=null;break}var o=r.sibling;if(o!==null){o.return=r.return,oe=o;break}oe=r.return}}function Jp(n){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Yl(4,r)}catch(x){tt(r,o,x)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(x){tt(r,d,x)}}var f=r.return;try{fh(r)}catch(x){tt(r,f,x)}break;case 5:var E=r.return;try{fh(r)}catch(x){tt(r,E,x)}}}catch(x){tt(r,r.return,x)}if(r===n){oe=null;break}var C=r.sibling;if(C!==null){C.return=r.return,oe=C;break}oe=r.return}}var Gv=Math.ceil,Jl=Ee.ReactCurrentDispatcher,gh=Ee.ReactCurrentOwner,gn=Ee.ReactCurrentBatchConfig,Ve=0,wt=null,ht=null,kt=0,un=0,Xi=Kr(0),gt=0,ya=null,Qs=0,Zl=0,yh=0,_a=null,Qt=null,_h=0,Yi=1/0,Tr=null,eu=!1,vh=null,es=null,tu=!1,ts=null,nu=0,va=0,Eh=null,ru=-1,su=0;function Bt(){return(Ve&6)!==0?qe():ru!==-1?ru:ru=qe()}function ns(n){return(n.mode&1)===0?1:(Ve&2)!==0&&kt!==0?kt&-kt:Nv.transition!==null?(su===0&&(su=zo()),su):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:Ai(n.type)),n)}function Rn(n,r,o,c){if(50<va)throw va=0,Eh=null,Error(t(185));Ms(n,o,c),((Ve&2)===0||n!==wt)&&(n===wt&&((Ve&2)===0&&(Zl|=o),gt===4&&rs(n,kt)),Xt(n,c),o===1&&Ve===0&&(r.mode&1)===0&&(Yi=qe()+500,Dl&&Xr()))}function Xt(n,r){var o=n.callbackNode;Ls(n,r);var c=ur(n,n===wt?kt:0);if(c===0)o!==null&&vi(o),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(o!=null&&vi(o),r===1)n.tag===0?Pv(em.bind(null,n)):Uf(em.bind(null,n)),Cv(function(){(Ve&6)===0&&Xr()}),o=null;else{switch(Mn(c)){case 1:o=Ei;break;case 4:o=Mo;break;case 16:o=Ds;break;case 536870912:o=wi;break;default:o=Ds}o=lm(o,Zp.bind(null,n))}n.callbackPriority=r,n.callbackNode=o}}function Zp(n,r){if(ru=-1,su=0,(Ve&6)!==0)throw Error(t(327));var o=n.callbackNode;if(Ji()&&n.callbackNode!==o)return null;var c=ur(n,n===wt?kt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=iu(n,c);else{r=c;var d=Ve;Ve|=2;var f=nm();(wt!==n||kt!==r)&&(Tr=null,Yi=qe()+500,Ys(n,r));do try{Xv();break}catch(C){tm(n,C)}while(!0);Fc(),Jl.current=f,Ve=d,ht!==null?r=0:(wt=null,kt=0,r=gt)}if(r!==0){if(r===2&&(d=Uo(n),d!==0&&(c=d,r=wh(n,d))),r===1)throw o=ya,Ys(n,0),rs(n,c),Xt(n,qe()),o;if(r===6)rs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Kv(d)&&(r=iu(n,c),r===2&&(f=Uo(n),f!==0&&(c=f,r=wh(n,f))),r===1))throw o=ya,Ys(n,0),rs(n,c),Xt(n,qe()),o;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Js(n,Qt,Tr);break;case 3:if(rs(n,c),(c&130023424)===c&&(r=_h+500-qe(),10<r)){if(ur(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Bt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=kc(Js.bind(null,n,Qt,Tr),r);break}Js(n,Qt,Tr);break;case 4:if(rs(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var E=31-tn(c);f=1<<E,E=r[E],E>d&&(d=E),c&=~f}if(c=d,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Gv(c/1960))-c,10<c){n.timeoutHandle=kc(Js.bind(null,n,Qt,Tr),c);break}Js(n,Qt,Tr);break;case 5:Js(n,Qt,Tr);break;default:throw Error(t(329))}}}return Xt(n,qe()),n.callbackNode===o?Zp.bind(null,n):null}function wh(n,r){var o=_a;return n.current.memoizedState.isDehydrated&&(Ys(n,r).flags|=256),n=iu(n,r),n!==2&&(r=Qt,Qt=o,r!==null&&Th(r)),n}function Th(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function Kv(n){for(var r=n;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var d=o[c],f=d.getSnapshot;d=d.value;try{if(!In(f(),d))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function rs(n,r){for(r&=~yh,r&=~Zl,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var o=31-tn(r),c=1<<o;n[o]=-1,r&=~c}}function em(n){if((Ve&6)!==0)throw Error(t(327));Ji();var r=ur(n,0);if((r&1)===0)return Xt(n,qe()),null;var o=iu(n,r);if(n.tag!==0&&o===2){var c=Uo(n);c!==0&&(r=c,o=wh(n,c))}if(o===1)throw o=ya,Ys(n,0),rs(n,r),Xt(n,qe()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Js(n,Qt,Tr),Xt(n,qe()),null}function Ih(n,r){var o=Ve;Ve|=1;try{return n(r)}finally{Ve=o,Ve===0&&(Yi=qe()+500,Dl&&Xr())}}function Xs(n){ts!==null&&ts.tag===0&&(Ve&6)===0&&Ji();var r=Ve;Ve|=1;var o=gn.transition,c=Ne;try{if(gn.transition=null,Ne=1,n)return n()}finally{Ne=c,gn.transition=o,Ve=r,(Ve&6)===0&&Xr()}}function Sh(){un=Xi.current,Ge(Xi)}function Ys(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,Sv(o)),ht!==null)for(o=ht.return;o!==null;){var c=o;switch(bc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Nl();break;case 3:Gi(),Ge(Wt),Ge(Dt),Wc();break;case 5:Hc(c);break;case 4:Gi();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:Uc(c.type._context);break;case 22:case 23:Sh()}o=o.return}if(wt=n,ht=n=ss(n.current,null),kt=un=r,gt=0,ya=null,yh=Zl=Qs=0,Qt=_a=null,Ws!==null){for(r=0;r<Ws.length;r++)if(o=Ws[r],c=o.interleaved,c!==null){o.interleaved=null;var d=c.next,f=o.pending;if(f!==null){var E=f.next;f.next=d,c.next=E}o.pending=c}Ws=null}return n}function tm(n,r){do{var o=ht;try{if(Fc(),Bl.current=Wl,$l){for(var c=Ye.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}$l=!1}if(Ks=0,Et=mt=Ye=null,ha=!1,da=0,gh.current=null,o===null||o.return===null){gt=1,ya=r,ht=null;break}e:{var f=n,E=o.return,C=o,x=r;if(r=kt,C.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var U=x,K=C,X=K.tag;if((K.mode&1)===0&&(X===0||X===11||X===15)){var W=K.alternate;W?(K.updateQueue=W.updateQueue,K.memoizedState=W.memoizedState,K.lanes=W.lanes):(K.updateQueue=null,K.memoizedState=null)}var te=Ap(E);if(te!==null){te.flags&=-257,kp(te,E,C,f,r),te.mode&1&&Cp(f,U,r),r=te,x=U;var ae=r.updateQueue;if(ae===null){var le=new Set;le.add(x),r.updateQueue=le}else ae.add(x);break e}else{if((r&1)===0){Cp(f,U,r),Ch();break e}x=Error(t(426))}}else if(Qe&&C.mode&1){var it=Ap(E);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),kp(it,E,C,f,r),Lc(Ki(x,C));break e}}f=x=Ki(x,C),gt!==4&&(gt=2),_a===null?_a=[f]:_a.push(f),f=E;do{switch(f.tag){case 3:f.flags|=65536,r&=-r,f.lanes|=r;var L=Ip(f,x,r);Xf(f,L);break e;case 1:C=x;var b=f.type,F=f.stateNode;if((f.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(es===null||!es.has(F)))){f.flags|=65536,r&=-r,f.lanes|=r;var Y=Sp(f,C,r);Xf(f,Y);break e}}f=f.return}while(f!==null)}sm(o)}catch(ue){r=ue,ht===o&&o!==null&&(ht=o=o.return);continue}break}while(!0)}function nm(){var n=Jl.current;return Jl.current=Wl,n===null?Wl:n}function Ch(){(gt===0||gt===3||gt===2)&&(gt=4),wt===null||(Qs&268435455)===0&&(Zl&268435455)===0||rs(wt,kt)}function iu(n,r){var o=Ve;Ve|=2;var c=nm();(wt!==n||kt!==r)&&(Tr=null,Ys(n,r));do try{Qv();break}catch(d){tm(n,d)}while(!0);if(Fc(),Ve=o,Jl.current=c,ht!==null)throw Error(t(261));return wt=null,kt=0,gt}function Qv(){for(;ht!==null;)rm(ht)}function Xv(){for(;ht!==null&&!xs();)rm(ht)}function rm(n){var r=am(n.alternate,n,un);n.memoizedProps=n.pendingProps,r===null?sm(n):ht=r,gh.current=null}function sm(n){var r=n;do{var o=r.alternate;if(n=r.return,(r.flags&32768)===0){if(o=Bv(o,r,un),o!==null){ht=o;return}}else{if(o=$v(o,r),o!==null){o.flags&=32767,ht=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{gt=6,ht=null;return}}if(r=r.sibling,r!==null){ht=r;return}ht=r=n}while(r!==null);gt===0&&(gt=5)}function Js(n,r,o){var c=Ne,d=gn.transition;try{gn.transition=null,Ne=1,Yv(n,r,o,c)}finally{gn.transition=d,Ne=c}return null}function Yv(n,r,o,c){do Ji();while(ts!==null);if((Ve&6)!==0)throw Error(t(327));o=n.finishedWork;var d=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=o.lanes|o.childLanes;if(hc(n,f),n===wt&&(ht=wt=null,kt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||tu||(tu=!0,lm(Ds,function(){return Ji(),null})),f=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||f){f=gn.transition,gn.transition=null;var E=Ne;Ne=1;var C=Ve;Ve|=4,gh.current=null,qv(n,o),Kp(o,n),yv(Cc),dr=!!Sc,Cc=Sc=null,n.current=o,Wv(o),lr(),Ve=C,Ne=E,gn.transition=f}else n.current=o;if(tu&&(tu=!1,ts=n,nu=d),f=n.pendingLanes,f===0&&(es=null),dl(o.stateNode),Xt(n,qe()),r!==null)for(c=n.onRecoverableError,o=0;o<r.length;o++)d=r[o],c(d.value,{componentStack:d.stack,digest:d.digest});if(eu)throw eu=!1,n=vh,vh=null,n;return(nu&1)!==0&&n.tag!==0&&Ji(),f=n.pendingLanes,(f&1)!==0?n===Eh?va++:(va=0,Eh=n):va=0,Xr(),null}function Ji(){if(ts!==null){var n=Mn(nu),r=gn.transition,o=Ne;try{if(gn.transition=null,Ne=16>n?16:n,ts===null)var c=!1;else{if(n=ts,ts=null,nu=0,(Ve&6)!==0)throw Error(t(331));var d=Ve;for(Ve|=4,oe=n.current;oe!==null;){var f=oe,E=f.child;if((oe.flags&16)!==0){var C=f.deletions;if(C!==null){for(var x=0;x<C.length;x++){var U=C[x];for(oe=U;oe!==null;){var K=oe;switch(K.tag){case 0:case 11:case 15:ga(8,K,f)}var X=K.child;if(X!==null)X.return=K,oe=X;else for(;oe!==null;){K=oe;var W=K.sibling,te=K.return;if($p(K),K===U){oe=null;break}if(W!==null){W.return=te,oe=W;break}oe=te}}}var ae=f.alternate;if(ae!==null){var le=ae.child;if(le!==null){ae.child=null;do{var it=le.sibling;le.sibling=null,le=it}while(le!==null)}}oe=f}}if((f.subtreeFlags&2064)!==0&&E!==null)E.return=f,oe=E;else e:for(;oe!==null;){if(f=oe,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:ga(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,oe=L;break e}oe=f.return}}var b=n.current;for(oe=b;oe!==null;){E=oe;var F=E.child;if((E.subtreeFlags&2064)!==0&&F!==null)F.return=E,oe=F;else e:for(E=b;oe!==null;){if(C=oe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Yl(9,C)}}catch(ue){tt(C,C.return,ue)}if(C===E){oe=null;break e}var Y=C.sibling;if(Y!==null){Y.return=C.return,oe=Y;break e}oe=C.return}}if(Ve=d,Xr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(bs,n)}catch{}c=!0}return c}finally{Ne=o,gn.transition=r}}return!1}function im(n,r,o){r=Ki(o,r),r=Ip(n,r,1),n=Jr(n,r,1),r=Bt(),n!==null&&(Ms(n,1,r),Xt(n,r))}function tt(n,r,o){if(n.tag===3)im(n,n,o);else for(;r!==null;){if(r.tag===3){im(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(es===null||!es.has(c))){n=Ki(o,n),n=Sp(r,n,1),r=Jr(r,n,1),n=Bt(),r!==null&&(Ms(r,1,n),Xt(r,n));break}}r=r.return}}function Jv(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),r=Bt(),n.pingedLanes|=n.suspendedLanes&o,wt===n&&(kt&o)===o&&(gt===4||gt===3&&(kt&130023424)===kt&&500>qe()-_h?Ys(n,0):yh|=o),Xt(n,r)}function om(n,r){r===0&&((n.mode&1)===0?r=1:(r=zr,zr<<=1,(zr&130023424)===0&&(zr=4194304)));var o=Bt();n=vr(n,r),n!==null&&(Ms(n,r,o),Xt(n,o))}function Zv(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),om(n,o)}function eE(n,r){var o=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),om(n,o)}var am;am=function(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps||Wt.current)Kt=!0;else{if((n.lanes&o)===0&&(r.flags&128)===0)return Kt=!1,jv(n,r,o);Kt=(n.flags&131072)!==0}else Kt=!1,Qe&&(r.flags&1048576)!==0&&zf(r,Ol,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Ql(n,r),n=r.pendingProps;var d=zi(r,Dt.current);Wi(r,o),d=Qc(null,r,c,n,d,o);var f=Xc();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(c)?(f=!0,xl(r)):f=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Bc(r),d.updater=Gl,r.stateNode=d,d._reactInternals=r,nh(r,c,n,o),r=oh(null,r,c,!0,f,o)):(r.tag=0,Qe&&f&&Dc(r),jt(null,r,d,o),r=r.child),r;case 16:c=r.elementType;e:{switch(Ql(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=nE(c),n=Cn(c,n),d){case 0:r=ih(null,r,c,n,o);break e;case 1:r=bp(null,r,c,n,o);break e;case 11:r=Rp(null,r,c,n,o);break e;case 14:r=Pp(null,r,c,Cn(c.type,n),o);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Cn(c,d),ih(n,r,c,d,o);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Cn(c,d),bp(n,r,c,d,o);case 3:e:{if(Op(r),n===null)throw Error(t(387));c=r.pendingProps,f=r.memoizedState,d=f.element,Qf(n,r),zl(r,c,null,o);var E=r.memoizedState;if(c=E.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){d=Ki(Error(t(423)),r),r=Vp(n,r,c,o,d);break e}else if(c!==d){d=Ki(Error(t(424)),r),r=Vp(n,r,c,o,d);break e}else for(ln=Gr(r.stateNode.containerInfo.firstChild),an=r,Qe=!0,Sn=null,o=Gf(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if($i(),c===d){r=wr(n,r,o);break e}jt(n,r,c,o)}r=r.child}return r;case 5:return Jf(r),n===null&&Vc(r),c=r.type,d=r.pendingProps,f=n!==null?n.memoizedProps:null,E=d.children,Ac(c,d)?E=null:f!==null&&Ac(c,f)&&(r.flags|=32),Dp(n,r),jt(n,r,E,o),r.child;case 6:return n===null&&Vc(r),null;case 13:return Lp(n,r,o);case 4:return $c(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Hi(r,null,c,o):jt(n,r,c,o),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Cn(c,d),Rp(n,r,c,d,o);case 7:return jt(n,r,r.pendingProps,o),r.child;case 8:return jt(n,r,r.pendingProps.children,o),r.child;case 12:return jt(n,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,f=r.memoizedProps,E=d.value,He(Ml,c._currentValue),c._currentValue=E,f!==null)if(In(f.value,E)){if(f.children===d.children&&!Wt.current){r=wr(n,r,o);break e}}else for(f=r.child,f!==null&&(f.return=r);f!==null;){var C=f.dependencies;if(C!==null){E=f.child;for(var x=C.firstContext;x!==null;){if(x.context===c){if(f.tag===1){x=Er(-1,o&-o),x.tag=2;var U=f.updateQueue;if(U!==null){U=U.shared;var K=U.pending;K===null?x.next=x:(x.next=K.next,K.next=x),U.pending=x}}f.lanes|=o,x=f.alternate,x!==null&&(x.lanes|=o),zc(f.return,o,r),C.lanes|=o;break}x=x.next}}else if(f.tag===10)E=f.type===r.type?null:f.child;else if(f.tag===18){if(E=f.return,E===null)throw Error(t(341));E.lanes|=o,C=E.alternate,C!==null&&(C.lanes|=o),zc(E,o,r),E=f.sibling}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}jt(n,r,d.children,o),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Wi(r,o),d=pn(d),c=c(d),r.flags|=1,jt(n,r,c,o),r.child;case 14:return c=r.type,d=Cn(c,r.pendingProps),d=Cn(c.type,d),Pp(n,r,c,d,o);case 15:return Np(n,r,r.type,r.pendingProps,o);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Cn(c,d),Ql(n,r),r.tag=1,Gt(c)?(n=!0,xl(r)):n=!1,Wi(r,o),wp(r,c,d),nh(r,c,d,o),oh(null,r,c,!0,n,o);case 19:return Fp(n,r,o);case 22:return xp(n,r,o)}throw Error(t(156,r.tag))};function lm(n,r){return Lo(n,r)}function tE(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(n,r,o,c){return new tE(n,r,o,c)}function Ah(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nE(n){if(typeof n=="function")return Ah(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===nt)return 14}return 2}function ss(n,r){var o=n.alternate;return o===null?(o=yn(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function ou(n,r,o,c,d,f){var E=2;if(c=n,typeof n=="function")Ah(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case R:return Zs(o.children,d,f,r);case S:E=8,d|=8;break;case I:return n=yn(12,o,r,d|2),n.elementType=I,n.lanes=f,n;case A:return n=yn(13,o,r,d),n.elementType=A,n.lanes=f,n;case Me:return n=yn(19,o,r,d),n.elementType=Me,n.lanes=f,n;case Ke:return au(o,d,f,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:E=10;break e;case N:E=9;break e;case O:E=11;break e;case nt:E=14;break e;case Nt:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=yn(E,o,r,d),r.elementType=n,r.type=c,r.lanes=f,r}function Zs(n,r,o,c){return n=yn(7,n,c,r),n.lanes=o,n}function au(n,r,o,c){return n=yn(22,n,c,r),n.elementType=Ke,n.lanes=o,n.stateNode={isHidden:!1},n}function kh(n,r,o){return n=yn(6,n,null,r),n.lanes=o,n}function Rh(n,r,o){return r=yn(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function rE(n,r,o,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jo(0),this.expirationTimes=jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ph(n,r,o,c,d,f,E,C,x){return n=new rE(n,r,o,C,x),r===1?(r=1,f===!0&&(r|=8)):r=0,f=yn(3,null,null,r),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bc(f),n}function sE(n,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:c==null?null:""+c,children:n,containerInfo:r,implementation:o}}function um(n){if(!n)return Qr;n=n._reactInternals;e:{if(wn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(Gt(o))return Mf(n,o,r)}return r}function cm(n,r,o,c,d,f,E,C,x){return n=Ph(o,c,!0,n,d,f,E,C,x),n.context=um(null),o=n.current,c=Bt(),d=ns(o),f=Er(c,d),f.callback=r??null,Jr(o,f,d),n.current.lanes=d,Ms(n,d,c),Xt(n,c),n}function lu(n,r,o,c){var d=r.current,f=Bt(),E=ns(d);return o=um(o),r.context===null?r.context=o:r.pendingContext=o,r=Er(f,E),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Jr(d,r,E),n!==null&&(Rn(n,d,E,f),Ul(n,d,E)),E}function uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Nh(n,r){hm(n,r),(n=n.alternate)&&hm(n,r)}function iE(){return null}var dm=typeof reportError=="function"?reportError:function(n){console.error(n)};function xh(n){this._internalRoot=n}cu.prototype.render=xh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));lu(n,r,null,null)},cu.prototype.unmount=xh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Xs(function(){lu(null,n,null,null)}),r[mr]=null}};function cu(n){this._internalRoot=n}cu.prototype.unstable_scheduleHydration=function(n){if(n){var r=qo();n={blockedOn:null,target:n,priority:r};for(var o=0;o<nn.length&&r!==0&&r<nn[o].priority;o++);nn.splice(o,0,n),o===0&&Si(n)}};function Dh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function hu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fm(){}function oE(n,r,o,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var U=uu(E);f.call(U)}}var E=cm(r,c,n,0,null,!1,!1,"",fm);return n._reactRootContainer=E,n[mr]=E.current,ra(n.nodeType===8?n.parentNode:n),Xs(),E}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var U=uu(x);C.call(U)}}var x=Ph(n,0,!1,null,null,!1,!1,"",fm);return n._reactRootContainer=x,n[mr]=x.current,ra(n.nodeType===8?n.parentNode:n),Xs(function(){lu(r,x,o,c)}),x}function du(n,r,o,c,d){var f=o._reactRootContainer;if(f){var E=f;if(typeof d=="function"){var C=d;d=function(){var x=uu(E);C.call(x)}}lu(r,E,n,d)}else E=oE(o,r,n,d,c);return uu(E)}$o=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ue(r.pendingLanes);o!==0&&(Bo(r,o|1),Xt(r,qe()),(Ve&6)===0&&(Yi=qe()+500,Xr()))}break;case 13:Xs(function(){var c=vr(n,1);if(c!==null){var d=Bt();Rn(c,n,1,d)}}),Nh(n,1)}},Ti=function(n){if(n.tag===13){var r=vr(n,134217728);if(r!==null){var o=Bt();Rn(r,n,134217728,o)}Nh(n,134217728)}},Ho=function(n){if(n.tag===13){var r=ns(n),o=vr(n,r);if(o!==null){var c=Bt();Rn(o,n,r,c)}Nh(n,r)}},qo=function(){return Ne},Wo=function(n,r){var o=Ne;try{return Ne=n,r()}finally{Ne=o}},ir=function(n,r,o){switch(r){case"input":if(ks(n,o),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var d=Pl(c);if(!d)throw Error(t(90));ko(c),ks(c,d)}}}break;case"textarea":el(n,o);break;case"select":r=o.value,r!=null&&vn(n,!!o.multiple,r,!1)}},rl=Ih,sl=Xs;var aE={usingClientEntryPoint:!1,Events:[oa,Fi,Pl,Lr,Mr,Ih]},Ea={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||iE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{bs=fu.inject(lE),en=fu}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE,Yt.createPortal=function(n,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dh(r))throw Error(t(200));return sE(n,r,null,o)},Yt.createRoot=function(n,r){if(!Dh(n))throw Error(t(299));var o=!1,c="",d=dm;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Ph(n,1,!1,null,null,o,!1,c,d),n[mr]=r.current,ra(n.nodeType===8?n.parentNode:n),new xh(r)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=hl(r),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return Xs(n)},Yt.hydrate=function(n,r,o){if(!hu(r))throw Error(t(200));return du(null,n,r,!0,o)},Yt.hydrateRoot=function(n,r,o){if(!Dh(n))throw Error(t(405));var c=o!=null&&o.hydratedSources||null,d=!1,f="",E=dm;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),r=cm(r,null,n,1,o??null,d,!1,f,E),n[mr]=r.current,ra(n),c)for(n=0;n<c.length;n++)o=c[n],d=o._getVersion,d=d(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,d]:r.mutableSourceEagerHydrationData.push(o,d);return new cu(r)},Yt.render=function(n,r,o){if(!hu(r))throw Error(t(200));return du(null,n,r,!1,o)},Yt.unmountComponentAtNode=function(n){if(!hu(n))throw Error(t(40));return n._reactRootContainer?(Xs(function(){du(null,null,n,!1,function(){n._reactRootContainer=null,n[mr]=null})}),!0):!1},Yt.unstable_batchedUpdates=Ih,Yt.unstable_renderSubtreeIntoContainer=function(n,r,o,c){if(!hu(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return du(n,r,o,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var vm;function pE(){if(vm)return Oh.exports;vm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Oh.exports=fE(),Oh.exports}var Em;function mE(){if(Em)return pu;Em=1;var s=pE();return pu.createRoot=s.createRoot,pu.hydrateRoot=s.hydrateRoot,pu}var gE=mE();const yE=Jg(gE),_E=()=>{};var wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},vE=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const u=s[t++];e[i++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=s[t++],h=s[t++],m=s[t++],g=((a&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(u&63)<<6|h&63)}}return e.join("")},ty={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const u=s[a],h=a+1<s.length,m=h?s[a+1]:0,g=a+2<s.length,v=g?s[a+2]:0,T=u>>2,k=(u&3)<<4|m>>4;let D=(m&15)<<2|v>>6,z=v&63;g||(z=64,h||(D=64)),i.push(t[T],t[k],t[D],t[z])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(ey(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):vE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const u=t[s.charAt(a++)],m=a<s.length?t[s.charAt(a)]:0;++a;const v=a<s.length?t[s.charAt(a)]:64;++a;const k=a<s.length?t[s.charAt(a)]:64;if(++a,u==null||m==null||v==null||k==null)throw new EE;const D=u<<2|m>>4;if(i.push(D),v!==64){const z=m<<4&240|v>>2;if(i.push(z),k!==64){const $=v<<6&192|k;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class EE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wE=function(s){const e=ey(s);return ty.encodeByteArray(e,!0)},Du=function(s){return wE(s).replace(/\./g,"")},ny=function(s){try{return ty.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=()=>TE().__FIREBASE_DEFAULTS__,SE=()=>{if(typeof process>"u"||typeof wm>"u")return;const s=wm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},CE=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&ny(s[1]);return e&&JSON.parse(e)},Ku=()=>{try{return _E()||IE()||SE()||CE()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},ry=s=>Ku()?.emulatorHosts?.[s],AE=s=>{const e=ry(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},sy=()=>Ku()?.config,iy=s=>Ku()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oy(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Du(JSON.stringify(t)),Du(JSON.stringify(h)),""].join(".")}const Ra={};function PE(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ra))Ra[e]?s.emulator.push(e):s.prod.push(e);return s}function NE(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Tm=!1;function ay(s,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||Ra[s]===e||Ra[s]||Tm)return;Ra[s]=e;function t(D){return`__firebase__banner__${D}`}const i="__firebase__banner",u=PE().prod.length>0;function h(){const D=document.getElementById(i);D&&D.remove()}function m(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function g(D,z){D.setAttribute("width","24"),D.setAttribute("id",z),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{Tm=!0,h()},D}function T(D,z){D.setAttribute("id",z),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function k(){const D=NE(i),z=t("text"),$=document.getElementById(z)||document.createElement("span"),G=t("learnmore"),B=document.getElementById(G)||document.createElement("a"),ne=t("preprendIcon"),re=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const pe=D.element;m(pe),T(B,G);const Ee=v();g(re,ne),pe.append(re,$,B,Ee),document.body.appendChild(pe)}u?($.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function DE(){const s=Ku()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OE(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function VE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LE(){const s=Ut();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function ME(){return!DE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FE(){try{return typeof indexedDB=="object"}catch{return!1}}function UE(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="FirebaseError";class Pr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=zE,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],h=u?jE(u,i):"Error",m=`${this.serviceName}: ${h} (${a}).`;return new Pr(a,m,i)}}function jE(s,e){return s.replace(BE,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const BE=/\{\$([^}]+)}/g;function $E(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function si(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const u=s[a],h=e[a];if(Im(u)&&Im(h)){if(!si(u,h))return!1}else if(u!==h)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function Im(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ta(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,u]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(u)}}),e}function Ia(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function HE(s,e){const t=new qE(s,e);return t.subscribe.bind(t)}class qE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");WE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Mh),a.error===void 0&&(a.error=Mh),a.complete===void 0&&(a.complete=Mh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WE(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(s){return s&&s._delegate?s._delegate:s}class ii{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new kE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QE(e))try{this.getOrInitializeService({instanceIdentifier:ei})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});i.resolve(u)}catch{}}}}clearInstance(e=ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ei){return this.instances.has(e)}getOptions(e=ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&h.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const u=this.instances.get(i);return u&&e(u,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ei){return this.component?this.component.multipleInstances?e:ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KE(s){return s===ei?void 0:s}function QE(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const YE={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},JE=Pe.INFO,ZE={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},ew=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=ZE[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cd{constructor(e){this.name=e,this._logLevel=JE,this._logHandler=ew,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const tw=(s,e)=>e.some(t=>s instanceof t);let Sm,Cm;function nw(){return Sm||(Sm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rw(){return Cm||(Cm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ly=new WeakMap,Yh=new WeakMap,uy=new WeakMap,Fh=new WeakMap,Ad=new WeakMap;function sw(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(fs(s.result)),a()},h=()=>{i(s.error),a()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&ly.set(t,s)}).catch(()=>{}),Ad.set(e,s),e}function iw(s){if(Yh.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),a()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Yh.set(s,e)}let Jh={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Yh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||uy.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function ow(s){Jh=s(Jh)}function aw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Uh(this),e,...t);return uy.set(i,e.sort?e.sort():[e]),fs(i)}:rw().includes(s)?function(...e){return s.apply(Uh(this),e),fs(ly.get(this))}:function(...e){return fs(s.apply(Uh(this),e))}}function lw(s){return typeof s=="function"?aw(s):(s instanceof IDBTransaction&&iw(s),tw(s,nw())?new Proxy(s,Jh):s)}function fs(s){if(s instanceof IDBRequest)return sw(s);if(Fh.has(s))return Fh.get(s);const e=lw(s);return e!==s&&(Fh.set(s,e),Ad.set(e,s)),e}const Uh=s=>Ad.get(s);function uw(s,e,{blocked:t,upgrade:i,blocking:a,terminated:u}={}){const h=indexedDB.open(s,e),m=fs(h);return i&&h.addEventListener("upgradeneeded",g=>{i(fs(h.result),g.oldVersion,g.newVersion,fs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const cw=["get","getKey","getAll","getAllKeys","count"],hw=["put","add","delete","clear"],zh=new Map;function Am(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=hw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||cw.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,a?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),a&&g.done]))[0]};return zh.set(e,u),u}ow(s=>({...s,get:(e,t,i)=>Am(e,t)||s.get(e,t,i),has:(e,t)=>!!Am(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function fw(s){return s.getComponent()?.type==="VERSION"}const Zh="@firebase/app",km="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Cd("@firebase/app"),pw="@firebase/app-compat",mw="@firebase/analytics-compat",gw="@firebase/analytics",yw="@firebase/app-check-compat",_w="@firebase/app-check",vw="@firebase/auth",Ew="@firebase/auth-compat",ww="@firebase/database",Tw="@firebase/data-connect",Iw="@firebase/database-compat",Sw="@firebase/functions",Cw="@firebase/functions-compat",Aw="@firebase/installations",kw="@firebase/installations-compat",Rw="@firebase/messaging",Pw="@firebase/messaging-compat",Nw="@firebase/performance",xw="@firebase/performance-compat",Dw="@firebase/remote-config",bw="@firebase/remote-config-compat",Ow="@firebase/storage",Vw="@firebase/storage-compat",Lw="@firebase/firestore",Mw="@firebase/ai",Fw="@firebase/firestore-compat",Uw="firebase",zw="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",jw={[Zh]:"fire-core",[pw]:"fire-core-compat",[gw]:"fire-analytics",[mw]:"fire-analytics-compat",[_w]:"fire-app-check",[yw]:"fire-app-check-compat",[vw]:"fire-auth",[Ew]:"fire-auth-compat",[ww]:"fire-rtdb",[Tw]:"fire-data-connect",[Iw]:"fire-rtdb-compat",[Sw]:"fire-fn",[Cw]:"fire-fn-compat",[Aw]:"fire-iid",[kw]:"fire-iid-compat",[Rw]:"fire-fcm",[Pw]:"fire-fcm-compat",[Nw]:"fire-perf",[xw]:"fire-perf-compat",[Dw]:"fire-rc",[bw]:"fire-rc-compat",[Ow]:"fire-gcs",[Vw]:"fire-gcs-compat",[Lw]:"fire-fst",[Fw]:"fire-fst-compat",[Mw]:"fire-vertex","fire-js":"fire-js",[Uw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,Bw=new Map,td=new Map;function Rm(s,e){try{s.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ho(s){const e=s.name;if(td.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,s);for(const t of bu.values())Rm(t,s);for(const t of Bw.values())Rm(t,s);return!0}function kd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function _n(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new Ba("app","Firebase",$w);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=zw;function cy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:ed,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ps.create("bad-app-name",{appName:String(a)});if(t||(t=sy()),!t)throw ps.create("no-options");const u=bu.get(a);if(u){if(si(t,u.options)&&si(i,u.config))return u;throw ps.create("duplicate-app",{appName:a})}const h=new XE(a);for(const g of td.values())h.addComponent(g);const m=new Hw(t,i,h);return bu.set(a,m),m}function hy(s=ed){const e=bu.get(s);if(!e&&s===ed&&sy())return cy();if(!e)throw ps.create("no-app",{appName:s});return e}function ms(s,e,t){let i=jw[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${i}" with version "${e}":`];a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(h.join(" "));return}ho(new ii(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebase-heartbeat-database",Ww=1,Oa="firebase-heartbeat-store";let jh=null;function dy(){return jh||(jh=uw(qw,Ww,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Oa)}catch(t){console.warn(t)}}}}).catch(s=>{throw ps.create("idb-open",{originalErrorMessage:s.message})})),jh}async function Gw(s){try{const t=(await dy()).transaction(Oa),i=await t.objectStore(Oa).get(fy(s));return await t.done,i}catch(e){if(e instanceof Pr)Ar.warn(e.message);else{const t=ps.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(t.message)}}}async function Pm(s,e){try{const i=(await dy()).transaction(Oa,"readwrite");await i.objectStore(Oa).put(e,fy(s)),await i.done}catch(t){if(t instanceof Pr)Ar.warn(t.message);else{const i=ps.create("idb-set",{originalErrorMessage:t?.message});Ar.warn(i.message)}}}function fy(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=1024,Qw=30;class Xw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jw(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Qw){const a=Zw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ar.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Nm(),{heartbeatsToSend:t,unsentEntries:i}=Yw(this._heartbeatsCache.heartbeats),a=Du(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ar.warn(e),""}}}function Nm(){return new Date().toISOString().substring(0,10)}function Yw(s,e=Kw){const t=[];let i=s.slice();for(const a of s){const u=t.find(h=>h.agent===a.agent);if(u){if(u.dates.push(a.date),xm(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),xm(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Jw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FE()?UE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Gw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Pm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Pm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xm(s){return Du(JSON.stringify({version:2,heartbeats:s})).length}function Zw(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(s){ho(new ii("platform-logger",e=>new dw(e),"PRIVATE")),ho(new ii("heartbeat",e=>new Xw(e),"PRIVATE")),ms(Zh,km,s),ms(Zh,km,"esm2020"),ms("fire-js","")}e0("");var t0="firebase",n0="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(t0,n0,"app");function py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r0=py,my=new Ba("auth","Firebase",py());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Cd("@firebase/auth");function s0(s,...e){Ou.logLevel<=Pe.WARN&&Ou.warn(`Auth (${To}): ${s}`,...e)}function Tu(s,...e){Ou.logLevel<=Pe.ERROR&&Ou.error(`Auth (${To}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(s,...e){throw Rd(s,...e)}function er(s,...e){return Rd(s,...e)}function gy(s,e,t){const i={...r0(),[e]:t};return new Ba("auth","Firebase",i).create(e,{appName:s.name})}function Cr(s){return gy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rd(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return my.create(s,...e)}function _e(s,e,...t){if(!s)throw Rd(e,...t)}function Ir(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Tu(e),new Error(e)}function kr(s,e){s||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(){return typeof self<"u"&&self.location?.href||""}function i0(){return Dm()==="http:"||Dm()==="https:"}function Dm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i0()||OE()||"connection"in navigator)?navigator.onLine:!0}function a0(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=xE()||VE()}get(){return o0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(s,e){kr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c0=new Ha(3e4,6e4);function Cs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function As(s,e,t,i,a={}){return _y(s,a,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const m=$a({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const v={method:e,headers:g,...u};return bE()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&wo(s.emulatorConfig.host)&&(v.credentials="include"),yy.fetch()(await vy(s,s.config.apiHost,t,m),v)})}async function _y(s,e,t){s._canInitEmulator=!1;const i={...l0,...e};try{const a=new d0(s),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw mu(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw mu(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw mu(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw mu(s,"user-disabled",h);const T=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw gy(s,T,v);Nn(s,T)}}catch(a){if(a instanceof Pr)throw a;Nn(s,"network-request-failed",{message:String(a)})}}async function qa(s,e,t,i,a={}){const u=await As(s,e,t,i,a);return"mfaPendingCredential"in u&&Nn(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function vy(s,e,t,i){const a=`${e}${t}?${i}`,u=s,h=u.config.emulator?Pd(s.config,a):`${s.config.apiScheme}://${a}`;return u0.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function h0(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(er(this.auth,"network-request-failed")),c0.get())})}}function mu(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=er(s,e,i);return a.customData._tokenResponse=t,a}function bm(s){return s!==void 0&&s.enterprise!==void 0}class f0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return h0(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function p0(s,e){return As(s,"GET","/v2/recaptchaConfig",Cs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(s,e){return As(s,"POST","/v1/accounts:delete",e)}async function Vu(s,e){return As(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g0(s,e=!1){const t=Dn(s),i=await t.getIdToken(e),a=Nd(i);_e(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,h=u?.sign_in_provider;return{claims:a,token:i,authTime:Pa(Bh(a.auth_time)),issuedAtTime:Pa(Bh(a.iat)),expirationTime:Pa(Bh(a.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Bh(s){return Number(s)*1e3}function Nd(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const a=ny(t);return a?JSON.parse(a):(Tu("Failed to decode base64 JWT payload"),null)}catch(a){return Tu("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Om(s){const e=Nd(s);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Pr&&y0(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function y0({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(s){const e=s.auth,t=await s.getIdToken(),i=await Va(s,Vu(e,{idToken:t}));_e(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const u=a.providerUserInfo?.length?Ey(a.providerUserInfo):[],h=E0(s.providerData,u),m=s.isAnonymous,g=!(s.email&&a.passwordHash)&&!h?.length,v=m?g:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new rd(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(s,T)}async function v0(s){const e=Dn(s);await Lu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E0(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Ey(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(s,e){const t=await _y(s,{},async()=>{const i=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=s.config,h=await vy(s,a,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return s.emulatorConfig&&wo(s.emulatorConfig.host)&&(g.credentials="include"),yy.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T0(s,e){return As(s,"POST","/v2/accounts:revokeToken",Cs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Om(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=Om(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:u}=await w0(e,t);this.updateTokensAndExpiration(i,a,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:u}=t,h=new so;return i&&(_e(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),a&&(_e(typeof a=="string","internal-error",{appName:e}),h.accessToken=a),u&&(_e(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(s,e){_e(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Pn{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new _0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new rd(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Va(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return g0(this,e)}reload(){return v0(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Lu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Va(this,m0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,v=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:k,emailVerified:D,isAnonymous:z,providerData:$,stsTokenManager:G}=t;_e(k&&G,e,"internal-error");const B=so.fromJSON(this.name,G);_e(typeof k=="string",e,"internal-error"),os(i,e.name),os(a,e.name),_e(typeof D=="boolean",e,"internal-error"),_e(typeof z=="boolean",e,"internal-error"),os(u,e.name),os(h,e.name),os(m,e.name),os(g,e.name),os(v,e.name),os(T,e.name);const ne=new Pn({uid:k,auth:e,email:a,emailVerified:D,displayName:i,isAnonymous:z,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:B,createdAt:v,lastLoginAt:T});return $&&Array.isArray($)&&(ne.providerData=$.map(re=>({...re}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,t,i=!1){const a=new so;a.updateFromServerResponse(t);const u=new Pn({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Lu(u),u}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];_e(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?Ey(a.providerUserInfo):[],h=!(a.email&&a.passwordHash)&&!u?.length,m=new so;m.updateFromIdToken(i);const g=new Pn({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new rd(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!u?.length};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=new Map;function Sr(s){kr(s instanceof Function,"Expected a class definition");let e=Vm.get(s);return e?(kr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Vm.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wy.type="NONE";const Lm=wy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(s,e,t){return`firebase:${s}:${e}:${t}`}class io{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:u}=this.auth;this.fullUserKey=Iu(this.userKey,a.apiKey,u),this.fullPersistenceKey=Iu("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vu(this.auth,{idToken:e}).catch(()=>{});return t?Pn._fromGetAccountInfoResponse(this.auth,t,e):null}return Pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new io(Sr(Lm),e,i);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=a[0]||Sr(Lm);const h=Iu(i,e.config.apiKey,e.name);let m=null;for(const v of t)try{const T=await v._get(h);if(T){let k;if(typeof T=="string"){const D=await Vu(e,{idToken:T}).catch(()=>{});if(!D)break;k=await Pn._fromGetAccountInfoResponse(e,D,T)}else k=Pn._fromJSON(e,T);v!==u&&(m=k),u=v;break}}catch{}const g=a.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new io(u,e,i):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(h)}catch{}})),new io(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ty(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ky(e))return"Blackberry";if(Ry(e))return"Webos";if(Iy(e))return"Safari";if((e.includes("chrome/")||Sy(e))&&!e.includes("edge/"))return"Chrome";if(Ay(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function Ty(s=Ut()){return/firefox\//i.test(s)}function Iy(s=Ut()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sy(s=Ut()){return/crios\//i.test(s)}function Cy(s=Ut()){return/iemobile/i.test(s)}function Ay(s=Ut()){return/android/i.test(s)}function ky(s=Ut()){return/blackberry/i.test(s)}function Ry(s=Ut()){return/webos/i.test(s)}function xd(s=Ut()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function I0(s=Ut()){return xd(s)&&!!window.navigator?.standalone}function S0(){return LE()&&document.documentMode===10}function Py(s=Ut()){return xd(s)||Ay(s)||Ry(s)||ky(s)||/windows phone/i.test(s)||Cy(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(s,e=[]){let t;switch(s){case"Browser":t=Mm(Ut());break;case"Worker":t=`${Mm(Ut())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A0(s,e={}){return As(s,"GET","/v2/passwordPolicy",Cs(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=6;class R0{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??k0,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fm(this),this.idTokenSubscription=new Fm(this),this.beforeStateQueue=new C0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=my,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await io.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vu(this,{idToken:e}),i=await Pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_n(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=a0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Cr(this));const t=e?Dn(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A0(this),t=new R0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await T0(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,a);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ny(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&s0(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ui(s){return Dn(s)}class Fm{constructor(e){this.auth=e,this.observer=null,this.addObserver=HE(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N0(s){Qu=s}function xy(s){return Qu.loadJS(s)}function x0(){return Qu.recaptchaEnterpriseScript}function D0(){return Qu.gapiScript}function b0(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class O0{constructor(){this.enterprise=new V0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class V0{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const L0="recaptcha-enterprise",Dy="NO_RECAPTCHA";class M0{constructor(e){this.type=L0,this.auth=ui(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{p0(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new f0(g);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,h(v.siteKey)}}).catch(g=>{m(g)})})}function a(u,h,m){const g=window.grecaptcha;bm(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(v=>{h(v)}).catch(()=>{h(Dy)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new O0().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(m=>{if(!t&&bm(window.grecaptcha))a(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=x0();g.length!==0&&(g+=m),xy(g).then(()=>{a(m,u,h)}).catch(v=>{h(v)})}}).catch(m=>{h(m)})})}}async function Um(s,e,t,i=!1,a=!1){const u=new M0(s);let h;if(a)h=Dy;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function sd(s,e,t,i,a){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Um(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Um(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(s,e){const t=kd(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(si(u,e??{}))return a;Nn(a,"already-initialized")}return t.initialize({options:e})}function U0(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Sr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function z0(s,e,t){const i=ui(s);_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,u=by(e),{host:h,port:m}=j0(e),g=m===null?"":`:${m}`,v={url:`${u}//${h}${g}/`},T=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){_e(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_e(si(v,i.config.emulator)&&si(T,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=T,i.settings.appVerificationDisabledForTesting=!0,wo(h)?(oy(`${u}//${h}${g}`),ay("Auth",!0)):B0()}function by(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function j0(s){const e=by(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const u=a[1];return{host:u,port:zm(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:zm(h)}}}function zm(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function B0(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,t){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function $0(s,e){return As(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0(s,e){return qa(s,"POST","/v1/accounts:signInWithPassword",Cs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0(s,e){return qa(s,"POST","/v1/accounts:signInWithEmailLink",Cs(s,e))}async function W0(s,e){return qa(s,"POST","/v1/accounts:signInWithEmailLink",Cs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Dd{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new La(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new La(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sd(e,t,"signInWithPassword",H0);case"emailLink":return q0(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sd(e,i,"signUpPassword",$0);case"emailLink":return W0(e,{idToken:t,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(s,e){return qa(s,"POST","/v1/accounts:signInWithIdp",Cs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="http://localhost";class oi extends Dd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...u}=t;if(!i||!a)return null;const h=new oi(i,a);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return oo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oo(e,t)}buildRequest(){const e={requestUri:G0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$a(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q0(s){const e=Ta(Ia(s)).link,t=e?Ta(Ia(e)).deep_link_id:null,i=Ta(Ia(s)).deep_link_id;return(i?Ta(Ia(i)).link:null)||i||t||e||s}class bd{constructor(e){const t=Ta(Ia(e)),i=t.apiKey??null,a=t.oobCode??null,u=K0(t.mode??null);_e(i&&a&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Q0(e);try{return new bd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,t){return La._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=bd.parseLink(t);return _e(i,"argument-error"),La._fromEmailAndCode(e,i.code,i.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Oy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Wa{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ls.credential(t,i)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Wa{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Wa{constructor(){super("twitter.com")}static credential(e,t){return oi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X0(s,e){return qa(s,"POST","/v1/accounts:signUp",Cs(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const u=await Pn._fromIdTokenResponse(e,i,a),h=jm(i);return new ai({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=jm(i);return new ai({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function jm(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends Pr{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Mu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Mu(e,t,i,a)}}function Vy(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mu._fromErrorAndOperation(s,u,e,i):u})}async function Y0(s,e,t=!1){const i=await Va(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return ai._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(s,e,t=!1){const{auth:i}=s;if(_n(i.app))return Promise.reject(Cr(i));const a="reauthenticate";try{const u=await Va(s,Vy(i,a,e,s),t);_e(u.idToken,i,"internal-error");const h=Nd(u.idToken);_e(h,i,"internal-error");const{sub:m}=h;return _e(s.uid===m,i,"user-mismatch"),ai._forOperation(s,a,u)}catch(u){throw u?.code==="auth/user-not-found"&&Nn(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ly(s,e,t=!1){if(_n(s.app))return Promise.reject(Cr(s));const i="signIn",a=await Vy(s,i,e),u=await ai._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(u.user),u}async function Z0(s,e){return Ly(ui(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function My(s){const e=ui(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eT(s,e,t){if(_n(s.app))return Promise.reject(Cr(s));const i=ui(s),h=await sd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X0).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&My(s),g}),m=await ai._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function tT(s,e,t){return _n(s.app)?Promise.reject(Cr(s)):Z0(Dn(s),Io.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&My(s),i})}function nT(s,e,t,i){return Dn(s).onIdTokenChanged(e,t,i)}function rT(s,e,t){return Dn(s).beforeAuthStateChanged(e,t)}function sT(s,e,t,i){return Dn(s).onAuthStateChanged(e,t,i)}function iT(s){return Dn(s).signOut()}const Fu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fu,"1"),this.storage.removeItem(Fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=1e3,aT=10;class Uy extends Fy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Py(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);S0()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,aT):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},oT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uy.type="LOCAL";const lT=Uy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends Fy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zy.type="SESSION";const jy=zy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Xu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:u}=t.data,h=this.handlersMap[a];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const m=Array.from(h).map(async v=>v(t.origin,u)),g=await uT(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const v=Od("",20);a.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:a,onMessage(k){const D=k;if(D.data.eventId===v)switch(D.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(D.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),a.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function hT(s){tr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function dT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fT(){return navigator?.serviceWorker?.controller||null}function pT(){return By()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="firebaseLocalStorageDb",mT=1,Uu="firebaseLocalStorage",Hy="fbase_key";class Ga{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yu(s,e){return s.transaction([Uu],e?"readwrite":"readonly").objectStore(Uu)}function gT(){const s=indexedDB.deleteDatabase($y);return new Ga(s).toPromise()}function id(){const s=indexedDB.open($y,mT);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Uu,{keyPath:Hy})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Uu)?e(i):(i.close(),await gT(),e(await id()))})})}async function Bm(s,e,t){const i=Yu(s,!0).put({[Hy]:e,value:t});return new Ga(i).toPromise()}async function yT(s,e){const t=Yu(s,!1).get(e),i=await new Ga(t).toPromise();return i===void 0?null:i.value}function $m(s,e){const t=Yu(s,!0).delete(e);return new Ga(t).toPromise()}const _T=800,vT=3;class qy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await id(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>vT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return By()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xu._getInstance(pT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dT(),!this.activeServiceWorker)return;this.sender=new cT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await id();return await Bm(e,Fu,"1"),await $m(e,Fu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Bm(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>yT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$m(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=Yu(a,!1).getAll();return new Ga(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_T)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qy.type="LOCAL";const ET=qy;new Ha(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(s,e){return e?Sr(e):(_e(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Dd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TT(s){return Ly(s.auth,new Vd(s),s.bypassAuthState)}function IT(s){const{auth:e,user:t}=s;return _e(t,e,"internal-error"),J0(t,new Vd(s),s.bypassAuthState)}async function ST(s){const{auth:e,user:t}=s;return _e(t,e,"internal-error"),Y0(t,new Vd(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t,i,a,u=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TT;case"linkViaPopup":case"linkViaRedirect":return ST;case"reauthViaPopup":case"reauthViaRedirect":return IT;default:Nn(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Ha(2e3,1e4);class ro extends Wy{constructor(e,t,i,a,u){super(e,t,a,u),this.provider=i,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=Od();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CT.get())};e()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="pendingRedirect",Su=new Map;class kT extends Wy{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Su.get(this.auth._key());if(!e){try{const i=await RT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Su.set(this.auth._key(),e)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RT(s,e){const t=xT(e),i=NT(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function PT(s,e){Su.set(s._key(),e)}function NT(s){return Sr(s._redirectPersistence)}function xT(s){return Iu(AT,s.config.apiKey,s.name)}async function DT(s,e,t=!1){if(_n(s.app))return Promise.reject(Cr(s));const i=ui(s),a=wT(i,e),h=await new kT(i,a,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=600*1e3;class OT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Gy(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(er(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hm(e))}saveEventToCache(e){this.cachedEventUids.add(Hm(e)),this.lastProcessedEventTime=Date.now()}}function Hm(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Gy({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function VT(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gy(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(s,e={}){return As(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FT=/^https?/;async function UT(s){if(s.config.emulator)return;const{authorizedDomains:e}=await LT(s);for(const t of e)try{if(zT(t))return}catch{}Nn(s,"unauthorized-domain")}function zT(s){const e=nd(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!FT.test(t))return!1;if(MT.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Ha(3e4,6e4);function qm(){const s=tr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function BT(s){return new Promise((e,t)=>{function i(){qm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qm(),t(er(s,"network-request-failed"))},timeout:jT.get()})}if(tr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(tr().gapi?.load)i();else{const a=b0("iframefcb");return tr()[a]=()=>{gapi.load?i():t(er(s,"network-request-failed"))},xy(`${D0()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Cu=null,e})}let Cu=null;function $T(s){return Cu=Cu||BT(s),Cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Ha(5e3,15e3),qT="__/auth/iframe",WT="emulator/auth/iframe",GT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QT(s){const e=s.config;_e(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Pd(e,WT):`https://${s.config.authDomain}/${qT}`,i={apiKey:e.apiKey,appName:s.name,v:To},a=KT.get(s.config.apiHost);a&&(i.eid=a);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${$a(i).slice(1)}`}async function XT(s){const e=await $T(s),t=tr().gapi;return _e(t,s,"internal-error"),e.open({where:document.body,url:QT(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GT,dontclear:!0},i=>new Promise(async(a,u)=>{await i.restyle({setHideOnLeave:!1});const h=er(s,"network-request-failed"),m=tr().setTimeout(()=>{u(h)},HT.get());function g(){tr().clearTimeout(m),a(i)}i.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JT=500,ZT=600,eI="_blank",tI="http://localhost";class Wm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nI(s,e,t,i=JT,a=ZT){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...YT,width:i.toString(),height:a.toString(),top:u,left:h},v=Ut().toLowerCase();t&&(m=Sy(v)?eI:t),Ty(v)&&(e=e||tI,g.scrollbars="yes");const T=Object.entries(g).reduce((D,[z,$])=>`${D}${z}=${$},`,"");if(I0(v)&&m!=="_self")return rI(e||"",m),new Wm(null);const k=window.open(e||"",m,T);_e(k,s,"popup-blocked");try{k.focus()}catch{}return new Wm(k)}function rI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="__/auth/handler",iI="emulator/auth/handler",oI=encodeURIComponent("fac");async function Gm(s,e,t,i,a,u){_e(s.config.authDomain,s,"auth-domain-config-required"),_e(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:To,eventId:a};if(e instanceof Oy){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",$E(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,k]of Object.entries({}))h[T]=k}if(e instanceof Wa){const T=e.getScopes().filter(k=>k!=="");T.length>0&&(h.scopes=T.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),v=g?`#${oI}=${encodeURIComponent(g)}`:"";return`${aI(s)}?${$a(m).slice(1)}${v}`}function aI({config:s}){return s.emulator?Pd(s,iI):`https://${s.authDomain}/${sI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="webStorageSupport";class lI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jy,this._completeRedirectFn=DT,this._overrideRedirectResult=PT}async _openPopup(e,t,i,a){kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Gm(e,t,i,nd(),a);return nI(e,u,Od())}async _openRedirect(e,t,i,a){await this._originValidation(e);const u=await Gm(e,t,i,nd(),a);return hT(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(kr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await XT(e),i=new OT(e);return t.register("authEvent",a=>(_e(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($h,{type:$h},a=>{const u=a?.[0]?.[$h];u!==void 0&&t(!!u),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Py()||Iy()||xd()}}const uI=lI;var Km="@firebase/auth",Qm="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dI(s){ho(new ii("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;_e(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ny(s)},v=new P0(i,a,u,g);return U0(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ho(new ii("auth-internal",e=>{const t=ui(e.getProvider("auth").getImmediate());return(i=>new cI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(Km,Qm,hI(s)),ms(Km,Qm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=300,pI=iy("authIdTokenMaxAge")||fI;let Xm=null;const mI=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>pI)return;const a=t?.token;Xm!==a&&(Xm=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function gI(s=hy()){const e=kd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=F0(s,{popupRedirectResolver:uI,persistence:[ET,lT,jy]}),i=iy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=mI(u.toString());rT(t,h,()=>h(t.currentUser)),nT(t,m=>h(m))}}const a=ry("auth");return a&&z0(t,`http://${a}`),t}function yI(){return document.getElementsByTagName("head")?.[0]??document}N0({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const u=er("internal-error");u.customData=a,t(u)},i.type="text/javascript",i.charset="UTF-8",yI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dI("Browser");var Ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,Ky;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function I(){}I.prototype=S.prototype,R.F=S.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(P,N,O){for(var A=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)A[Me-2]=arguments[Me];return S.prototype[N].apply(P,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,I){I||(I=0);const P=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)P[N]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(N=0;N<16;++N)P[N]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=R.g[0],I=R.g[1],N=R.g[2];let O=R.g[3],A;A=S+(O^I&(N^O))+P[0]+3614090360&4294967295,S=I+(A<<7&4294967295|A>>>25),A=O+(N^S&(I^N))+P[1]+3905402710&4294967295,O=S+(A<<12&4294967295|A>>>20),A=N+(I^O&(S^I))+P[2]+606105819&4294967295,N=O+(A<<17&4294967295|A>>>15),A=I+(S^N&(O^S))+P[3]+3250441966&4294967295,I=N+(A<<22&4294967295|A>>>10),A=S+(O^I&(N^O))+P[4]+4118548399&4294967295,S=I+(A<<7&4294967295|A>>>25),A=O+(N^S&(I^N))+P[5]+1200080426&4294967295,O=S+(A<<12&4294967295|A>>>20),A=N+(I^O&(S^I))+P[6]+2821735955&4294967295,N=O+(A<<17&4294967295|A>>>15),A=I+(S^N&(O^S))+P[7]+4249261313&4294967295,I=N+(A<<22&4294967295|A>>>10),A=S+(O^I&(N^O))+P[8]+1770035416&4294967295,S=I+(A<<7&4294967295|A>>>25),A=O+(N^S&(I^N))+P[9]+2336552879&4294967295,O=S+(A<<12&4294967295|A>>>20),A=N+(I^O&(S^I))+P[10]+4294925233&4294967295,N=O+(A<<17&4294967295|A>>>15),A=I+(S^N&(O^S))+P[11]+2304563134&4294967295,I=N+(A<<22&4294967295|A>>>10),A=S+(O^I&(N^O))+P[12]+1804603682&4294967295,S=I+(A<<7&4294967295|A>>>25),A=O+(N^S&(I^N))+P[13]+4254626195&4294967295,O=S+(A<<12&4294967295|A>>>20),A=N+(I^O&(S^I))+P[14]+2792965006&4294967295,N=O+(A<<17&4294967295|A>>>15),A=I+(S^N&(O^S))+P[15]+1236535329&4294967295,I=N+(A<<22&4294967295|A>>>10),A=S+(N^O&(I^N))+P[1]+4129170786&4294967295,S=I+(A<<5&4294967295|A>>>27),A=O+(I^N&(S^I))+P[6]+3225465664&4294967295,O=S+(A<<9&4294967295|A>>>23),A=N+(S^I&(O^S))+P[11]+643717713&4294967295,N=O+(A<<14&4294967295|A>>>18),A=I+(O^S&(N^O))+P[0]+3921069994&4294967295,I=N+(A<<20&4294967295|A>>>12),A=S+(N^O&(I^N))+P[5]+3593408605&4294967295,S=I+(A<<5&4294967295|A>>>27),A=O+(I^N&(S^I))+P[10]+38016083&4294967295,O=S+(A<<9&4294967295|A>>>23),A=N+(S^I&(O^S))+P[15]+3634488961&4294967295,N=O+(A<<14&4294967295|A>>>18),A=I+(O^S&(N^O))+P[4]+3889429448&4294967295,I=N+(A<<20&4294967295|A>>>12),A=S+(N^O&(I^N))+P[9]+568446438&4294967295,S=I+(A<<5&4294967295|A>>>27),A=O+(I^N&(S^I))+P[14]+3275163606&4294967295,O=S+(A<<9&4294967295|A>>>23),A=N+(S^I&(O^S))+P[3]+4107603335&4294967295,N=O+(A<<14&4294967295|A>>>18),A=I+(O^S&(N^O))+P[8]+1163531501&4294967295,I=N+(A<<20&4294967295|A>>>12),A=S+(N^O&(I^N))+P[13]+2850285829&4294967295,S=I+(A<<5&4294967295|A>>>27),A=O+(I^N&(S^I))+P[2]+4243563512&4294967295,O=S+(A<<9&4294967295|A>>>23),A=N+(S^I&(O^S))+P[7]+1735328473&4294967295,N=O+(A<<14&4294967295|A>>>18),A=I+(O^S&(N^O))+P[12]+2368359562&4294967295,I=N+(A<<20&4294967295|A>>>12),A=S+(I^N^O)+P[5]+4294588738&4294967295,S=I+(A<<4&4294967295|A>>>28),A=O+(S^I^N)+P[8]+2272392833&4294967295,O=S+(A<<11&4294967295|A>>>21),A=N+(O^S^I)+P[11]+1839030562&4294967295,N=O+(A<<16&4294967295|A>>>16),A=I+(N^O^S)+P[14]+4259657740&4294967295,I=N+(A<<23&4294967295|A>>>9),A=S+(I^N^O)+P[1]+2763975236&4294967295,S=I+(A<<4&4294967295|A>>>28),A=O+(S^I^N)+P[4]+1272893353&4294967295,O=S+(A<<11&4294967295|A>>>21),A=N+(O^S^I)+P[7]+4139469664&4294967295,N=O+(A<<16&4294967295|A>>>16),A=I+(N^O^S)+P[10]+3200236656&4294967295,I=N+(A<<23&4294967295|A>>>9),A=S+(I^N^O)+P[13]+681279174&4294967295,S=I+(A<<4&4294967295|A>>>28),A=O+(S^I^N)+P[0]+3936430074&4294967295,O=S+(A<<11&4294967295|A>>>21),A=N+(O^S^I)+P[3]+3572445317&4294967295,N=O+(A<<16&4294967295|A>>>16),A=I+(N^O^S)+P[6]+76029189&4294967295,I=N+(A<<23&4294967295|A>>>9),A=S+(I^N^O)+P[9]+3654602809&4294967295,S=I+(A<<4&4294967295|A>>>28),A=O+(S^I^N)+P[12]+3873151461&4294967295,O=S+(A<<11&4294967295|A>>>21),A=N+(O^S^I)+P[15]+530742520&4294967295,N=O+(A<<16&4294967295|A>>>16),A=I+(N^O^S)+P[2]+3299628645&4294967295,I=N+(A<<23&4294967295|A>>>9),A=S+(N^(I|~O))+P[0]+4096336452&4294967295,S=I+(A<<6&4294967295|A>>>26),A=O+(I^(S|~N))+P[7]+1126891415&4294967295,O=S+(A<<10&4294967295|A>>>22),A=N+(S^(O|~I))+P[14]+2878612391&4294967295,N=O+(A<<15&4294967295|A>>>17),A=I+(O^(N|~S))+P[5]+4237533241&4294967295,I=N+(A<<21&4294967295|A>>>11),A=S+(N^(I|~O))+P[12]+1700485571&4294967295,S=I+(A<<6&4294967295|A>>>26),A=O+(I^(S|~N))+P[3]+2399980690&4294967295,O=S+(A<<10&4294967295|A>>>22),A=N+(S^(O|~I))+P[10]+4293915773&4294967295,N=O+(A<<15&4294967295|A>>>17),A=I+(O^(N|~S))+P[1]+2240044497&4294967295,I=N+(A<<21&4294967295|A>>>11),A=S+(N^(I|~O))+P[8]+1873313359&4294967295,S=I+(A<<6&4294967295|A>>>26),A=O+(I^(S|~N))+P[15]+4264355552&4294967295,O=S+(A<<10&4294967295|A>>>22),A=N+(S^(O|~I))+P[6]+2734768916&4294967295,N=O+(A<<15&4294967295|A>>>17),A=I+(O^(N|~S))+P[13]+1309151649&4294967295,I=N+(A<<21&4294967295|A>>>11),A=S+(N^(I|~O))+P[4]+4149444226&4294967295,S=I+(A<<6&4294967295|A>>>26),A=O+(I^(S|~N))+P[11]+3174756917&4294967295,O=S+(A<<10&4294967295|A>>>22),A=N+(S^(O|~I))+P[2]+718787259&4294967295,N=O+(A<<15&4294967295|A>>>17),A=I+(O^(N|~S))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+O&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const I=S-this.blockSize,P=this.C;let N=this.h,O=0;for(;O<S;){if(N==0)for(;O<=I;)a(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<S;)if(P[N++]=R.charCodeAt(O++),N==this.blockSize){a(this,P),N=0;break}}else for(;O<S;)if(P[N++]=R[O++],N==this.blockSize){a(this,P),N=0;break}}this.h=N,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)R[S++]=this.g[I]>>>P&255;return R};function u(R,S){var I=m;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=S(R)}function h(R,S){this.h=S;const I=[];let P=!0;for(let N=R.length-1;N>=0;N--){const O=R[N]|0;P&&O==S||(I[N]=O,P=!1)}this.g=I}var m={};function g(R){return-128<=R&&R<128?u(R,function(S){return new h([S|0],S<0?-1:0)}):new h([R|0],R<0?-1:0)}function v(R){if(isNaN(R)||!isFinite(R))return k;if(R<0)return B(v(-R));const S=[];let I=1;for(let P=0;R>=I;P++)S[P]=R/I|0,I*=4294967296;return new h(S,0)}function T(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return B(T(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=v(Math.pow(S,8));let P=k;for(let O=0;O<R.length;O+=8){var N=Math.min(8,R.length-O);const A=parseInt(R.substring(O,O+N),S);N<8?(N=v(Math.pow(S,N)),P=P.j(N).add(v(A))):(P=P.j(I),P=P.add(v(A)))}return P}var k=g(0),D=g(1),z=g(16777216);s=h.prototype,s.m=function(){if(G(this))return-B(this).m();let R=0,S=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);R+=(P>=0?P:4294967296+P)*S,S*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(G(this))return"-"+B(this).toString(R);const S=v(Math.pow(R,6));var I=this;let P="";for(;;){const N=Ee(I,S).g;I=ne(I,N.j(S));let O=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=N,$(I))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function G(R){return R.h==-1}s.l=function(R){return R=ne(this,R),G(R)?-1:$(R)?0:1};function B(R){const S=R.g.length,I=[];for(let P=0;P<S;P++)I[P]=~R.g[P];return new h(I,~R.h).add(D)}s.abs=function(){return G(this)?B(this):this},s.add=function(R){const S=Math.max(this.g.length,R.g.length),I=[];let P=0;for(let N=0;N<=S;N++){let O=P+(this.i(N)&65535)+(R.i(N)&65535),A=(O>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);P=A>>>16,O&=65535,A&=65535,I[N]=A<<16|O}return new h(I,I[I.length-1]&-2147483648?-1:0)};function ne(R,S){return R.add(B(S))}s.j=function(R){if($(this)||$(R))return k;if(G(this))return G(R)?B(this).j(B(R)):B(B(this).j(R));if(G(R))return B(this.j(B(R)));if(this.l(z)<0&&R.l(z)<0)return v(this.m()*R.m());const S=this.g.length+R.g.length,I=[];for(var P=0;P<2*S;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<R.g.length;N++){const O=this.i(P)>>>16,A=this.i(P)&65535,Me=R.i(N)>>>16,nt=R.i(N)&65535;I[2*P+2*N]+=A*nt,re(I,2*P+2*N),I[2*P+2*N+1]+=O*nt,re(I,2*P+2*N+1),I[2*P+2*N+1]+=A*Me,re(I,2*P+2*N+1),I[2*P+2*N+2]+=O*Me,re(I,2*P+2*N+2)}for(R=0;R<S;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=S;R<2*S;R++)I[R]=0;return new h(I,0)};function re(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function pe(R,S){this.g=R,this.h=S}function Ee(R,S){if($(S))throw Error("division by zero");if($(R))return new pe(k,k);if(G(R))return S=Ee(B(R),S),new pe(B(S.g),B(S.h));if(G(S))return S=Ee(R,B(S)),new pe(B(S.g),S.h);if(R.g.length>30){if(G(R)||G(S))throw Error("slowDivide_ only works with positive integers.");for(var I=D,P=S;P.l(R)<=0;)I=ce(I),P=ce(P);var N=he(I,1),O=he(P,1);for(P=he(P,2),I=he(I,2);!$(P);){var A=O.add(P);A.l(R)<=0&&(N=N.add(I),O=A),P=he(P,1),I=he(I,1)}return S=ne(R,N.j(S)),new pe(N,S)}for(N=k;R.l(S)>=0;){for(I=Math.max(1,Math.floor(R.m()/S.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=v(I),A=O.j(S);G(A)||A.l(R)>0;)I-=P,O=v(I),A=O.j(S);$(O)&&(O=D),N=N.add(O),R=ne(R,A)}return new pe(N,R)}s.B=function(R){return Ee(this,R).h},s.and=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<S;P++)I[P]=this.i(P)&R.i(P);return new h(I,this.h&R.h)},s.or=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<S;P++)I[P]=this.i(P)|R.i(P);return new h(I,this.h|R.h)},s.xor=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<S;P++)I[P]=this.i(P)^R.i(P);return new h(I,this.h^R.h)};function ce(R){const S=R.g.length+1,I=[];for(let P=0;P<S;P++)I[P]=R.i(P)<<1|R.i(P-1)>>>31;return new h(I,R.h)}function he(R,S){const I=S>>5;S%=32;const P=R.g.length-I,N=[];for(let O=0;O<P;O++)N[O]=S>0?R.i(O+I)>>>S|R.i(O+I+1)<<32-S:R.i(O+I);return new h(N,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Ky=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=T,gs=h}).apply(typeof Ym<"u"?Ym:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qy,Sa,Xy,Au,od,Yy,Jy,Zy;(function(){var s,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function a(l,p){if(p)e:{var y=i;l=l.split(".");for(var w=0;w<l.length-1;w++){var M=l[w];if(!(M in y))break e;y=y[M]}l=l[l.length-1],w=y[l],p=p(w),p!=w&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}a("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(l){return l||function(p){var y=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&y.push([w,p[w]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function g(l,p,y){return l.call.apply(l.bind,arguments)}function v(l,p,y){return v=g,v.apply(null,arguments)}function T(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function k(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(w,M,j){for(var J=Array(arguments.length-2),we=2;we<arguments.length;we++)J[we-2]=arguments[we];return p.prototype[M].apply(w,J)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function z(l){const p=l.length;if(p>0){const y=Array(p);for(let w=0;w<p;w++)y[w]=l[w];return y}return[]}function $(l,p){for(let w=1;w<arguments.length;w++){const M=arguments[w];var y=typeof M;if(y=y!="object"?y:M?Array.isArray(M)?"array":y:"null",y=="array"||y=="object"&&typeof M.length=="number"){y=l.length||0;const j=M.length||0;l.length=y+j;for(let J=0;J<j;J++)l[y+J]=M[J]}else l.push(M)}}class G{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function B(l){h.setTimeout(()=>{throw l},0)}function ne(){var l=R;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class re{constructor(){this.h=this.g=null}add(p,y){const w=pe.get();w.set(p,y),this.h?this.h.next=w:this.g=w,this.h=w}}var pe=new G(()=>new Ee,l=>l.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,he=!1,R=new re,S=()=>{const l=Promise.resolve(void 0);ce=()=>{l.then(I)}};function I(){for(var l;l=ne();){try{l.h.call(l.g)}catch(y){B(y)}var p=pe;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}he=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};h.addEventListener("test",y,p),h.removeEventListener("test",y,p)}catch{}return l})();function A(l){return/^[\s\xa0]*$/.test(l)}function Me(l,p){N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}k(Me,N),Me.prototype.init=function(l,p){const y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),Nt=0;function Ke(l,p,y,w,M){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!w,this.ha=M,this.key=++Nt,this.da=this.fa=!1}function ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function fe(l,p,y){for(const w in l)p.call(y,l[w],w,l)}function se(l,p){for(const y in l)p.call(void 0,l[y],y,l)}function V(l){const p={};for(const y in l)p[y]=l[y];return p}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(l,p){let y,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(y in w)l[y]=w[y];for(let j=0;j<q.length;j++)y=q[j],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function Ce(l){this.src=l,this.g={},this.h=0}Ce.prototype.add=function(l,p,y,w,M){const j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);const J=Re(l,p,w,M);return J>-1?(p=l[J],y||(p.fa=!1)):(p=new Ke(p,this.src,j,!!w,M),p.fa=y,l.push(p)),p};function ke(l,p){const y=p.type;if(y in l.g){var w=l.g[y],M=Array.prototype.indexOf.call(w,p,void 0),j;(j=M>=0)&&Array.prototype.splice.call(w,M,1),j&&(ee(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Re(l,p,y,w){for(let M=0;M<l.length;++M){const j=l[M];if(!j.da&&j.listener==p&&j.capture==!!y&&j.ha==w)return M}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Oe={};function Be(l,p,y,w,M){if(Array.isArray(p)){for(let j=0;j<p.length;j++)Be(l,p[j],y,w,M);return null}return y=Ro(y),l&&l[nt]?l.J(p,y,m(w)?!!w.capture:!1,M):zt(l,p,y,!1,w,M)}function zt(l,p,y,w,M,j){if(!p)throw Error("Invalid event type");const J=m(M)?!!M.capture:!!M;let we=fi(l);if(we||(l[ze]=we=new Ce(l)),y=we.add(p,y,w,J,j),y.proxy)return y;if(w=hi(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)O||(M=J),M===void 0&&(M=!1),l.addEventListener(p.toString(),w,M);else if(l.attachEvent)l.attachEvent(di(p.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function hi(){function l(y){return p.call(l.src,l.listener,y)}const p=Za;return l}function ko(l,p,y,w,M){if(Array.isArray(p))for(var j=0;j<p.length;j++)ko(l,p[j],y,w,M);else w=m(w)?!!w.capture:!!w,y=Ro(y),l&&l[nt]?(l=l.i,j=String(p).toString(),j in l.g&&(p=l.g[j],y=Re(p,y,w,M),y>-1&&(ee(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[j],l.h--)))):l&&(l=fi(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Re(p,y,w,M)),(y=l>-1?p[l]:null)&&Nr(y))}function Nr(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[nt])ke(p.i,l);else{var y=l.type,w=l.proxy;p.removeEventListener?p.removeEventListener(y,w,l.capture):p.detachEvent?p.detachEvent(di(y),w):p.addListener&&p.removeListener&&p.removeListener(w),(y=fi(p))?(ke(y,l),y.h==0&&(y.src=null,p[ze]=null)):ee(l)}}}function di(l){return l in Oe?Oe[l]:Oe[l]="on"+l}function Za(l,p){if(l.da)l=!0;else{p=new Me(p,this);const y=l.listener,w=l.ha||l.src;l.fa&&Nr(l),l=y.call(w,p)}return l}function fi(l){return l=l[ze],l instanceof Ce?l:null}var ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ro(l){return typeof l=="function"?l:(l[ks]||(l[ks]=function(p){return l.handleEvent(p)}),l[ks])}function ut(){P.call(this),this.i=new Ce(this),this.M=this,this.G=null}k(ut,P),ut.prototype[nt]=!0,ut.prototype.removeEventListener=function(l,p,y,w){ko(this,l,p,y,w)};function rt(l,p){var y,w=l.G;if(w)for(y=[];w;w=w.G)y.push(w);if(l=l.M,w=p.type||p,typeof p=="string")p=new N(p,l);else if(p instanceof N)p.target=p.target||l;else{var M=p;p=new N(w,l),Se(p,M)}M=!0;let j,J;if(y)for(J=y.length-1;J>=0;J--)j=p.g=y[J],M=vn(j,w,!0,p)&&M;if(j=p.g=l,M=vn(j,w,!0,p)&&M,M=vn(j,w,!1,p)&&M,y)for(J=0;J<y.length;J++)j=p.g=y[J],M=vn(j,w,!1,p)&&M}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const y=l.g[p];for(let w=0;w<y.length;w++)ee(y[w]);delete l.g[p],l.h--}}this.G=null},ut.prototype.J=function(l,p,y,w){return this.i.add(String(l),p,!1,y,w)},ut.prototype.K=function(l,p,y,w){return this.i.add(String(l),p,!0,y,w)};function vn(l,p,y,w){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let j=0;j<p.length;++j){const J=p[j];if(J&&!J.da&&J.capture==y){const we=J.listener,st=J.ha||J.src;J.fa&&ke(l.i,J),M=we.call(st,w)!==!1&&M}}return M&&!w.defaultPrevented}function Po(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(l,p||0)}function No(l){l.g=Po(()=>{l.g=null,l.i&&(l.i=!1,No(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class el extends P{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:No(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(l){P.call(this),this.h=l,this.g={}}k(xr,P);var xo=[];function pi(l){fe(l.g,function(p,y){this.g.hasOwnProperty(y)&&Nr(p)},l),l.g={}}xr.prototype.N=function(){xr.Z.N.call(this),pi(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=h.JSON.stringify,tl=h.JSON.parse,Rs=class{stringify(l){return h.JSON.stringify(l,void 0)}parse(l){return h.JSON.parse(l,void 0)}};function br(){}function nl(){}var Or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mi(){N.call(this,"d")}k(mi,N);function Do(){N.call(this,"c")}k(Do,N);var En={},gi=null;function Vr(){return gi=gi||new ut}En.Ia="serverreachability";function yi(l){N.call(this,En.Ia,l)}k(yi,N);function ir(l){const p=Vr();rt(p,new yi(p))}En.STAT_EVENT="statevent";function or(l,p){N.call(this,En.STAT_EVENT,l),this.stat=p}k(or,N);function et(l){const p=Vr();rt(p,new or(p,l))}En.Ja="timingevent";function bo(l,p){N.call(this,En.Ja,l),this.size=p}k(bo,N);function Lr(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){l()},p)}function Mr(){this.g=!0}Mr.prototype.ua=function(){this.g=!1};function rl(l,p,y,w,M,j){l.info(function(){if(l.g)if(j){var J="",we=j.split("&");for(let je=0;je<we.length;je++){var st=we[je].split("=");if(st.length>1){const ct=st[0];st=st[1];const on=ct.split("_");J=on.length>=2&&on[1]=="type"?J+(ct+"="+st+"&"):J+(ct+"=redacted&")}}}else J=null;else J=j;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+p+`
`+y+`
`+J})}function sl(l,p,y,w,M,j,J){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+p+`
`+y+`
`+j+" "+J})}function bn(l,p,y,w){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ps(l,y)+(w?" "+w:"")})}function il(l,p){l.info(function(){return"TIMEOUT: "+p})}Mr.prototype.info=function(){};function Ps(l,p){if(!l.g)return p;if(!p)return null;try{const j=JSON.parse(p);if(j){for(l=0;l<j.length;l++)if(Array.isArray(j[l])){var y=j[l];if(!(y.length<2)){var w=y[1];if(Array.isArray(w)&&!(w.length<1)){var M=w[0];if(M!="noop"&&M!="stop"&&M!="close")for(let J=1;J<w.length;J++)w[J]=""}}}}return Dr(j)}catch{return p}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ur={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ol;function ar(){}k(ar,br),ar.prototype.g=function(){return new XMLHttpRequest},ol=new ar;function On(l){return encodeURIComponent(String(l))}function _i(l){var p=1;l=l.split(":");const y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function cn(l,p,y,w){this.j=l,this.i=p,this.l=y,this.S=w||1,this.V=new xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new al}function al(){this.i=null,this.g="",this.h=!1}var ll={},Oo={};function wn(l,p,y){l.M=1,l.A=ur(hn(p)),l.u=y,l.R=!0,Vo(l,null)}function Vo(l,p){l.F=Date.now(),Ns(l),l.B=hn(l.A);var y=l.B,w=l.S;Array.isArray(w)||(w=[String(w)]),qo(y.i,"t",w),l.C=0,y=l.j.L,l.h=new al,l.g=_l(l.j,y?p:null,!l.u),l.P>0&&(l.O=new el(v(l.Y,l,l.g),l.P)),p=l.V,y=l.g,w=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(xo[0]=M.toString()),M=xo);for(let j=0;j<M.length;j++){const J=Be(y,M[j],w||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=l.J?V(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),ir(),rl(l.i,l.v,l.B,l.l,l.S,l.u)}cn.prototype.ba=function(l){l=l.target;const p=this.O;p&&jn(l)==3?p.j():this.Y(l)},cn.prototype.Y=function(l){try{if(l==this.g)e:{const we=jn(this.g),st=this.g.ya(),je=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||gl(this.g)))){this.K||we!=4||st==7||(st==8||je<=0?ir(3):ir(2)),vi(this);var p=this.g.ca();this.X=p;var y=ul(this);if(this.o=p==200,sl(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,M=this.g;if((w=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(w)){var j=w;break t}}j=null}if(l=j)bn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,l);else{this.o=!1,this.m=3,et(12),lr(this),xs(this);break e}}if(this.R){l=!0;let ct;for(;!this.K&&this.C<y.length;)if(ct=hl(this,y),ct==Oo){we==4&&(this.m=4,et(14),l=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==ll){this.m=4,et(15),bn(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else bn(this.i,this.l,ct,null),qe(this,ct);if(cl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||y.length!=0||this.h.h||(this.m=1,et(16),l=!1),this.o=this.o&&l,!l)bn(this.i,this.l,y,"[Invalid Chunked Response]"),lr(this),xs(this);else if(y.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),zs(J),J.P=!0,et(11))}}else bn(this.i,this.l,y,null),qe(this,y);we==4&&lr(this),this.o&&!this.K&&(we==4?Pi(this.j,this):(this.o=!1,Ns(this)))}else Go(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),lr(this),xs(this)}}}catch{}finally{}};function ul(l){if(!cl(l))return l.g.la();const p=gl(l.g);if(p==="")return"";let y="";const w=p.length,M=jn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return lr(l),xs(l),"";l.h.i=new h.TextDecoder}for(let j=0;j<w;j++)l.h.h=!0,y+=l.h.i.decode(p[j],{stream:!(M&&j==w-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function cl(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function hl(l,p){var y=l.C,w=p.indexOf(`
`,y);return w==-1?Oo:(y=Number(p.substring(y,w)),isNaN(y)?ll:(w+=1,w+y>p.length?Oo:(p=p.slice(w,w+y),l.C=w+y,p)))}cn.prototype.cancel=function(){this.K=!0,lr(this)};function Ns(l){l.T=Date.now()+l.H,Lo(l,l.H)}function Lo(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Lr(v(l.aa,l),p)}function vi(l){l.D&&(h.clearTimeout(l.D),l.D=null)}cn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(il(this.i,this.B),this.M!=2&&(ir(),et(17)),lr(this),this.m=2,xs(this)):Lo(this,this.T-l)};function xs(l){l.j.I==0||l.K||Pi(l.j,l)}function lr(l){vi(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,pi(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function qe(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||Fo(y.h,l))){if(!l.L&&Fo(y.h,l)&&y.I==3){try{var w=y.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)Ri(y),rn(y);else break e;Hn(y),et(18)}}else y.xa=M[1],0<y.xa-y.K&&M[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Lr(v(y.Va,y),6e3));Ds(y.h)<=1&&y.ta&&(y.ta=void 0)}else sn(y,11)}else if((l.L||y.g==l)&&Ri(y),!A(p))for(M=y.Ba.g.parse(p),p=0;p<M.length;p++){let je=M[p];const ct=je[0];if(!(ct<=y.K))if(y.K=ct,je=je[1],y.I==2)if(je[0]=="c"){y.M=je[1],y.ba=je[2];const on=je[3];on!=null&&(y.ka=on,y.j.info("VER="+y.ka));const pr=je[4];pr!=null&&(y.za=pr,y.j.info("SVER="+y.za));const qn=je[5];qn!=null&&typeof qn=="number"&&qn>0&&(w=1.5*qn,y.O=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const Wn=l.g;if(Wn){const Di=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var j=w.h;j.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(wi(j,j.h),j.h=null))}if(w.G){const Xo=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(w.wa=Xo,Ue(w.J,w.G,Xo))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),w=y;var J=l;if(w.na=Qo(w,w.L?w.ba:null,w.W),J.L){bs(w.h,J);var we=J,st=w.O;st&&(we.H=st),we.D&&(vi(we),Ns(we)),w.g=J}else xt(w);y.i.length>0&&fr(y)}else je[0]!="stop"&&je[0]!="close"||sn(y,7);else y.I==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?sn(y,7):Ai(y):je[0]!="noop"&&y.l&&y.l.qa(je),y.A=0)}}ir(4)}catch{}}var cc=class{constructor(l,p){this.g=l,this.map=p}};function Ei(l){this.l=l||10,h.PerformanceNavigationTiming?(l=h.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mo(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ds(l){return l.h?1:l.g?l.g.size:0}function Fo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function wi(l,p){l.g?l.g.add(p):l.h=p}function bs(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Ei.prototype.cancel=function(){if(this.i=en(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function en(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const y of l.g.values())p=p.concat(y.G);return p}return z(l.i)}var dl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tn(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){const w=l[y].indexOf("=");let M,j=null;w>=0?(M=l[y].substring(0,w),j=l[y].substring(w+1)):M=l[y],p(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Vn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Vn?(this.l=l.l,Os(this,l.j),this.o=l.o,this.g=l.g,Ln(this,l.u),this.h=l.h,zr(this,Wo(l.i)),this.m=l.m):l&&(p=String(l).match(dl))?(this.l=!1,Os(this,p[1]||"",!0),this.o=Vs(p[2]||""),this.g=Vs(p[3]||"",!0),Ln(this,p[4]),this.h=Vs(p[5]||"",!0),zr(this,p[6]||"",!0),this.m=Vs(p[7]||"")):(this.l=!1,this.i=new Ne(null,this.l))}Vn.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(Ls(p,zo,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Ls(p,zo,!0),"@"),l.push(On(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Ls(y,y.charAt(0)=="/"?Ms:jo,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Ls(y,Bo)),l.join("")},Vn.prototype.resolve=function(l){const p=hn(this);let y=!!l.j;y?Os(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var w=l.h;if(y)Ln(p,l.u);else if(y=!!l.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var M=p.h.lastIndexOf("/");M!=-1&&(w=p.h.slice(0,M+1)+w)}if(M=w,M==".."||M==".")w="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){w=M.lastIndexOf("/",0)==0,M=M.split("/");const j=[];for(let J=0;J<M.length;){const we=M[J++];we=="."?w&&J==M.length&&j.push(""):we==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),w&&J==M.length&&j.push("")):(j.push(we),w=!0)}w=j.join("/")}else w=M}return y?p.h=w:y=l.i.toString()!=="",y?zr(p,Wo(l.i)):y=!!l.m,y&&(p.m=l.m),p};function hn(l){return new Vn(l)}function Os(l,p,y){l.j=y?Vs(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ln(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function zr(l,p,y){p instanceof Ne?(l.i=p,Ii(l.i,l.l)):(y||(p=Ls(p,hc)),l.i=new Ne(p,l.l))}function Ue(l,p,y){l.i.set(p,y)}function ur(l){return Ue(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Vs(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ls(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,Uo),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Uo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var zo=/[#\/\?@]/g,jo=/[#\?:]/g,Ms=/[#\?]/g,hc=/[#\?@]/g,Bo=/#/g;function Ne(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Mn(l){l.g||(l.g=new Map,l.h=0,l.i&&tn(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=Ne.prototype,s.add=function(l,p){Mn(this),this.i=null,l=Fn(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function $o(l,p){Mn(l),p=Fn(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Ti(l,p){return Mn(l),p=Fn(l,p),l.g.has(p)}s.forEach=function(l,p){Mn(this),this.g.forEach(function(y,w){y.forEach(function(M){l.call(p,M,w,this)},this)},this)};function Ho(l,p){Mn(l);let y=[];if(typeof p=="string")Ti(l,p)&&(y=y.concat(l.g.get(Fn(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}s.set=function(l,p){return Mn(this),this.i=null,l=Fn(this,l),Ti(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},s.get=function(l,p){return l?(l=Ho(this,l),l.length>0?String(l[0]):p):p};function qo(l,p,y){$o(l,p),y.length>0&&(l.i=null,l.g.set(Fn(l,p),z(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var y=p[w];const M=On(y);y=Ho(this,y);for(let j=0;j<y.length;j++){let J=M;y[j]!==""&&(J+="="+On(y[j])),l.push(J)}}return this.i=l.join("&")};function Wo(l){const p=new Ne;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function Fn(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Ii(l,p){p&&!l.j&&(Mn(l),l.i=null,l.g.forEach(function(y,w){const M=w.toLowerCase();w!=M&&($o(this,w),qo(this,M,y))},l)),l.j=p}function Un(l,p){const y=new Mr;if(h.Image){const w=new Image;w.onload=T(St,y,"TestLoadImage: loaded",!0,p,w),w.onerror=T(St,y,"TestLoadImage: error",!1,p,w),w.onabort=T(St,y,"TestLoadImage: abort",!1,p,w),w.ontimeout=T(St,y,"TestLoadImage: timeout",!1,p,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else p(!1)}function zn(l,p){const y=new Mr,w=new AbortController,M=setTimeout(()=>{w.abort(),St(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:w.signal}).then(j=>{clearTimeout(M),j.ok?St(y,"TestPingServer: ok",!0,p):St(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),St(y,"TestPingServer: error",!1,p)})}function St(l,p,y,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(y)}catch{}}function Fs(){this.g=new Rs}function cr(l){this.i=l.Sb||null,this.h=l.ab||!1}k(cr,br),cr.prototype.g=function(){return new nn(this.i,this.h)};function nn(l,p){ut.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(nn,ut),s=nn.prototype,s.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Tn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},s.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fl(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function fl(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}s.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?jr(this):Tn(this),this.readyState==3&&fl(this)}},s.Oa=function(l){this.g&&(this.response=this.responseText=l,jr(this))},s.Na=function(l){this.g&&(this.response=l,jr(this))},s.ga=function(){this.g&&jr(this)};function jr(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Tn(l)}s.setRequestHeader=function(l,p){this.A.append(l,p)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function Tn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function pl(l){let p="";return fe(l,function(y,w){p+=w,p+=":",p+=y,p+=`\r
`}),p}function Si(l,p,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=pl(y),typeof l=="string"?y!=null&&On(y):Ue(l,p,y))}function $e(l){ut.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k($e,ut);var ml=/^https?$/i,dc=["POST","PUT"];s=$e.prototype,s.Fa=function(l){this.H=l},s.ea=function(l,p,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ol.g(),this.g.onreadystatechange=D(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(j){Br(this,j);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)y.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())y.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),M=h.FormData&&l instanceof h.FormData,!(Array.prototype.indexOf.call(dc,p,void 0)>=0)||w||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,J]of y)this.g.setRequestHeader(j,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(j){Br(this,j)}};function Br(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,$r(l),dr(l)}function $r(l){l.A||(l.A=!0,rt(l,"complete"),rt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,rt(this,"complete"),rt(this,"abort"),dr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),$e.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?hr(this):this.Xa())},s.Xa=function(){hr(this)};function hr(l){if(l.h&&typeof u<"u"){if(l.v&&jn(l)==4)setTimeout(l.Ca.bind(l),0);else if(rt(l,"readystatechange"),jn(l)==4){l.h=!1;try{const j=l.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var w;if(w=j===0){let J=String(l.D).match(dl)[1]||null;!J&&h.self&&h.self.location&&(J=h.self.location.protocol.slice(0,-1)),w=!ml.test(J?J.toLowerCase():"")}y=w}if(y)rt(l,"complete"),rt(l,"success");else{l.o=6;try{var M=jn(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",$r(l)}}finally{dr(l)}}}}function dr(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const y=l.g;l.g=null,p||rt(l,"ready");try{y.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}s.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),tl(p)}};function gl(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Go(l){const p={};l=(l.g&&jn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(A(l[w]))continue;var y=_i(l[w]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=p[M]||[];p[M]=j,j.push(y)}se(p,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function Ci(l){this.za=0,this.i=[],this.j=new Mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bn("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bn("baseRetryDelayMs",5e3,l),this.Za=Bn("retryDelaySeedMs",1e4,l),this.Ta=Bn("forwardChannelMaxRetries",2,l),this.va=Bn("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ei(l&&l.concurrentRequestLimit),this.Ba=new Fs,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ci.prototype,s.ka=8,s.I=1,s.connect=function(l,p,y,w){et(0),this.W=l,this.H=p||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.J=Qo(this,null,this.W),fr(this)};function Ai(l){if(ki(l),l.I==3){var p=l.V++,y=hn(l.J);if(Ue(y,"SID",l.M),Ue(y,"RID",p),Ue(y,"TYPE","terminate"),$n(l,y),p=new cn(l,l.j,p),p.M=2,p.A=ur(hn(y)),y=!1,h.navigator&&h.navigator.sendBeacon)try{y=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&h.Image&&(new Image().src=p.A,y=!0),y||(p.g=_l(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ns(p)}js(l)}function rn(l){l.g&&(zs(l),l.g.cancel(),l.g=null)}function ki(l){rn(l),l.v&&(h.clearTimeout(l.v),l.v=null),Ri(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&h.clearTimeout(l.m),l.m=null)}function fr(l){if(!Mo(l.h)&&!l.m){l.m=!0;var p=l.Ea;ce||S(),he||(ce(),he=!0),R.add(p,l),l.D=0}}function yl(l,p){return Ds(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Lr(v(l.Ea,l,p),Ni(l,l.D)),l.D++,!0)}s.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const M=new cn(this,this.j,l);let j=this.o;if(this.U&&(j?(j=V(j),Se(j,this.U)):j=this.U),this.u!==null||this.R||(M.J=j,j=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Ko(this,M,p),y=hn(this.J),Ue(y,"RID",l),Ue(y,"CVER",22),this.G&&Ue(y,"X-HTTP-Session-Id",this.G),$n(this,y),j&&(this.R?p="headers="+On(pl(j))+"&"+p:this.u&&Si(y,this.u,j)),wi(this.h,M),this.Ra&&Ue(y,"TYPE","init"),this.S?(Ue(y,"$req",p),Ue(y,"SID","null"),M.U=!0,wn(M,y,null)):wn(M,y,p),this.I=2}}else this.I==3&&(l?Us(this,l):this.i.length==0||Mo(this.h)||Us(this))};function Us(l,p){var y;p?y=p.l:y=l.V++;const w=hn(l.J);Ue(w,"SID",l.M),Ue(w,"RID",y),Ue(w,"AID",l.K),$n(l,w),l.u&&l.o&&Si(w,l.u,l.o),y=new cn(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Ko(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),wi(l.h,y),wn(y,w,p)}function $n(l,p){l.H&&fe(l.H,function(y,w){Ue(p,w,y)}),l.l&&fe({},function(y,w){Ue(p,w,y)})}function Ko(l,p,y){y=Math.min(l.i.length,y);const w=l.l?v(l.l.Ka,l.l,l):null;e:{var M=l.i;let we=-1;for(;;){const st=["count="+y];we==-1?y>0?(we=M[0].g,st.push("ofs="+we)):we=0:st.push("ofs="+we);let je=!0;for(let ct=0;ct<y;ct++){var j=M[ct].g;const on=M[ct].map;if(j-=we,j<0)we=Math.max(0,M[ct].g-100),je=!1;else try{j="req"+j+"_"||"";try{var J=on instanceof Map?on:Object.entries(on);for(const[pr,qn]of J){let Wn=qn;m(qn)&&(Wn=Dr(qn)),st.push(j+pr+"="+encodeURIComponent(Wn))}}catch(pr){throw st.push(j+"type="+encodeURIComponent("_badmap")),pr}}catch{w&&w(on)}}if(je){J=st.join("&");break e}}J=void 0}return l=l.i.splice(0,y),p.G=l,J}function xt(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;ce||S(),he||(ce(),he=!0),R.add(p,l),l.A=0}}function Hn(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Lr(v(l.Da,l),Ni(l,l.A)),l.A++,!0)}s.Da=function(){if(this.v=null,Hr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Lr(v(this.Wa,this),l)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),rn(this),Hr(this))};function zs(l){l.B!=null&&(h.clearTimeout(l.B),l.B=null)}function Hr(l){l.g=new cn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=hn(l.na);Ue(p,"RID","rpc"),Ue(p,"SID",l.M),Ue(p,"AID",l.K),Ue(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ue(p,"TO",l.ia),Ue(p,"TYPE","xmlhttp"),$n(l,p),l.u&&l.o&&Si(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=ur(hn(p)),y.u=null,y.R=!0,Vo(y,l)}s.Va=function(){this.C!=null&&(this.C=null,rn(this),Hn(this),et(19))};function Ri(l){l.C!=null&&(h.clearTimeout(l.C),l.C=null)}function Pi(l,p){var y=null;if(l.g==p){Ri(l),zs(l),l.g=null;var w=2}else if(Fo(l.h,p))y=p.G,bs(l.h,p),w=1;else return;if(l.I!=0){if(p.o)if(w==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var M=l.D;w=Vr(),rt(w,new bo(w,y)),fr(l)}else xt(l);else if(M=p.m,M==3||M==0&&p.X>0||!(w==1&&yl(l,p)||w==2&&Hn(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),M){case 1:sn(l,5);break;case 4:sn(l,10);break;case 3:sn(l,6);break;default:sn(l,2)}}}function Ni(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function sn(l,p){if(l.j.info("Error code "+p),p==2){var y=v(l.bb,l),w=l.Ua;const M=!w;w=new Vn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Os(w,"https"),ur(w),M?Un(w.toString(),y):zn(w.toString(),y)}else et(2);l.I=0,l.l&&l.l.pa(p),js(l),ki(l)}s.bb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function js(l){if(l.I=0,l.ja=[],l.l){const p=en(l.h);(p.length!=0||l.i.length!=0)&&($(l.ja,p),$(l.ja,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.oa()}}function Qo(l,p,y){var w=y instanceof Vn?hn(y):new Vn(y);if(w.g!="")p&&(w.g=p+"."+w.g),Ln(w,w.u);else{var M=h.location;w=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const j=new Vn(null);w&&Os(j,w),p&&(j.g=p),M&&Ln(j,M),y&&(j.h=y),w=j}return y=l.G,p=l.wa,y&&p&&Ue(w,y,p),Ue(w,"VER",l.ka),$n(l,w),w}function _l(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new $e(new cr({ab:y})):new $e(l.ma),p.Fa(l.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function vl(){}s=vl.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function xi(){}xi.prototype.g=function(l,p){return new Ct(l,p)};function Ct(l,p){ut.call(this),this.g=new Ci(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!A(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new qr(this)}k(Ct,ut),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Ai(this.g)},Ct.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=Dr(l),l=y);p.i.push(new cc(p.Ya++,l)),p.I==3&&fr(p)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Ai(this.g),delete this.g,Ct.Z.N.call(this)};function El(l){mi.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}k(El,mi);function wl(){Do.call(this),this.status=1}k(wl,Do);function qr(l){this.g=l}k(qr,vl),qr.prototype.ra=function(){rt(this.g,"a")},qr.prototype.qa=function(l){rt(this.g,new El(l))},qr.prototype.pa=function(l){rt(this.g,new wl)},qr.prototype.oa=function(){rt(this.g,"b")},xi.prototype.createWebChannel=xi.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,Zy=function(){return new xi},Jy=function(){return Vr()},Yy=En,od={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Au=Fr,Ur.COMPLETE="complete",Xy=Ur,nl.EventType=Or,Or.OPEN="a",Or.CLOSE="b",Or.ERROR="c",Or.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Sa=nl,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,Qy=$e}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const Jm="@firebase/firestore",Zm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Cd("@firebase/firestore");function Zi(){return li.logLevel}function ie(s,...e){if(li.logLevel<=Pe.DEBUG){const t=e.map(Ld);li.debug(`Firestore (${So}): ${s}`,...t)}}function Rr(s,...e){if(li.logLevel<=Pe.ERROR){const t=e.map(Ld);li.error(`Firestore (${So}): ${s}`,...t)}}function fo(s,...e){if(li.logLevel<=Pe.WARN){const t=e.map(Ld);li.warn(`Firestore (${So}): ${s}`,...t)}}function Ld(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,e_(s,i,t)}function e_(s,e,t){let i=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Rr(i),new Error(i)}function Ze(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||e_(e,a,i)}function be(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mt.UNAUTHENTICATED)))}shutdown(){}}class vI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new ao;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ao,e.enqueueRetryable((()=>a(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ao)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new t_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class wI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new wI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class II{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const i=u=>{u.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ie("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const a=u=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=SI(40);for(let u=0;u<a.length;++u)i.length<20&&a[u]<t&&(i+=e.charAt(a[u]%62))}return i}}function xe(s,e){return s<e?-1:s>e?1:0}function ad(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),u=e.charAt(i);if(a!==u)return Hh(a)===Hh(u)?xe(a,u):Hh(a)?1:-1}return xe(s.length,e.length)}const CI=55296,AI=57343;function Hh(s){const e=s.charCodeAt(0);return e>=CI&&e<=AI}function po(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="__name__";class Yn{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const u=Yn.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return xe(e.length,t.length)}static compareSegments(e,t){const i=Yn.isNumericId(e),a=Yn.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Yn.extractNumericId(e).compare(Yn.extractNumericId(t)):ad(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class Je extends Yn{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const kI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Yn{construct(e,t,i){return new Ht(e,t,i)}static isValidIdentifier(e){return kI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tg}static keyField(){return new Ht([tg])}static fromServerFormat(e){const t=[];let i="",a=0;const u=()=>{if(i.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,a+=2}else m==="`"?(h=!h,a++):m!=="."||h?(i+=m,a++):(u(),a++)}if(u(),h)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Je.fromString(e))}static fromName(e){return new ye(Je.fromString(e).popFirst(5))}static empty(){return new ye(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(s,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function PI(s,e,t,i){if(e===!0&&i===!0)throw new de(Z.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function ng(s){if(!ye.isDocumentKey(s))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function NI(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function xI(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ie(12329,{type:typeof s})}function ku(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xI(s);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(s,e){const t={typeString:s};return e&&(t.value=e),t}function Ka(s,e){if(!NI(s))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(a&&typeof h!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-62135596800,sg=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sg);return new ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rg)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sg}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ka(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:pt("string",ft._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new ft(0,0))}static max(){return new Te(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=-1;function DI(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(i===1e9?new ft(t+1,0):new ft(t,i));return new vs(a,ye.empty(),e)}function bI(s){return new vs(s.readTime,s.key,Ma)}class vs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new vs(Te.min(),ye.empty(),Ma)}static max(){return new vs(Te.max(),ye.empty(),Ma)}}function OI(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:xe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==VI)throw s;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((i,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,i)=>{t(e)}))}static reject(e){return new H(((t,i)=>{i(e)}))}static waitFor(e){return new H(((t,i)=>{let a=0,u=0,h=!1;e.forEach((m=>{++a,m.next((()=>{++u,h&&u===a&&t()}),(g=>i(g)))})),h=!0,u===a&&t()}))}static or(e){let t=H.resolve(!1);for(const i of e)t=t.next((a=>a?H.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,u)=>{i.push(t.call(this,a,u))})),this.waitFor(i)}static mapArray(e,t){return new H(((i,a)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const v=g;t(e[v]).next((T=>{h[v]=T,++m,m===u&&i(h)}),(T=>a(T)))}}))}static doWhile(e,t){return new H(((i,a)=>{const u=()=>{e()===!0?t().next((()=>{u()}),a):i()};u()}))}}function MI(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Co(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=-1;function ec(s){return s==null}function ld(s){return s===0&&1/s==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="";function UI(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=ig(e)),e=zI(s.get(t),e);return ig(e)}function zI(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const u=s.charAt(a);switch(u){case"\0":t+="";break;case n_:t+="";break;default:t+=u}}return t}function ig(s){return s+n_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Qa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function jI(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Rt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,t,i,a,u){this.key=e,this.value=t,this.color=i??Rt.RED,this.left=a??Rt.EMPTY,this.right=u??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,u){return new Rt(e??this.key,t??this.value,i??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const u=i(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,i),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Rt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,a,u){return this}insert(e,t,i){return new Rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ag(this.data.getIterator())}getIteratorFrom(e){return new ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=i.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new hs([])}unionWith(e){let t=new vt(Ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new r_("Invalid base64 string: "+u):u}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(a){let u="";for(let h=0;h<a.length;++h)u+=String.fromCharCode(a[h]);return u})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const BI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(s){if(Ze(!!s,39018),typeof s=="string"){let e=0;const t=BI.exec(s);if(Ze(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(s.seconds),nanos:ot(s.nanos)}}function ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ws(s){return typeof s=="string"?Pt.fromBase64String(s):Pt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="server_timestamp",i_="__type__",o_="__previous_value__",a_="__local_write_time__";function Fd(s){return(s?.mapValue?.fields||{})[i_]?.stringValue===s_}function tc(s){const e=s.mapValue.fields[o_];return Fd(e)?tc(e):e}function Fa(s){const e=Es(s.mapValue.fields[a_].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t,i,a,u,h,m,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T}}const zu="(default)";class Ua{constructor(e,t){this.projectId=e,this.database=t||zu}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===zu}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="__type__",qI="__max__",_u={mapValue:{}},WI="__vector__",ud="value";function Ts(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Fd(s)?4:KI(s)?9007199254740991:GI(s)?10:11:Ie(28295,{value:s})}function rr(s,e){if(s===e)return!0;const t=Ts(s);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Fa(s).isEqual(Fa(e));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const h=Es(a.timestampValue),m=Es(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,u){return ws(a.bytesValue).isEqual(ws(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,u){return ot(a.geoPointValue.latitude)===ot(u.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(u.geoPointValue.longitude)})(s,e);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return ot(a.integerValue)===ot(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const h=ot(a.doubleValue),m=ot(u.doubleValue);return h===m?ld(h)===ld(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return po(s.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return(function(a,u){const h=a.mapValue.fields||{},m=u.mapValue.fields||{};if(og(h)!==og(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!rr(h[g],m[g])))return!1;return!0})(s,e);default:return Ie(52216,{left:s})}}function za(s,e){return(s.values||[]).find((t=>rr(t,e)))!==void 0}function mo(s,e){if(s===e)return 0;const t=Ts(s),i=Ts(e);if(t!==i)return xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=ot(u.integerValue||u.doubleValue),g=ot(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return lg(s.timestampValue,e.timestampValue);case 4:return lg(Fa(s),Fa(e));case 5:return ad(s.stringValue,e.stringValue);case 6:return(function(u,h){const m=ws(u),g=ws(h);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const T=xe(m[v],g[v]);if(T!==0)return T}return xe(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=xe(ot(u.latitude),ot(h.latitude));return m!==0?m:xe(ot(u.longitude),ot(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return ug(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const m=u.fields||{},g=h.fields||{},v=m[ud]?.arrayValue,T=g[ud]?.arrayValue,k=xe(v?.values?.length||0,T?.values?.length||0);return k!==0?k:ug(v,T)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===_u.mapValue&&h===_u.mapValue)return 0;if(u===_u.mapValue)return 1;if(h===_u.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),v=h.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let k=0;k<g.length&&k<T.length;++k){const D=ad(g[k],T[k]);if(D!==0)return D;const z=mo(m[g[k]],v[T[k]]);if(z!==0)return z}return xe(g.length,T.length)})(s.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function lg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return xe(s,e);const t=Es(s),i=Es(e),a=xe(t.seconds,i.seconds);return a!==0?a:xe(t.nanos,i.nanos)}function ug(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const u=mo(t[a],i[a]);if(u)return u}return xe(t.length,i.length)}function go(s){return cd(s)}function cd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Es(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return ws(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const u of t.values||[])a?a=!1:i+=",",i+=cd(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${cd(t.fields[h])}`;return a+"}"})(s.mapValue):Ie(61005,{value:s})}function Ru(s){switch(Ts(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tc(s);return e?16+Ru(e):16;case 5:return 2*s.stringValue.length;case 6:return ws(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,u)=>a+Ru(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return Qa(i.fields,((u,h)=>{a+=u.length+Ru(h)})),a})(s.mapValue);default:throw Ie(13486,{value:s})}}function hd(s){return!!s&&"integerValue"in s}function Ud(s){return!!s&&"arrayValue"in s}function cg(s){return!!s&&"nullValue"in s}function hg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function qh(s){return!!s&&"mapValue"in s}function GI(s){return(s?.mapValue?.fields||{})[HI]?.stringValue===WI}function Na(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Qa(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Na(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Na(s.arrayValue.values[t]);return e}return{...s}}function KI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===qI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(t)}setAll(e){let t=Ht.emptyPath(),i={},a=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,a),i={},a=[],t=m.popLast()}h?i[m.lastSegment()]=Na(h):a.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,a)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];qh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Qa(t,((a,u)=>e[a]=u));for(const a of i)delete e[a]}clone(){return new Jn(Na(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,i,a,u,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ft(e,0,Te.min(),Te.min(),Te.min(),Jn.empty(),0)}static newFoundDocument(e,t,i,a){return new Ft(e,1,t,Te.min(),i,a,0)}static newNoDocument(e,t){return new Ft(e,2,t,Te.min(),Te.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Te.min(),Te.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.position=e,this.inclusive=t}}function dg(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const u=e[a],h=s.position[a];if(u.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=mo(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function fg(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!rr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function QI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{}class yt extends l_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new YI(e,t,i):t==="array-contains"?new eS(e,i):t==="in"?new tS(e,i):t==="not-in"?new nS(e,i):t==="array-contains-any"?new rS(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new JI(e,i):new ZI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(mo(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends l_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sr(e,t)}matches(e){return u_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function u_(s){return s.op==="and"}function c_(s){return XI(s)&&u_(s)}function XI(s){for(const e of s.filters)if(e instanceof sr)return!1;return!0}function dd(s){if(s instanceof yt)return s.field.canonicalString()+s.op.toString()+go(s.value);if(c_(s))return s.filters.map((e=>dd(e))).join(",");{const e=s.filters.map((t=>dd(t))).join(",");return`${s.op}(${e})`}}function h_(s,e){return s instanceof yt?(function(i,a){return a instanceof yt&&i.op===a.op&&i.field.isEqual(a.field)&&rr(i.value,a.value)})(s,e):s instanceof sr?(function(i,a){return a instanceof sr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((u,h,m)=>u&&h_(h,a.filters[m])),!0):!1})(s,e):void Ie(19439)}function d_(s){return s instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${go(t.value)}`})(s):s instanceof sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(d_).join(" ,")+"}"})(s):"Filter"}class YI extends yt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class JI extends yt{constructor(e,t){super(e,"in",t),this.keys=f_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ZI extends yt{constructor(e,t){super(e,"not-in",t),this.keys=f_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function f_(s,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class eS extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ud(t)&&za(t.arrayValue,this.value)}}class tS extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&za(this.value.arrayValue,t)}}class nS extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!za(this.value.arrayValue,t)}}class rS extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ud(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>za(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t=null,i=[],a=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function pg(s,e=null,t=[],i=[],a=null,u=null,h=null){return new sS(s,e,t,i,a,u,h)}function zd(s){const e=be(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>dd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),ec(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>go(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>go(i))).join(",")),e.Te=t}return e.Te}function jd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!QI(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!h_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!fg(s.startAt,e.startAt)&&fg(s.endAt,e.endAt)}function fd(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t=null,i=[],a=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iS(s,e,t,i,a,u,h,m){return new nc(s,e,t,i,a,u,h,m)}function Bd(s){return new nc(s)}function mg(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function oS(s){return s.collectionGroup!==null}function xa(s){const e=be(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new vt(Ht.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Bu(u,i))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new Bu(Ht.keyField(),i))}return e.Ie}function nr(s){const e=be(s);return e.Ee||(e.Ee=aS(e,xa(s))),e.Ee}function aS(s,e){if(s.limitType==="F")return pg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new Bu(a.field,u)}));const t=s.endAt?new ju(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new ju(s.startAt.position,s.startAt.inclusive):null;return pg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function pd(s,e,t){return new nc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function rc(s,e){return jd(nr(s),nr(e))&&s.limitType===e.limitType}function p_(s){return`${zd(nr(s))}|lt:${s.limitType}`}function eo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>d_(a))).join(", ")}]`),ec(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>go(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>go(a))).join(",")),`Target(${i})`})(nr(s))}; limitType=${s.limitType})`}function sc(s,e){return e.isFoundDocument()&&(function(i,a){const u=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):ye.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,a){for(const u of xa(i))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const u of i.filters)if(!u.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(h,m,g){const v=dg(h,m,g);return h.inclusive?v<=0:v<0})(i.startAt,xa(i),a)||i.endAt&&!(function(h,m,g){const v=dg(h,m,g);return h.inclusive?v>=0:v>0})(i.endAt,xa(i),a))})(s,e)}function lS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function m_(s){return(e,t)=>{let i=!1;for(const a of xa(s)){const u=uS(a,e,t);if(u!==0)return u;i=i||a.field.isKeyField()}return 0}}function uS(s,e,t){const i=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(u,h,m){const g=h.data.field(u),v=m.data.field(u);return g!==null&&v!==null?mo(g,v):Ie(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,u]of i)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,((t,i)=>{for(const[a,u]of i)e(a,u)}))}isEmpty(){return jI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new lt(ye.comparator);function Is(){return cS}const g_=new lt(ye.comparator);function Ca(...s){let e=g_;for(const t of s)e=e.insert(t.key,t);return e}function hS(s){let e=g_;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ti(){return Da()}function y_(){return Da()}function Da(){return new ci((s=>s.toString()),((s,e)=>s.isEqual(e)))}const dS=new vt(ye.comparator);function Le(...s){let e=dS;for(const t of s)e=e.add(t);return e}const fS=new vt(xe);function pS(){return fS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function gS(s){return{integerValue:""+s}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){this._=void 0}}function yS(s,e,t){return s instanceof md?(function(a,u){const h={fields:{[i_]:{stringValue:s_},[a_]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Fd(u)&&(u=tc(u)),u&&(h.fields[o_]=u),{mapValue:h}})(t,e):s instanceof $u?__(s,e):s instanceof Hu?v_(s,e):(function(a,u){const h=vS(a,u),m=gg(h)+gg(a.Ae);return hd(h)&&hd(a.Ae)?gS(m):mS(a.serializer,m)})(s,e)}function _S(s,e,t){return s instanceof $u?__(s,e):s instanceof Hu?v_(s,e):t}function vS(s,e){return s instanceof gd?(function(i){return hd(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class md extends ic{}class $u extends ic{constructor(e){super(),this.elements=e}}function __(s,e){const t=E_(e);for(const i of s.elements)t.some((a=>rr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Hu extends ic{constructor(e){super(),this.elements=e}}function v_(s,e){let t=E_(e);for(const i of s.elements)t=t.filter((a=>!rr(a,i)));return{arrayValue:{values:t}}}class gd extends ic{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function gg(s){return ot(s.integerValue||s.doubleValue)}function E_(s){return Ud(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function ES(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof $u&&a instanceof $u||i instanceof Hu&&a instanceof Hu?po(i.elements,a.elements,rr):i instanceof gd&&a instanceof gd?rr(i.Ae,a.Ae):i instanceof md&&a instanceof md})(s.transform,e.transform)}class ni{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class $d{}function w_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new TS(s.key,ni.none()):new Hd(s.key,s.data,ni.none());{const t=s.data,i=Jn.empty();let a=new vt(Ht.comparator);for(let u of e.fields)if(!a.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),a=a.add(u)}return new oc(s.key,i,new hs(a.toArray()),ni.none())}}function wS(s,e,t){s instanceof Hd?(function(a,u,h){const m=a.value.clone(),g=_g(a.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,t):s instanceof oc?(function(a,u,h){if(!Pu(a.precondition,u))return void u.convertToUnknownDocument(h.version);const m=_g(a.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(T_(a)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(a,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ba(s,e,t,i){return s instanceof Hd?(function(u,h,m,g){if(!Pu(u.precondition,h))return m;const v=u.value.clone(),T=vg(u.fieldTransforms,g,h);return v.setAll(T),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(s,e,t,i):s instanceof oc?(function(u,h,m,g){if(!Pu(u.precondition,h))return m;const v=vg(u.fieldTransforms,g,h),T=h.data;return T.setAll(T_(u)),T.setAll(v),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,t,i):(function(u,h,m){return Pu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,t)}function yg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&po(i,a,((u,h)=>ES(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Hd extends $d{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class oc extends $d{constructor(e,t,i,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function T_(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function _g(s,e,t){const i=new Map;Ze(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const u=s[a],h=u.transform,m=e.data.field(u.field);i.set(u.field,_S(h,m,t[a]))}return i}function vg(s,e,t){const i=new Map;for(const a of s){const u=a.transform,h=t.data.field(a.field);i.set(a.field,yS(u,h,e))}return i}class TS extends $d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&wS(u,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ba(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ba(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=y_();return this.mutations.forEach((a=>{const u=e.get(a.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(a.key)?null:m;const g=w_(h,m);g!==null&&i.set(a.key,g),h.isValidDocument()||h.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,((t,i)=>yg(t,i)))&&po(this.baseMutations,e.baseMutations,((t,i)=>yg(t,i)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,De;function I_(s){if(s===void 0)return Rr("GRPC error has no .code"),Z.UNKNOWN;switch(s){case dt.OK:return Z.OK;case dt.CANCELLED:return Z.CANCELLED;case dt.UNKNOWN:return Z.UNKNOWN;case dt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case dt.INTERNAL:return Z.INTERNAL;case dt.UNAVAILABLE:return Z.UNAVAILABLE;case dt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case dt.NOT_FOUND:return Z.NOT_FOUND;case dt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case dt.ABORTED:return Z.ABORTED;case dt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case dt.DATA_LOSS:return Z.DATA_LOSS;default:return Ie(39323,{code:s})}}(De=dt||(dt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new gs([4294967295,4294967295],0);function Eg(s){const e=AS().encode(s),t=new Ky;return t.update(e),new Uint8Array(t.digest())}function wg(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new gs([t,i],0),new gs([a,u],0)]}class qd{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Aa(`Invalid padding: ${t}`);if(i<0)throw new Aa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gs.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(gs.fromNumber(i)));return a.compare(kS)===1&&(a=new gs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Eg(e),[i,a]=wg(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,a,u);if(!this.we(h))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new qd(u,a,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=Eg(e),[i,a]=wg(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,a,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,i,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ac(Te.min(),a,new lt(xe),Is(),Le())}}class Xa{constructor(e,t,i,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xa(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class S_{constructor(e,t){this.targetId=e,this.Ce=t}}class C_{constructor(e,t,i=Pt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Tg{constructor(){this.ve=0,this.Fe=Ig(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),i=Le();return this.Fe.forEach(((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ie(38017,{changeType:u})}})),new Xa(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Ig()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.Je=vu(),this.He=vu(),this.Ye=new lt(xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const u=a.target;if(fd(u))if(i===0){const h=new ye(u.path);this.et(t,h,Ft.newNoDocument(h,Te.min()))}else Ze(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:u=0}=t;let h,m;try{h=ws(i).toUint8Array()}catch(g){if(g instanceof r_)return fo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new qd(h,a,u)}catch(g){return fo(g instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&fd(m.target)){const g=new ye(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Ft.newNoDocument(g,e))}u.Be&&(t.set(h,u.ke()),u.qe())}}));let i=Le();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const a=new ac(e,t,this.Ye,this.je,i);return this.je=Is(),this.Je=vu(),this.He=vu(),this.Ye=new lt(xe),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Tg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vt(xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vt(xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tg),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vu(){return new lt(ye.comparator)}function Ig(){return new lt(ye.comparator)}const PS={asc:"ASCENDING",desc:"DESCENDING"},NS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xS={and:"AND",or:"OR"};class DS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yd(s,e){return s.useProto3Json||ec(e)?e:{value:e}}function bS(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function lo(s){return Ze(!!s,49232),Te.fromTimestamp((function(t){const i=Es(t);return new ft(i.seconds,i.nanos)})(s))}function VS(s,e){return _d(s,e).canonicalString()}function _d(s,e){const t=(function(a){return new Je(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function A_(s){const e=Je.fromString(s);return Ze(x_(e),10190,{key:e.toString()}),e}function Wh(s,e){const t=A_(e);if(t.get(1)!==s.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye(R_(t))}function k_(s,e){return VS(s.databaseId,e)}function LS(s){const e=A_(s);return e.length===4?Je.emptyPath():R_(e)}function Sg(s){return new Je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function R_(s){return Ze(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function MS(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ie(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=(function(v,T){return v.useProto3Json?(Ze(T===void 0||typeof T=="string",58123),Pt.fromBase64String(T||"")):(Ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Pt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const T=v.code===void 0?Z.UNKNOWN:I_(v.code);return new de(T,v.message||"")})(h);t=new C_(i,a,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Wh(s,i.document.name),u=lo(i.document.updateTime),h=i.document.createTime?lo(i.document.createTime):Te.min(),m=new Jn({mapValue:{fields:i.document.fields}}),g=Ft.newFoundDocument(a,u,h,m),v=i.targetIds||[],T=i.removedTargetIds||[];t=new Nu(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Wh(s,i.document),u=i.readTime?lo(i.readTime):Te.min(),h=Ft.newNoDocument(a,u),m=i.removedTargetIds||[];t=new Nu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Wh(s,i.document),u=i.removedTargetIds||[];t=new Nu([],u,a,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:u}=i,h=new CS(a,u),m=i.targetId;t=new S_(m,h)}}return t}function FS(s,e){return{documents:[k_(s,e.path)]}}function US(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=k_(s,a);const u=(function(v){if(v.length!==0)return N_(sr.create(v,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(v){if(v.length!==0)return v.map((T=>(function(D){return{field:to(D.field),direction:BS(D.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=yd(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:a}}function zS(s){let e=LS(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ze(i===1,65062);const T=t.from[0];T.allDescendants?a=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=(function(k){const D=P_(k);return D instanceof sr&&c_(D)?D.getFilters():[D]})(t.where));let h=[];t.orderBy&&(h=(function(k){return k.map((D=>(function($){return new Bu(no($.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(D)))})(t.orderBy));let m=null;t.limit&&(m=(function(k){let D;return D=typeof k=="object"?k.value:k,ec(D)?null:D})(t.limit));let g=null;t.startAt&&(g=(function(k){const D=!!k.before,z=k.values||[];return new ju(z,D)})(t.startAt));let v=null;return t.endAt&&(v=(function(k){const D=!k.before,z=k.values||[];return new ju(z,D)})(t.endAt)),iS(e,a,h,u,m,"F",g,v)}function jS(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function P_(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=no(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=no(t.unaryFilter.field);return yt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=no(t.unaryFilter.field);return yt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=no(t.unaryFilter.field);return yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(s):s.fieldFilter!==void 0?(function(t){return yt.create(no(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return sr.create(t.compositeFilter.filters.map((i=>P_(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(s):Ie(30097,{filter:s})}function BS(s){return PS[s]}function $S(s){return NS[s]}function HS(s){return xS[s]}function to(s){return{fieldPath:s.canonicalString()}}function no(s){return Ht.fromServerFormat(s.fieldPath)}function N_(s){return s instanceof yt?(function(t){if(t.op==="=="){if(hg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NAN"}};if(cg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NOT_NAN"}};if(cg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(t.field),op:$S(t.op),value:t.value}}})(s):s instanceof sr?(function(t){const i=t.getFilters().map((a=>N_(a)));return i.length===1?i[0]:{compositeFilter:{op:HS(t.op),filters:i}}})(s):Ie(54877,{filter:s})}function x_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,i,a,u=Te.min(),h=Te.min(),m=Pt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.yt=e}}function WS(s){const e=zS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?pd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.Cn=new KS}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(vs.min())}updateCollectionGroup(e,t,i){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class KS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new vt(Je.comparator),u=!a.has(i);return this.index[t]=a.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new vt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D_=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(D_,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yo(0)}static cr(){return new yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="LruGarbageCollector",QS=1048576;function kg([s,e],[t,i]){const a=xe(s,t);return a===0?xe(e,i):a}class XS{constructor(e){this.Ir=e,this.buffer=new vt(kg),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();kg(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(Ag,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Co(t)?ie(Ag,"Ignoring IndexedDB error during garbage collection: ",t):await Ju(t)}await this.Vr(3e5)}))}}class JS{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Zu.ce);const i=new XS(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Cg)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,u,h,m,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,h=Date.now(),this.nthSequenceNumber(e,a)))).next((k=>(i=k,m=Date.now(),this.removeTargets(e,i,t)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(v=Date.now(),Zi()<=Pe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${a} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${k} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:k}))))}}function ZS(s,e){return new JS(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.changes=new ci((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?H.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&ba(i.mutation,a,hs.empty(),ft.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const a=ti();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((u=>{let h=Ca();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ti();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const a=[];return i.forEach((u=>{t.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(e,a).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,a){let u=Is();const h=Da(),m=(function(){return Da()})();return t.forEach(((g,v)=>{const T=i.get(v.key);a.has(v.key)&&(T===void 0||T.mutation instanceof oc)?u=u.insert(v.key,v):T!==void 0?(h.set(v.key,T.mutation.getFieldMask()),ba(T.mutation,v,T.mutation.getFieldMask(),ft.now())):h.set(v.key,hs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((v,T)=>h.set(v,T))),t.forEach(((v,T)=>m.set(v,new t1(T,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=Da();let a=new lt(((h,m)=>h-m)),u=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let T=i.get(g)||hs.empty();T=m.applyToLocalView(v,T),i.set(g,T);const k=(a.get(m.batchId)||Le()).add(g);a=a.insert(m.batchId,k)}))})).next((()=>{const h=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,T=g.value,k=y_();T.forEach((D=>{if(!u.has(D)){const z=w_(t.get(D),i.get(D));z!==null&&k.set(D,z),u=u.add(D)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,k))}return H.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((u=>{const h=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-u.size):H.resolve(ti());let m=Ma,g=u;return h.next((v=>H.forEach(v,((T,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(T)?H.resolve():this.remoteDocumentCache.getEntry(e,T).next((D=>{g=g.insert(T,D)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,g,v,Le()))).next((T=>({batchId:m,changes:hS(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let a=Ca();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const u=t.collectionGroup;let h=Ca();return this.indexManager.getCollectionParents(e,u).next((m=>H.forEach(m,(g=>{const v=(function(k,D){return new nc(D,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,i,a).next((T=>{T.forEach(((k,D)=>{h=h.insert(k,D)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,a)))).next((h=>{u.forEach(((g,v)=>{const T=v.getKey();h.get(T)===null&&(h=h.insert(T,Ft.newInvalidDocument(T)))}));let m=Ca();return h.forEach(((g,v)=>{const T=u.get(g);T!==void 0&&ba(T.mutation,v,hs.empty(),ft.now()),sc(t,v)&&(m=m.insert(g,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:lo(a.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:WS(a.bundledQuery),readTime:lo(a.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.overlays=new lt(ye.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ti();return H.forEach(t,(a=>this.getOverlay(e,a).next((u=>{u!==null&&i.set(a,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,u)=>{this.St(e,t,u)})),H.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),H.resolve()}getOverlaysForCollection(e,t,i){const a=ti(),u=t.length+1,h=new ye(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>i&&a.set(g.getKey(),g)}return H.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let u=new lt(((v,T)=>v-T));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let T=u.get(v.largestBatchId);T===null&&(T=ti(),u=u.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const m=ti(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,T)=>m.set(v,T))),!(m.size()>=a)););return H.resolve(m)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const h=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new SS(t,i));let u=this.qr.get(t);u===void 0&&(u=Le(),this.qr.set(t,u)),this.qr.set(t,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this.Qr=new vt(It.$r),this.Ur=new vt(It.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new It(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new It(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ye(new Je([])),i=new It(t,e),a=new It(t,e+1),u=[];return this.Ur.forEachInRange([i,a],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Je([])),i=new It(t,e),a=new It(t,e+1);let u=Le();return this.Ur.forEachInRange([i,a],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new It(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||xe(e.Yr,t.Yr)}static Kr(e,t){return xe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vt(It.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new IS(u,t,i,a);this.mutationQueue.push(h);for(const m of a)this.Zr=this.Zr.add(new It(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return H.resolve(h)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),u=a<0?0:a;return H.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?FI:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),a=new It(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,a],(h=>{const m=this.Xr(h.Yr);u.push(m)})),H.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vt(xe);return t.forEach((a=>{const u=new It(a,0),h=new It(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{i=i.add(m.Yr)}))})),H.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let u=i;ye.isDocumentKey(u)||(u=u.child(""));const h=new It(new ye(u),0);let m=new vt(xe);return this.Zr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===a&&(m=m.add(g.Yr)),!0)}),h),H.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return H.forEach(t.mutations,(a=>{const u=new It(a.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new It(t,0),a=this.Zr.firstAfterOrEqual(i);return H.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.ri=e,this.docs=(function(){return new lt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),u=a?a.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return H.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let i=Is();return t.forEach((a=>{const u=this.docs.get(a);i=i.insert(a,u?u.document.mutableCopy():Ft.newInvalidDocument(a))})),H.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let u=Is();const h=t.path,m=new ye(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||OI(bI(T),i)<=0||(a.has(T.key)||sc(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return H.resolve(u)}getAllFromCollectionGroup(e,t,i,a){Ie(9500)}ii(e,t){return H.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new l1(this)}getSize(e){return H.resolve(this.size)}}class l1 extends e1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.persistence=e,this.si=new ci((t=>zd(t)),jd),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Wd,this.targetCount=0,this.ai=yo.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new yo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,i){let a=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),H.waitFor(u).next((()=>a))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return H.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),H.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach((h=>{u.push(a.markPotentiallyOrphaned(e,h))})),H.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return H.resolve(i)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zu(0),this.li=!1,this.li=!0,this.hi=new i1,this.referenceDelegate=e(this),this.Pi=new u1(this),this.indexManager=new GS,this.remoteDocumentCache=(function(a){return new a1(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new qS(t),this.Ii=new r1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new o1(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const a=new c1(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ai(e,t){return H.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class c1 extends LI{constructor(e){super(),this.currentSequenceNumber=e}}class Gd{constructor(e){this.persistence=e,this.Ri=new Wd,this.Vi=null}static mi(e){return new Gd(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),H.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(i=>{const a=ye.fromPath(i);return this.gi(e,a).next((u=>{u||t.removeEntry(a,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qu{constructor(e,t){this.persistence=e,this.pi=new ci((i=>UI(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=ZS(this,t)}static mi(e,t){return new qu(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((i,a)=>this.br(e,i,a).next((u=>u?H.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,u.removeEntry(h,Te.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ru(e.data.value)),t}br(e,t,i){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return H.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Le(),a=Le();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new Kd(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ME()?8:MI(Ut())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const u={result:null};return this.ys(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,t,a,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new h1;return this.Ss(e,t,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>u.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Zi()<=Pe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Zi()<=Pe.DEBUG&&ie("QueryEngine","Query:",eo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Zi()<=Pe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(t))):H.resolve())}ys(e,t){if(mg(t))return H.resolve(null);let i=nr(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=pd(t,null,"F"),i=nr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Le(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.Ds(t,m);return this.Cs(t,v,h,g.readTime)?this.ys(e,pd(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ws(e,t,i,a){return mg(t)||a.isEqual(Te.min())?H.resolve(null):this.ps.getDocuments(e,i).next((u=>{const h=this.Ds(t,u);return this.Cs(t,h,i,a)?H.resolve(null):(Zi()<=Pe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),eo(t)),this.vs(e,h,t,DI(a,Ma)).next((m=>m)))}))}Ds(e,t){let i=new vt(m_(e));return t.forEach(((a,u)=>{sc(e,u)&&(i=i.add(u))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}Ss(e,t,i){return Zi()<=Pe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",eo(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="LocalStore",f1=3e8;class p1{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new lt(xe),this.xs=new ci((u=>zd(u)),jd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function m1(s,e,t,i){return new p1(s,e,t,i)}async function O_(s,e){const t=be(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((u=>(a=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],m=[];let g=Le();for(const v of a){h.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of u){m.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function V_(s){const e=be(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function g1(s,e){const t=be(s),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach(((T,k)=>{const D=a.get(k);if(!D)return;m.push(t.Pi.removeMatchingKeys(u,T.removedDocuments,k).next((()=>t.Pi.addMatchingKeys(u,T.addedDocuments,k))));let z=D.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?z=z.withResumeToken(Pt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,i)),a=a.insert(k,z),(function(G,B,ne){return G.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=f1?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(D,z,T)&&m.push(t.Pi.updateTargetData(u,z))}));let g=Is(),v=Le();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(y1(u,h,e.documentUpdates).next((T=>{g=T.ks,v=T.qs}))),!i.isEqual(Te.min())){const T=t.Pi.getLastRemoteSnapshotVersion(u).next((k=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));m.push(T)}return H.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,v))).next((()=>g))})).then((u=>(t.Ms=a,u)))}function y1(s,e,t){let i=Le(),a=Le();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=Is();return t.forEach(((m,g)=>{const v=u.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ie(Qd,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)})),{ks:h,qs:a}}))}function _1(s,e){const t=be(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((u=>u?(a=u,H.resolve(a)):t.Pi.allocateTargetId(i).next((h=>(a=new ds(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function vd(s,e,t){const i=be(s),a=i.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Co(h))throw h;ie(Qd,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Rg(s,e,t){const i=be(s);let a=Te.min(),u=Le();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,T){const k=be(g),D=k.xs.get(T);return D!==void 0?H.resolve(k.Ms.get(D)):k.Pi.getTargetData(v,T)})(i,h,nr(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?a:Te.min(),t?u:Le()))).next((m=>(v1(i,lS(e),m),{documents:m,Qs:u})))))}function v1(s,e,t){let i=s.Os.get(e)||Te.min();t.forEach(((a,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class Pg{constructor(){this.activeTargetIds=pS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E1{constructor(){this.Mo=new Pg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="ConnectivityMonitor";class xg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(Ng,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(Ng,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu=null;function Ed(){return Eu===null?Eu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Eu++,"0x"+Eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="RestConnection",T1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===zu?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,u){const h=Ed(),m=this.zo(e,t.toUriEncodedString());ie(Gh,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,u);const{host:v}=new URL(m),T=wo(v);return this.Jo(e,m,g,i,T).then((k=>(ie(Gh,`Received RPC '${e}' ${h}: `,k),k)),(k=>{throw fo(Gh,`RPC '${e}' ${h} failed with error: `,k,"url: ",m,"request:",i),k}))}Ho(e,t,i,a,u,h){return this.Go(e,t,i,a,u)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,u)=>e[u]=a)),i&&i.headers.forEach(((a,u)=>e[u]=a))}zo(e,t){const i=T1[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class C1 extends I1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,u){const h=Ed();return new Promise(((m,g)=>{const v=new Qy;v.setWithCredentials(!0),v.listenOnce(Xy.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Au.NO_ERROR:const k=v.getResponseJson();ie(Lt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(k)),m(k);break;case Au.TIMEOUT:ie(Lt,`RPC '${e}' ${h} timed out`),g(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Au.HTTP_ERROR:const D=v.getStatus();if(ie(Lt,`RPC '${e}' ${h} failed with status:`,D,"response text:",v.getResponseText()),D>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const $=z?.error;if($&&$.status&&$.message){const G=(function(ne){const re=ne.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(re)>=0?re:Z.UNKNOWN})($.status);g(new de(G,$.message))}else g(new de(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new de(Z.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ie(Lt,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(a);ie(Lt,`RPC '${e}' ${h} sending request:`,a),v.send(t,"POST",T,i,15)}))}T_(e,t,i){const a=Ed(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Zy(),m=Jy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const T=u.join("");ie(Lt,`Creating RPC '${e}' stream ${a}: ${T}`,g);const k=h.createWebChannel(T,g);this.I_(k);let D=!1,z=!1;const $=new S1({Yo:B=>{z?ie(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(D||(ie(Lt,`Opening RPC '${e}' stream ${a} transport.`),k.open(),D=!0),ie(Lt,`RPC '${e}' stream ${a} sending:`,B),k.send(B))},Zo:()=>k.close()}),G=(B,ne,re)=>{B.listen(ne,(pe=>{try{re(pe)}catch(Ee){setTimeout((()=>{throw Ee}),0)}}))};return G(k,Sa.EventType.OPEN,(()=>{z||(ie(Lt,`RPC '${e}' stream ${a} transport opened.`),$.o_())})),G(k,Sa.EventType.CLOSE,(()=>{z||(z=!0,ie(Lt,`RPC '${e}' stream ${a} transport closed`),$.a_(),this.E_(k))})),G(k,Sa.EventType.ERROR,(B=>{z||(z=!0,fo(Lt,`RPC '${e}' stream ${a} transport errored. Name:`,B.name,"Message:",B.message),$.a_(new de(Z.UNAVAILABLE,"The operation could not be completed")))})),G(k,Sa.EventType.MESSAGE,(B=>{if(!z){const ne=B.data[0];Ze(!!ne,16349);const re=ne,pe=re?.error||re[0]?.error;if(pe){ie(Lt,`RPC '${e}' stream ${a} received error:`,pe);const Ee=pe.status;let ce=(function(S){const I=dt[S];if(I!==void 0)return I_(I)})(Ee),he=pe.message;ce===void 0&&(ce=Z.INTERNAL,he="Unknown error status: "+Ee+" with message "+pe.message),z=!0,$.a_(new de(ce,he)),k.close()}else ie(Lt,`RPC '${e}' stream ${a} received:`,ne),$.u_(ne)}})),G(m,Yy.STAT_EVENT,(B=>{B.stat===od.PROXY?ie(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===od.NOPROXY&&ie(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(s){return new DS(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t,i=1e3,a=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="PersistentStream";class A1{constructor(e,t,i,a,u,h,m,g){this.Mi=e,this.S_=i,this.b_=a,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new de(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(Dg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ie(Dg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class k1 extends A1{constructor(e,t,i,a,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=MS(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Te.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?lo(h.readTime):Te.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Sg(this.serializer),t.addTarget=(function(u,h){let m;const g=h.target;if(m=fd(g)?{documents:FS(u,g)}:{query:US(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=OS(u,h.resumeToken);const v=yd(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Te.min())>0){m.readTime=bS(u,h.snapshotVersion.toTimestamp());const v=yd(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=jS(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Sg(this.serializer),t.removeTarget=e,this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{}class P1 extends R1{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,_d(t,i),a,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(Z.UNKNOWN,u.toString())}))}Ho(e,t,i,a,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,_d(t,i),a,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class N1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class x1{constructor(e,t,i,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Ja(this)&&(ie(_o,"Restarting streams for network reachability change."),await(async function(g){const v=be(g);v.Ea.add(4),await Ya(v),v.Ra.set("Unknown"),v.Ea.delete(4),await lc(v)})(this))}))})),this.Ra=new N1(i,a)}}async function lc(s){if(Ja(s))for(const e of s.da)await e(!0)}async function Ya(s){for(const e of s.da)await e(!1)}function F_(s,e){const t=be(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zd(t)?Jd(t):Ao(t).O_()&&Yd(t,e))}function Xd(s,e){const t=be(s),i=Ao(t);t.Ia.delete(e),i.O_()&&U_(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ja(t)&&t.Ra.set("Unknown"))}function Yd(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ao(s).Y_(e)}function U_(s,e){s.Va.Ue(e),Ao(s).Z_(e)}function Jd(s){s.Va=new RS({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ao(s).start(),s.Ra.ua()}function Zd(s){return Ja(s)&&!Ao(s).x_()&&s.Ia.size>0}function Ja(s){return be(s).Ea.size===0}function z_(s){s.Va=void 0}async function D1(s){s.Ra.set("Online")}async function b1(s){s.Ia.forEach(((e,t)=>{Yd(s,e)}))}async function O1(s,e){z_(s),Zd(s)?(s.Ra.ha(e),Jd(s)):s.Ra.set("Unknown")}async function V1(s,e,t){if(s.Ra.set("Online"),e instanceof C_&&e.state===2&&e.cause)try{await(async function(a,u){const h=u.cause;for(const m of u.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,h),a.Ia.delete(m),a.Va.removeTarget(m))})(s,e)}catch(i){ie(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await bg(s,i)}else if(e instanceof Nu?s.Va.Ze(e):e instanceof S_?s.Va.st(e):s.Va.tt(e),!t.isEqual(Te.min()))try{const i=await V_(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(v);T&&u.Ia.set(v,T.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,v)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(Pt.EMPTY_BYTE_STRING,T.snapshotVersion)),U_(u,g);const k=new ds(T.target,g,v,T.sequenceNumber);Yd(u,k)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){ie(_o,"Failed to raise snapshot:",i),await bg(s,i)}}async function bg(s,e,t){if(!Co(e))throw e;s.Ea.add(1),await Ya(s),s.Ra.set("Offline"),t||(t=()=>V_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ie(_o,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await lc(s)}))}async function Og(s,e){const t=be(s);t.asyncQueue.verifyOperationInProgress(),ie(_o,"RemoteStore received new credentials");const i=Ja(t);t.Ea.add(3),await Ya(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lc(t)}async function L1(s,e){const t=be(s);e?(t.Ea.delete(2),await lc(t)):e||(t.Ea.add(2),await Ya(t),t.Ra.set("Unknown"))}function Ao(s){return s.ma||(s.ma=(function(t,i,a){const u=be(t);return u.sa(),new k1(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(s.datastore,s.asyncQueue,{Xo:D1.bind(null,s),t_:b1.bind(null,s),r_:O1.bind(null,s),H_:V1.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Zd(s)?Jd(s):s.Ra.set("Unknown")):(await s.ma.stop(),z_(s))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,i,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=u,this.deferred=new ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,u){const h=Date.now()+i,m=new ef(e,t,h,a,u);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j_(s,e){if(Rr("AsyncQueue",`${e}: ${s}`),Co(s))return new de(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{static emptySet(e){return new uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ca(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=i.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.ga=new lt(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class vo{constructor(e,t,i,a,u,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,a,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new vo(e,t,uo.emptySet(t),h,i,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class F1{constructor(){this.queries=Lg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=be(t),u=a.queries;a.queries=Lg(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function Lg(){return new ci((s=>p_(s)),rc)}async function U1(s,e){const t=be(s);let i=3;const a=e.query;let u=t.queries.get(a);u?!u.ba()&&e.Da()&&(i=2):(u=new M1,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(a,!0);break;case 1:u.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(h){const m=j_(h,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&tf(t)}async function z1(s,e){const t=be(s),i=e.query;let a=3;const u=t.queries.get(i);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?a=e.Da()?0:1:!u.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function j1(s,e){const t=be(s);let i=!1;for(const a of e){const u=a.query,h=t.queries.get(u);if(h){for(const m of h.Sa)m.Fa(a)&&(i=!0);h.wa=a}}i&&tf(t)}function B1(s,e,t){const i=be(s),a=i.queries.get(e);if(a)for(const u of a.Sa)u.onError(t);i.queries.delete(e)}function tf(s){s.Ca.forEach((e=>{e.next()}))}var wd,Mg;(Mg=wd||(wd={})).Ma="default",Mg.Cache="cache";class $1{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new vo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.key=e}}class $_{constructor(e){this.key=e}}class H1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=m_(e),this.tu=new uo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Vg,a=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((T,k)=>{const D=a.get(T),z=sc(this.query,k)?k:null,$=!!D&&this.mutatedKeys.has(D.key),G=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let B=!1;D&&z?D.data.isEqual(z.data)?$!==G&&(i.track({type:3,doc:z}),B=!0):this.su(D,z)||(i.track({type:2,doc:z}),B=!0,(g&&this.eu(z,g)>0||v&&this.eu(z,v)<0)&&(m=!0)):!D&&z?(i.track({type:0,doc:z}),B=!0):D&&!z&&(i.track({type:1,doc:D}),B=!0,(g||v)&&(m=!0)),B&&(z?(h=h.add(z),u=G?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),i.track({type:1,doc:T})}return{tu:h,iu:i,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,k)=>(function(z,$){const G=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:B})}};return G(z)-G($)})(T.type,k.type)||this.eu(T.doc,k.doc))),this.ou(i),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,v=g!==this.Za;return this.Za=g,h.length!==0||v?{snapshot:new vo(this.query,e.tu,u,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new $_(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new B_(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nf="SyncEngine";class q1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class W1{constructor(e){this.key=e,this.hu=!1}}class G1{constructor(e,t,i,a,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ci((m=>p_(m)),rc),this.Iu=new Map,this.Eu=new Set,this.du=new lt(ye.comparator),this.Au=new Map,this.Ru=new Wd,this.Vu={},this.mu=new Map,this.fu=yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K1(s,e,t=!0){const i=K_(s);let a;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.lu()):a=await H_(i,e,t,!0),a}async function Q1(s,e){const t=K_(s);await H_(t,e,!0,!1)}async function H_(s,e,t,i){const a=await _1(s.localStore,nr(e)),u=a.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await X1(s,e,u,h==="current",a.resumeToken)),s.isPrimaryClient&&t&&F_(s.remoteStore,a),m}async function X1(s,e,t,i,a){s.pu=(k,D,z)=>(async function(G,B,ne,re){let pe=B.view.ru(ne);pe.Cs&&(pe=await Rg(G.localStore,B.query,!1).then((({documents:R})=>B.view.ru(R,pe))));const Ee=re&&re.targetChanges.get(B.targetId),ce=re&&re.targetMismatches.get(B.targetId)!=null,he=B.view.applyChanges(pe,G.isPrimaryClient,Ee,ce);return Ug(G,B.targetId,he.au),he.snapshot})(s,k,D,z);const u=await Rg(s.localStore,e,!0),h=new H1(e,u.Qs),m=h.ru(u.documents),g=Xa.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),v=h.applyChanges(m,s.isPrimaryClient,g);Ug(s,t,v.au);const T=new q1(e,t,h);return s.Tu.set(e,T),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),v.snapshot}async function Y1(s,e,t){const i=be(s),a=i.Tu.get(e),u=i.Iu.get(a.targetId);if(u.length>1)return i.Iu.set(a.targetId,u.filter((h=>!rc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await vd(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Xd(i.remoteStore,a.targetId),Td(i,a.targetId)})).catch(Ju)):(Td(i,a.targetId),await vd(i.localStore,a.targetId,!0))}async function J1(s,e){const t=be(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xd(t.remoteStore,i.targetId))}async function q_(s,e){const t=be(s);try{const i=await g1(t.localStore,e);e.targetChanges.forEach(((a,u)=>{const h=t.Au.get(u);h&&(Ze(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?h.hu=!0:a.modifiedDocuments.size>0?Ze(h.hu,14607):a.removedDocuments.size>0&&(Ze(h.hu,42227),h.hu=!1))})),await G_(t,i,e)}catch(i){await Ju(i)}}function Fg(s,e,t){const i=be(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(h,m){const g=be(h);g.onlineState=m;let v=!1;g.queries.forEach(((T,k)=>{for(const D of k.Sa)D.va(m)&&(v=!0)})),v&&tf(g)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Z1(s,e,t){const i=be(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),u=a&&a.key;if(u){let h=new lt(ye.comparator);h=h.insert(u,Ft.newNoDocument(u,Te.min()));const m=Le().add(u),g=new ac(Te.min(),new Map,new lt(xe),h,m);await q_(i,g),i.du=i.du.remove(u),i.Au.delete(e),rf(i)}else await vd(i.localStore,e,!1).then((()=>Td(i,e,t))).catch(Ju)}function Td(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||W_(s,i)}))}function W_(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Xd(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),rf(s))}function Ug(s,e,t){for(const i of t)i instanceof B_?(s.Ru.addReference(i.key,e),eC(s,i)):i instanceof $_?(ie(nf,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||W_(s,i.key)):Ie(19791,{wu:i})}function eC(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(ie(nf,"New document in limbo: "+t),s.Eu.add(i),rf(s))}function rf(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(Je.fromString(e)),i=s.fu.next();s.Au.set(i,new W1(t)),s.du=s.du.insert(t,i),F_(s.remoteStore,new ds(nr(Bd(t.path)),i,"TargetPurposeLimboResolution",Zu.ce))}}async function G_(s,e,t){const i=be(s),a=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,t).then((v=>{if((v||t)&&i.isPrimaryClient){const T=v?!v.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){a.push(v);const T=Kd.As(g.targetId,v);u.push(T)}})))})),await Promise.all(h),i.Pu.H_(a),await(async function(g,v){const T=be(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>H.forEach(v,(D=>H.forEach(D.Es,(z=>T.persistence.referenceDelegate.addReference(k,D.targetId,z))).next((()=>H.forEach(D.ds,(z=>T.persistence.referenceDelegate.removeReference(k,D.targetId,z)))))))))}catch(k){if(!Co(k))throw k;ie(Qd,"Failed to update sequence numbers: "+k)}for(const k of v){const D=k.targetId;if(!k.fromCache){const z=T.Ms.get(D),$=z.snapshotVersion,G=z.withLastLimboFreeSnapshotVersion($);T.Ms=T.Ms.insert(D,G)}}})(i.localStore,u))}async function tC(s,e){const t=be(s);if(!t.currentUser.isEqual(e)){ie(nf,"User change. New user:",e.toKey());const i=await O_(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new de(Z.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await G_(t,i.Ls)}}function nC(s,e){const t=be(s),i=t.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let a=Le();const u=t.Iu.get(e);if(!u)return a;for(const h of u){const m=t.Tu.get(h);a=a.unionWith(m.view.nu)}return a}}function K_(s){const e=be(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z1.bind(null,e),e.Pu.H_=j1.bind(null,e.eventManager),e.Pu.yu=B1.bind(null,e.eventManager),e}class Wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return m1(this.persistence,new d1,e.initialUser,this.serializer)}Cu(e){return new b_(Gd.mi,this.serializer)}Du(e){return new E1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wu.provider={build:()=>new Wu};class rC extends Wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof qu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new YS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new b_((i=>qu.mi(i,t)),this.serializer)}}class Id{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tC.bind(null,this.syncEngine),await L1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F1})()}createDatastore(e){const t=L_(e.databaseInfo.databaseId),i=(function(u){return new C1(u)})(e.databaseInfo);return(function(u,h,m,g){return new P1(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,u,h,m){return new x1(i,a,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fg(this.syncEngine,t,0)),(function(){return xg.v()?new xg:new w1})())}createSyncEngine(e,t){return(function(a,u,h,m,g,v,T){const k=new G1(a,u,h,m,g,v);return T&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=be(t);ie(_o,"RemoteStore shutting down."),i.Ea.add(5),await Ya(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Id.provider={build:()=>new Id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="FirestoreClient";class iC{constructor(e,t,i,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Mt.UNAUTHENTICATED,this.clientId=Md.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{ie(Ss,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ie(Ss,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=j_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Qh(s,e){s.asyncQueue.verifyOperationInProgress(),ie(Ss,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await O_(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function zg(s,e){s.asyncQueue.verifyOperationInProgress();const t=await oC(s);ie(Ss,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>Og(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Og(e.remoteStore,a))),s._onlineComponents=e}async function oC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ie(Ss,"Using user provided OfflineComponentProvider");try{await Qh(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;fo("Error using user provided cache. Falling back to memory cache: "+t),await Qh(s,new Wu)}}else ie(Ss,"Using default OfflineComponentProvider"),await Qh(s,new rC(void 0));return s._offlineComponents}async function aC(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ie(Ss,"Using user provided OnlineComponentProvider"),await zg(s,s._uninitializedComponentsProvider._online)):(ie(Ss,"Using default OnlineComponentProvider"),await zg(s,new Id))),s._onlineComponents}async function jg(s){const e=await aC(s),t=e.eventManager;return t.onListen=K1.bind(null,e.syncEngine),t.onUnlisten=Y1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Q1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=J1.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="firestore.googleapis.com",$g=!0;class Hg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X_,this.ssl=$g}else this.host=e.host,this.ssl=e.ssl??$g;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QS)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _I;switch(i.type){case"firstParty":return new TI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Bg.get(t);i&&(ie("ComponentProvider","Removing Datastore"),Bg.delete(t),i.terminate())})(this),Promise.resolve()}}function lC(s,e,t,i={}){s=ku(s,sf);const a=wo(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;a&&(oy(`https://${m}`),ay("Firestore",!0)),u.host!==X_&&u.host!==m&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:a,emulatorOptions:i};if(!si(g,h)&&(s._setSettings(g),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=Mt.MOCK_USER;else{v=RE(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Mt(k)}s._authCredentials=new vI(new t_(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new uc(this.firestore,e,this._query)}}class qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ka(t,qt._jsonSchema))return new qt(e,i||null,new ye(Je.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:pt("string",qt._jsonSchemaVersion),referencePath:pt("string")};class ja extends uc{constructor(e,t,i){super(e,t,Bd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ye(e))}withConverter(e){return new ja(this.firestore,e,this._path)}}function uC(s,e,...t){if(s=Dn(s),arguments.length===1&&(e=Md.newId()),RI("doc","path",e),s instanceof sf){const i=Je.fromString(e,...t);return ng(i),new qt(s,null,new ye(i))}{if(!(s instanceof qt||s instanceof ja))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Je.fromString(e,...t));return ng(i),new qt(s.firestore,s instanceof ja?s.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="AsyncQueue";class Wg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M_(this,"async_queue_retry"),this._c=()=>{const i=Kh();i&&ie(qg,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Kh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ao;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Co(e))throw e;ie(qg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",Gg(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ef.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(a),a}uc(){this.nc&&Ie(47125,{Pc:Gg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gg(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const u of i)if(u in a&&typeof a[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Sd extends sf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Wg,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wg(e),this._firestoreClient=void 0,await e}}}function cC(s,e){const t=typeof s=="object"?s:hy(),i=typeof s=="string"?s:zu,a=kd(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const u=AE("firestore");u&&lC(a,...u)}return a}function hC(s){if(s._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||dC(s),s._firestoreClient}function dC(s){const e=s._freezeSettings(),t=(function(a,u,h,m){return new $I(a,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Q_(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new iC(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(Pt.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ka(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:pt("string",Zn._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ys._jsonSchemaVersion}}static fromJSON(e){if(Ka(e,ys._jsonSchema))return new ys(e.latitude,e.longitude)}}ys._jsonSchemaVersion="firestore/geoPoint/1.0",ys._jsonSchema={type:pt("string",ys._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==a[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ka(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _s(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:pt("string",_s._jsonSchemaVersion),vectorValues:pt("object")};const fC=new RegExp("[~\\*/\\[\\]]");function pC(s,e,t){if(e.search(fC)>=0)throw Qg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new Y_(...e.split("."))._internalPath}catch{throw Qg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function Qg(s,e,t,i,a){let u=`Function ${e}() called with invalid data`;u+=". ";let h="";return new de(Z.INVALID_ARGUMENT,u+s+h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t,i,a,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mC extends J_{data(){return super.data()}}function Z_(s,e){return typeof e=="string"?pC(s,e):e instanceof Y_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yC{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Qa(e,((a,u)=>{i[a]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[ud].arrayValue?.values?.map((i=>ot(i.doubleValue)));return new _s(t)}convertGeoPoint(e){return new ys(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=tc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const t=Es(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);Ze(x_(i),9688,{name:e});const a=new Ua(i.get(1),i.get(3)),u=new ye(i.popFirst(5));return a.isEqual(t)||Rr(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ri extends J_{constructor(e,t,i,a,u,h){super(e,t,i,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Z_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ri._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",ri._jsonSchema={type:pt("string",ri._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class xu extends ri{data(e={}){return super.data(e)}}class co{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ka(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new xu(this._firestore,this._userDataWriter,i.key,i,new ka(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map((m=>{const g=new xu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ka(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new xu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ka(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,T=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:_C(m.type),doc:g,oldIndex:v,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Md.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _C(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:s})}}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:pt("string",co._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class ev extends yC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function vC(s,...e){s=Dn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Kg(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Kg(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let u,h,m;if(s instanceof qt)h=ku(s.firestore,Sd),m=Bd(s._key.path),u={next:g=>{e[i]&&e[i](EC(h,s,g))},error:e[i+1],complete:e[i+2]};else{const g=ku(s,uc);h=ku(g.firestore,Sd),m=g._query;const v=new ev(h);u={next:T=>{e[i]&&e[i](new co(h,v,g,T))},error:e[i+1],complete:e[i+2]},gC(s._query)}return(function(v,T,k,D){const z=new sC(D),$=new $1(T,z,k);return v.asyncQueue.enqueueAndForget((async()=>U1(await jg(v),$))),()=>{z.Nu(),v.asyncQueue.enqueueAndForget((async()=>z1(await jg(v),$)))}})(hC(h),m,a,u)}function EC(s,e,t){const i=t.docs.get(e._key),a=new ev(s);return new ri(s,a,e._key,i,new ka(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){So=a})(To),ho(new ii("firestore",((i,{instanceIdentifier:a,options:u})=>{const h=i.getProvider("app").getImmediate(),m=new Sd(new EI(i.getProvider("auth-internal")),new II(h,i.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(v.options.projectId,T)})(h,a),h);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ms(Jm,Zm,e),ms(Jm,Zm,"esm2020")})();const wC={apiKey:"AIzaSyCU8gB21qsHCJ4oHniFJkN4KrIVyiz-t8w",authDomain:"fgcbrasil-banco.firebaseapp.com",projectId:"fgcbrasil-banco",storageBucket:"fgcbrasil-banco.firebasestorage.app",messagingSenderId:"891150279225",appId:"1:891150279225:web:e08068726d02da2abc23e8",measurementId:"G-5BEK0HGZ6W"},tv=cy(wC),Gu=gI(tv),TC=cC(tv),nv=Q.createContext(),Zt=()=>Q.useContext(nv),IC=({children:s})=>{const[e,t]=Q.useState(null),[i,a]=Q.useState(null),[u,h]=Q.useState(!0);Q.useEffect(()=>{const g=sT(Gu,v=>{if(t(v),v){const T=uC(TC,"users",v.uid),k=vC(T,D=>{D.exists()?a(D.data()):a(null),h(!1)},D=>{console.error("onSnapshot Erro:",D),a(null),h(!1)});return()=>k()}else a(null),h(!1)});return()=>g()},[]);const m={user:e,userData:i,loading:u};return _.createElement(nv.Provider,{value:m},s)};function SC(){const[s,e]=Q.useState("home"),{user:t,userData:i,loading:a}=Zt();if(a)return _.createElement(xn,{text:"Carregando Autenticao..."});const u=()=>{if(t&&i)switch(s){case"dashboard":return _.createElement(wa,{setPage:e});case"ranking":return _.createElement($C,{setPage:e});case"championships":return _.createElement(HC,{setPage:e});case"streamers":return i.tipo==="f"?_.createElement(VC,{setPage:e}):_.createElement(wa,{setPage:e});case"misses":return i.tipo==="f"?_.createElement(UC,{setPage:e}):_.createElement(wa,{setPage:e});case"rifa":return _.createElement(MC,{setPage:e});case"admin":return i.admin===!0&&i.tipo==="admin"?_.createElement(WC,{setPage:e}):_.createElement(wa,{setPage:e});default:return _.createElement(wa,{setPage:e})}else return t&&!i?_.createElement(xn,{text:"Finalizando registro..."}):_.createElement(bC,{setPage:e})};return _.createElement("div",{className:"min-h-screen bg-brand-dark text-brand-light font-sans relative"},_.createElement(NC,null),_.createElement(xC,null),_.createElement(AC,{setPage:e}),_.createElement("main",{className:"container mx-auto p-4 md:p-8 px-12 lg:px-48"},u()))}function CC(){return _.createElement(IC,null,_.createElement(SC,null))}function AC({setPage:s}){const{user:e,userData:t}=Zt(),i=async()=>{await iT(Gu),s("login")},a=()=>!e||!t?_.createElement(_t,{primary:!0,onClick:()=>s("login")},"Login / Registro"):t.admin===!0&&t.tipo==="admin"?_.createElement(_.Fragment,null,_.createElement($t,{onClick:()=>s("dashboard")},"Dashboard"),_.createElement($t,{onClick:()=>s("championships")},"Organizaes"),_.createElement($t,{onClick:()=>s("ranking")},"Ranking"),_.createElement($t,{onClick:()=>s("rifa")},"Rifa"),_.createElement($t,{onClick:()=>s("admin")},_.createElement("span",{className:"text-teal-300 font-bold"},"Admin")),_.createElement(_t,{onClick:i},"Sair")):t.tipo==="jogador"||t.tipo==="organizador"?_.createElement(_.Fragment,null,_.createElement($t,{onClick:()=>s("dashboard")},"Dashboard"),_.createElement($t,{onClick:()=>s("championships")},"Organizaes"),_.createElement($t,{onClick:()=>s("ranking")},"Ranking"),_.createElement($t,{onClick:()=>s("rifa")},"Rifa"),_.createElement(_t,{onClick:i},"Sair")):t.tipo==="f"?_.createElement(_.Fragment,null,_.createElement($t,{onClick:()=>s("dashboard")},"Dashboard"),_.createElement($t,{onClick:()=>s("championships")},"Organizaes"),_.createElement($t,{onClick:()=>s("streamers")},"Streamers"),_.createElement($t,{onClick:()=>s("misses")},"Misses"),_.createElement($t,{onClick:()=>s("ranking")},"Ranking"),_.createElement($t,{onClick:()=>s("rifa")},"Rifa"),_.createElement(_t,{onClick:i},"Sair")):_.createElement(_t,{onClick:i},"Sair");return _.createElement("nav",{className:"bg-gray-800 shadow-lg sticky top-0 z-50"},_.createElement("div",{className:"container mx-auto px-4 md:px-8"},_.createElement("div",{className:"flex justify-between items-center h-20"},_.createElement("div",{className:"text-2xl font-bold text-white cursor-pointer",onClick:()=>s(e?"dashboard":"home")},_.createElement("span",{className:"text-purple-400"},"FGC"),"Brasil"),_.createElement("div",{className:"flex items-center space-x-4"},a()))))}const $t=({children:s,onClick:e})=>_.createElement("button",{onClick:e,className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition"},s),at=({label:s,type:e="text",...t})=>_.createElement("div",{className:"mb-4"},s&&_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},s),_.createElement("input",{type:e,...t,className:`w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 ${t.className||""}`})),Eo=({label:s,children:e,...t})=>_.createElement("div",{className:"mb-4"},_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},s),_.createElement("select",{...t,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},e)),_t=({children:s,primary:e=!1,...t})=>_.createElement("button",{...t,className:`font-bold py-2 px-4 rounded-lg transition duration-300 shadow-md w-full disabled:opacity-50 ${e?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700":"bg-gray-600 text-gray-200 hover:bg-gray-500"}`},s),Xh=({title:s,value:e,subtitle:t=""})=>_.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg text-center"},_.createElement("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider"},s),_.createElement("p",{className:"text-4xl font-extrabold text-white mt-2"},e),t&&_.createElement("p",{className:"text-gray-500 text-sm mt-1"},t)),xn=({text:s="Carregando..."})=>_.createElement("div",{className:"flex flex-col items-center justify-center h-screen bg-brand-dark"},_.createElement("div",{className:"w-12 h-12 border-4 border-t-purple-500 border-gray-700 rounded-full animate-spin"}),_.createElement("p",{className:"mt-4 text-lg text-gray-400"},s)),wu=({title:s,isActive:e,onClick:t})=>_.createElement("button",{onClick:t,className:`py-3 px-6 font-semibold transition text-center ${e?"border-b-2 border-purple-500 text-white":"text-gray-500 hover:text-gray-300 border-b-2 border-transparent"}`},s),kC=({label:s,...e})=>_.createElement("div",{className:"mb-4"},s&&_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},s),_.createElement("textarea",{...e,className:`w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 ${e.className||""}`}));function rv({label:s,players:e,selectedPlayers:t,onSelect:i,onDeselect:a}){const[u,h]=Q.useState(""),m=e.filter(g=>{const v=!t.find(k=>k.id===g.id),T=g.nome.toLowerCase().includes(u.toLowerCase())||g.id.toLowerCase().includes(u.toLowerCase());return v&&T});return _.createElement("div",{className:"mb-4"},_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},s),_.createElement("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-700 rounded-t-lg border-b border-gray-600 min-h-[40px]"},t.length===0&&_.createElement("span",{className:"text-sm text-gray-500 italic px-2 py-1"},"Nenhum jogador selecionado..."),t.map(g=>_.createElement("span",{key:g.id,className:"flex items-center bg-purple-600 text-white text-sm font-medium px-3 py-1 rounded-full cursor-pointer",onClick:()=>a(g)},g.nome,_.createElement("span",{className:"ml-2 text-purple-200 hover:text-white font-bold"},"")))),_.createElement(at,{type:"text",placeholder:"Buscar por nome ou ID...",value:u,onChange:g=>h(g.target.value),className:"rounded-t-none"}),u&&_.createElement("div",{className:"max-h-48 overflow-y-auto bg-gray-700 border border-gray-600 rounded-b-lg shadow-lg"},m.length===0&&_.createElement("p",{className:"text-gray-400 text-sm p-3"},"Nenhum jogador encontrado."),m.map(g=>_.createElement("div",{key:g.id,className:"p-3 hover:bg-purple-700 cursor-pointer text-sm",onClick:()=>{i(g),h("")}},g.nome," ",_.createElement("span",{className:"text-gray-400"},"(",g.id,")")))))}function RC({onClose:s}){return _.createElement("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:s},_.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation()},_.createElement("div",{className:"flex justify-between items-center mb-4"},_.createElement("h2",{className:"text-3xl font-bold text-white"},"Custos Operacionais"),_.createElement("button",{onClick:s,className:"text-gray-400 hover:text-white text-3xl font-bold"},"")),_.createElement("div",{className:"space-y-4 text-gray-300"},_.createElement("p",null,"Manter uma plataforma como a FGC Brasil ativa 24/7 envolve custos reais. Queremos ser 100% transparentes sobre para onde vai o apoio da comunidade:"),_.createElement("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-gray-700 p-4 rounded-lg"},_.createElement("img",{src:"https://placehold.co/200x150/1a202c/6f42c1?text=Servidor+Cloud",alt:"Servidor",className:"w-full md:w-1/3 h-auto object-cover rounded-lg"}),_.createElement("div",{className:"flex-1"},_.createElement("h4",{className:"text-xl font-semibold text-white"},"Servidor e Banco de Dados"),_.createElement("p",{className:"text-sm"},"Usamos o Firebase para garantir que os rankings sejam em tempo real. Isso inclui custos de hospedagem (backend), banco de dados (Firestore) e autenticao de usurios."))),_.createElement("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-gray-700 p-4 rounded-lg"},_.createElement("img",{src:"https://placehold.co/200x150/1a202c/20c997?text=Manuten%C3%A7%C3%A3o",alt:"Desenvolvimento",className:"w-full md:w-1/3 h-auto object-cover rounded-lg"}),_.createElement("div",{className:"flex-1"},_.createElement("h4",{className:"text-xl font-semibold text-white"},"Desenvolvimento e Manuteno"),_.createElement("p",{className:"text-sm"},"Novas funcionalidades (como a Pgina de Rifas, Misses) e a correo de bugs exigem horas de desenvolvimento contnuo para manter a plataforma moderna e segura."))),_.createElement("p",{className:"mt-4 text-center"},"Cada doao de F ajuda a cobrir esses custos e a manter a comunidade crescendo!"))))}function PC({onOpenModal:s}){return _.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col items-center text-center"},_.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Transparncia da Plataforma"),_.createElement("p",{className:"text-gray-400 mb-6"},"A FGC Brasil  um projeto mantido pela comunidade. Veja como seu apoio  fundamental para mantermos as luzes acesas e os rankings atualizados."),_.createElement(_t,{primary:!0,onClick:s},"Clique para saber os detalhes"))}function NC(){return _.createElement("div",{className:"fixed left-4 top-1/2 -translate-y-1/2 z-40"},_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer"},_.createElement("img",{src:"/assets/patrocinador1.jpg",alt:"Patrocinador 1",className:"w-24 lg:w-40 h-auto object-contain rounded-lg shadow-lg"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"mt-6 block"},_.createElement("img",{src:"/assets/patrocinador2.jpg",alt:"Patrocinador 2",className:"w-24 lg:w-40 h-auto object-contain rounded-lg shadow-lg"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"mt-6 block"},_.createElement("img",{src:"/assets/patrocinador3.jpg",alt:"Patrocinador 3",className:"w-24 lg:w-40 h-auto object-contain rounded-lg shadow-lg"})))}function xC(){return _.createElement("div",{className:"fixed right-4 top-1/2 -translate-y-1/2 z-40"},_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer"},_.createElement("img",{src:"/assets/patrocinador3.jpg",alt:"Patrocinador 3",className:"w-24 lg:w-40 h-auto object-contain rounded-lg shadow-lg"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"mt-6 block"},_.createElement("img",{src:"/assets/patrocinador4.jpg",alt:"Patrocinador 4",className:"w-24 lg:w-40 h-auto object-contain rounded-lg shadow-lg"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"mt-6 block"},_.createElement("img",{src:"/assets/patrocinador4.jpg",alt:"Patrocinador 4",className:"w-24 lg:w-40 h-auto object-contain rounded-lg shadow-lg"})))}function Xg(){return _.createElement("div",{className:"mt-12 pt-8 border-t border-gray-700"},_.createElement("h3",{className:"text-xl font-semibold text-center text-gray-400 mb-6"},"Nossos Patrocinadores"),_.createElement("div",{className:"flex flex-wrap justify-center lg:justify-around items-center gap-6"},_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",title:"Patrocinador 1"},_.createElement("img",{src:"/assets/patrocinador1.jpg",alt:"Patrocinador Rifa 1",className:"h-16 lg:h-20 w-auto object-contain"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",title:"Patrocinador 2"},_.createElement("img",{src:"/assets/patrocinador1.jpg",alt:"Patrocinador Rifa 2",className:"h-16 lg:h-20 w-auto object-contain"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",title:"Patrocinador 3"},_.createElement("img",{src:"/assets/patrocinador1.jpg",alt:"Patrocinador Rifa 3",className:"h-16 lg:h-20 w-auto object-contain"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",title:"Patrocinador 4"},_.createElement("img",{src:"/assets/patrocinador1.jpg",alt:"Patrocinador Rifa 4",className:"h-16 lg:h-20 w-auto object-contain"})),_.createElement("a",{href:"#",target:"_blank",rel:"noopener noreferrer",title:"Patrocinador 4"},_.createElement("img",{src:"/assets/patrocinador1.jpg",alt:"Patrocinador Rifa 4",className:"h-16 lg:h-20 w-auto object-contain"}))))}function DC({label:s,users:e,selectedUser:t,onSelect:i}){const[a,u]=Q.useState(""),[h,m]=Q.useState(!1),g=a?e.filter(T=>T.nome&&T.nome.toLowerCase().includes(a.toLowerCase())||T.id&&T.id.toLowerCase().includes(a.toLowerCase())):e,v=e.find(T=>T.id===t)?.nome||"Selecione um usurio...";return _.createElement("div",{className:"mb-4 relative"},_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},s),_.createElement("div",{className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer",onClick:()=>m(!h)},v),h&&_.createElement("div",{className:"absolute z-10 w-full mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto"},_.createElement("div",{className:"p-2 border-b border-gray-600"},_.createElement(at,{type:"text",placeholder:"Buscar por nome ou ID...",value:a,onChange:T=>u(T.target.value),autoFocus:!0})),_.createElement("div",null,g.length===0&&_.createElement("p",{className:"text-gray-400 p-3"},"Nenhum usurio encontrado."),g.map(T=>_.createElement("div",{key:T.id,className:"p-3 hover:bg-purple-700 cursor-pointer text-sm",onClick:()=>{i(T.id),m(!1),u("")}},T.nome," ",_.createElement("span",{className:"text-gray-400"},"(",T.id,")"))))))}function Yg(s){switch(s){case"auth/user-not-found":return"Usurio no encontrado.";case"auth/wrong-password":return"Senha incorreta.";case"auth/email-already-in-use":return"Este e-mail j est em uso.";case"auth/weak-password":return"Senha muito fraca.";case"auth/invalid-email":return"E-mail invlido.";default:return"Ocorreu um erro."}}function bC({setPage:s}){const[e,t]=Q.useState(!0),[i,a]=Q.useState(""),[u,h]=Q.useState(""),[m,g]=Q.useState(""),[v,T]=Q.useState("jogador"),[k,D]=Q.useState(""),z=async $=>{if($.preventDefault(),D(""),e)try{await tT(Gu,i,u),s("dashboard")}catch(G){D(Yg(G.code))}else{if(!m){D("Por favor, informe seu nome ou nick.");return}try{const B=(await eT(Gu,i,u)).user;await fetch("http://localhost:3001/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:B.uid,email:B.email,nome:m,tipo:v})}),s("dashboard")}catch(G){D(Yg(G.code))}}};return _.createElement("div",{className:"max-w-md mx-auto mt-10 bg-gray-800 p-8 rounded-xl shadow-2xl shadow-purple-500/20"},_.createElement("h2",{className:"text-3xl font-bold text-center text-white mb-6"},e?"Entrar na Plataforma":"Criar Conta"),_.createElement("form",{onSubmit:z},!e&&_.createElement(_.Fragment,null,_.createElement(at,{label:"Nome / Nick",type:"text",value:m,onChange:$=>g($.target.value)}),_.createElement("div",{className:"mb-4"},_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Eu sou:"),_.createElement("select",{value:v,onChange:$=>T($.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"},_.createElement("option",{value:"jogador"},"Jogador"),_.createElement("option",{value:"f"},"F / Espectador"),_.createElement("option",{value:"organizador"},"Organizador")," "))),_.createElement(at,{label:"Email",type:"email",value:i,onChange:$=>a($.target.value)}),_.createElement(at,{label:"Senha",type:"password",value:u,onChange:$=>h($.target.value)}),k&&_.createElement("p",{className:"text-red-400 text-sm text-center mb-4"},k),_.createElement("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:from-purple-700 hover:to-indigo-700 transition duration-300 shadow-lg"},e?"Login":"Registrar")),_.createElement("button",{onClick:()=>t(!e),className:"w-full mt-4 text-sm text-center text-gray-400 hover:text-white transition"},e?"No tem conta? Cadastre-se":"J tem conta? Faa login"))}const OC=[{id:"s1",nome:"Baiano",img:"https://static-cdn.jtvnw.net/jtv_user_pictures/a73b53f6-2611-4efa-b74c-4e8992f0c78a-profile_image-300x300.png",games:["LoL","TFT"],twitch:"https://www.twitch.tv/baiano",insta:"https://www.instagram.com/baianolol"},{id:"s2",nome:"Gaules",img:"https://static-cdn.jtvnw.net/jtv_user_pictures/f4b12683-57ff-4b57-9d36-601439e767e3-profile_image-300x300.png",games:["CS2","F1"],twitch:"https://www.twitch.tv/gaules",insta:"https://www.instagram.com/gaules"},{id:"s3",nome:"Coringa",img:"https://static-cdn.jtvnw.net/jtv_user_pictures/c6e3b08e-329b-4e08-8f81-f2f01f8101d2-profile_image-300x300.png",games:["GTA RP","LoL"],twitch:"https://www.twitch.tv/loud_coringa",insta:"https://www.instagram.com/loud_coringa"}];function VC(){const s=({href:e,children:t,className:i})=>_.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:`font-bold py-2 px-4 rounded-lg transition duration-300 shadow-md w-full text-center ${i}`},t);return _.createElement("div",{className:"animate-fade-in"},_.createElement("h1",{className:"text-4xl font-bold mb-8"},"Streamers da Comunidade"),_.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},OC.map(e=>_.createElement("div",{key:e.id,className:"bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col"},_.createElement("img",{src:e.img,alt:e.nome,className:"w-full h-48 object-cover"}),_.createElement("div",{className:"p-4 flex flex-col flex-grow"},_.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},e.nome),_.createElement("div",{className:"flex gap-2 mb-4"},e.games.map(t=>_.createElement("span",{key:t,className:"bg-purple-600 text-xs text-white px-2 py-1 rounded-full font-semibold"},t))),_.createElement("div",{className:"mt-auto flex gap-2"},_.createElement(s,{href:e.twitch,className:"bg-purple-700 text-white hover:bg-purple-600"},"Twitch"),_.createElement(s,{href:e.insta,className:"bg-pink-600 text-white hover:bg-pink-500"},"Instagram")))))))}function LC({onParticipanteAdded:s,allUsers:e}){const{user:t}=Zt(),[i,a]=Q.useState(""),[u,h]=Q.useState(!1),[m,g]=Q.useState(""),v=async T=>{if(T.preventDefault(),!i){g("Erro: Voc deve selecionar um usurio.");return}h(!0),g("");try{const k=await t.getIdToken(),D=await fetch("http://localhost:3001/api/rifa/add-participante",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({jogadorId:i})}),z=await D.json();if(!D.ok)throw new Error(z.error||"Erro ao adicionar");g(z.message),a(""),s()}catch(k){g(`Erro: ${k.message}`)}h(!1)};return _.createElement("form",{onSubmit:v,className:"bg-gray-700 p-4 rounded-lg mb-6"},_.createElement("h4",{className:"text-lg font-semibold text-white mb-3"},"Adicionar Cota (N Automtico)"),m&&_.createElement("p",{className:`text-center mb-2 text-sm ${m.startsWith("Erro")?"text-red-400":"text-teal-300"}`},m),_.createElement(DC,{label:"Comprador",users:e,selectedUser:i,onSelect:a}),_.createElement(_t,{primary:!0,type:"submit",disabled:u||e.length===0},u?"Adicionando...":"Adicionar Cota"))}function MC(){const{user:s,userData:e}=Zt(),[t,i]=Q.useState(null),[a,u]=Q.useState([]),[h,m]=Q.useState(!0),[g,v]=Q.useState(""),T=e?.admin===!0&&e?.tipo==="admin",k=async()=>{v("");try{const z=await fetch("http://localhost:3001/api/rifa/atual"),$=await z.json();if(z.ok)$.participantes&&$.participantes.sort((G,B)=>G.numero-B.numero),i($);else throw new Error($.error||"Erro ao buscar rifa")}catch(z){v(z.message)}m(!1)};Q.useEffect(()=>{k(),T&&(async()=>{try{const $=await s.getIdToken(),G=await fetch("http://localhost:3001/api/users/all",{headers:{Authorization:`Bearer ${$}`}}),B=await G.json();G.ok&&u(B)}catch($){console.error("Erro ao buscar usurios:",$)}})()},[T,s]);const D=async()=>{if(window.confirm("Voc tem CERTEZA que quer apagar TODAS as cotas desta rifa? Esta ao  irreversvel.")){m(!0);try{const z=await s.getIdToken(),$=await fetch("http://localhost:3001/api/rifa/reset",{method:"DELETE",headers:{Authorization:`Bearer ${z}`}}),G=await $.json();if(!$.ok)throw new Error(G.error||"Erro ao resetar");alert(G.message),k()}catch(z){alert(`Erro: ${z.message}`)}m(!1)}};return h?_.createElement(xn,{text:"Carregando Rifa..."}):g||!t?_.createElement("div",{className:"animate-fade-in max-w-2xl mx-auto"},_.createElement("h1",{className:"text-4xl font-bold mb-8 text-center"},"Pgina da Rifa"),_.createElement("div",{className:"bg-gray-800 p-10 rounded-xl shadow-lg text-center"},_.createElement("h3",{className:"text-2xl font-semibold text-white mb-4"},"Nenhuma Rifa Ativa"),_.createElement("p",{className:"text-gray-300"},g||"No h nenhuma rifa ativa no momento. Volte mais tarde!"),T&&_.createElement("p",{className:"text-teal-300 mt-4 italic"},'Admin: Para ativar a rifa, crie um documento com o ID "atual" na coleo "rifas" do Firestore.')),_.createElement(Xg,null)):_.createElement("div",{className:"animate-fade-in"},_.createElement("h1",{className:"text-4xl font-bold mb-8 text-center"},t.titulo),_.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},_.createElement("div",{className:"lg:col-span-2 space-y-8"},_.createElement("div",{className:"bg-gray-800 rounded-xl shadow-lg overflow-hidden"},_.createElement("img",{src:t.imagemUrl||"https://placehold.co/800x400/1a202c/6f42c1?text=Imagem+da+Rifa",alt:"Prmio da Rifa",className:"w-full h-64 object-cover"}),_.createElement("div",{className:"p-6"},_.createElement("h3",{className:"text-2xl font-semibold text-white mb-4"},"Sobre o Prmio"),_.createElement("p",{className:"text-gray-300 whitespace-pre-line"},t.descricao||"Descrio do prmio..."))),_.createElement("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6"},_.createElement("h3",{className:"text-2xl font-semibold text-white mb-4"},"Como Participar"),_.createElement("div",{className:"flex flex-col md:flex-row gap-4 items-center"},_.createElement("img",{src:t.qrCodeUrl||"https://placehold.co/200x200/ffffff/000000?text=QR+Code+PIX",alt:"QR Code PIX",className:"w-48 h-48 rounded-lg"}),_.createElement("p",{className:"text-gray-300 whitespace-pre-line flex-1"},t.pagamentoDesc||"Instrues de pagamento...")))),_.createElement("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 flex flex-col"},_.createElement("h3",{className:"text-2xl font-semibold text-white mb-4"},"Cotas Compradas"),T&&_.createElement(LC,{onParticipanteAdded:k,allUsers:a}),_.createElement("div",{className:"max-h-96 lg:max-h-[600px] overflow-y-auto mt-4 border border-gray-700 rounded-lg flex-grow"},t.participantes.length===0&&_.createElement("p",{className:"text-gray-400 p-4 text-center italic"},"Nenhuma cota comprada ainda. Seja o primeiro!"),_.createElement("ul",{className:"divide-y divide-gray-700"},t.participantes.map(z=>_.createElement("li",{key:`${z.numero}-${z.nome}`,className:"flex justify-between items-center p-3"},_.createElement("span",{className:"text-sm font-medium text-gray-400 bg-gray-900 px-2 py-0.5 rounded-md"},"N ",z.numero),_.createElement("span",{className:"text-lg font-semibold text-white truncate ml-2"},z.nome))))),T&&_.createElement("div",{className:"mt-4"},_.createElement(_t,{onClick:D,className:"bg-red-700 text-white hover:bg-red-600 w-full",disabled:h},"Resetar Rifa (Limpar Cotas)")))),_.createElement(Xg,null))}function FC({mission:s,onComplete:e}){const{user:t}=Zt(),[i,a]=Q.useState(sessionStorage.getItem(s.id)==="true"),[u,h]=Q.useState(!1),[m,g]=Q.useState(""),[v,T]=Q.useState(""),k=()=>{sessionStorage.setItem(s.id,"true"),a(!0),window.open(s.url,"_blank")},D=async()=>{h(!0),g(""),T("");try{const z=await t.getIdToken(),$=await fetch("http://localhost:3001/api/missions/complete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({missionId:s.id})}),G=await $.json();if(!$.ok)throw new Error(G.error||"Erro ao confirmar");T(G.message),sessionStorage.removeItem(s.id),setTimeout(e,1500)}catch(z){g(z.message)}h(!1)};return v?_.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg border-2 border-teal-500"},_.createElement("h3",{className:"text-xl font-semibold text-teal-300 mb-2"},s.titulo),_.createElement("p",{className:"text-lg text-white text-center font-bold"},v)):_.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg"},_.createElement("h3",{className:"text-xl font-semibold text-white mb-2"},s.titulo),_.createElement("p",{className:"text-gray-400 mb-4"},"Recompensa: ",_.createElement("span",{className:"text-teal-300 font-bold"},s.xpRecompensa," XP")),m&&_.createElement("p",{className:"text-red-400 text-sm mb-2"},m),_.createElement("div",{className:"flex flex-col sm:flex-row gap-2"},_.createElement(_t,{onClick:k,className:"bg-purple-600 text-white hover:bg-purple-500 flex-1"},"Ir para a Misso"),i&&_.createElement(_t,{primary:!0,onClick:D,disabled:u,className:"flex-1"},u?"Confirmando...":"Confirmo que cumpri a misso")))}function UC(){const{user:s,userData:e}=Zt(),[t,i]=Q.useState([]),[a,u]=Q.useState(!0),[h,m]=Q.useState(""),g=async()=>{u(!0),m("");try{const T=await fetch("http://localhost:3001/api/missions"),k=await T.json();if(T.ok)i(k);else throw new Error(k.error||"Erro ao buscar misses")}catch(T){m(T.message)}u(!1)};Q.useEffect(()=>{g()},[]);const v=t.filter(T=>!e.missoesCompletas?.includes(T.id));return a?_.createElement(xn,{text:"Buscando Misses..."}):h?_.createElement("p",{className:"text-red-400 text-center"},h):_.createElement("div",{className:"animate-fade-in max-w-2xl mx-auto"},_.createElement("h1",{className:"text-4xl font-bold mb-8"},"Misses de F"),_.createElement("div",{className:"space-y-4"},v.length===0&&_.createElement("div",{className:"bg-gray-800 p-10 rounded-xl shadow-lg text-center"},_.createElement("h3",{className:"text-2xl font-semibold text-white mb-4"},"Nenhuma Misso Nova!"),_.createElement("p",{className:"text-gray-300"},"Voc j completou todas as misses disponveis. Volte mais tarde!")),v.map(T=>_.createElement(FC,{key:T.id,mission:T,onComplete:g}))))}function wa({setPage:s}){const{userData:e}=Zt(),[t,i]=Q.useState(!1);if(!e)return _.createElement(xn,null);const a=()=>{switch(e.tipo){case"jogador":return _.createElement(jC,null);case"f":return _.createElement(BC,null);case"organizador":return _.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg"},_.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Dashboard de Organizador"),_.createElement("p",{className:"text-gray-400 mb-6"},"Bem-vindo! Voc pode ver os rankings e as organizaes."));case"admin":return _.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg"},_.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Dashboard de Admin Global"),_.createElement("p",{className:"text-gray-400 mb-6"},'V para a pgina de "Admin" para gerenciar toda a plataforma.'),_.createElement(_t,{primary:!0,onClick:()=>s("admin")},"Ir para o Painel Admin"));default:return null}};return _.createElement("div",{className:"animate-fade-in"},_.createElement("h1",{className:"text-4xl font-bold mb-2"},"Bem-vindo, ",e.nome,"!"),_.createElement("p",{className:"text-xl text-gray-400 mb-8"},"Seu dashboard de ",e.tipo,"."),_.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},_.createElement(Xh,{title:"Seu XP Total",value:e.xpTotal.toFixed(2)}),_.createElement(Xh,{title:"Ranking (Global)",value:"#N/A",subtitle:"Em breve"}),_.createElement(Xh,{title:e.tipo==="jogador"?"Campeonatos":"Contribuies",value:e.tipo==="jogador"?e.campeonatosParticipados.length:e.contribuicoes?e.contribuicoes.length:0})),_.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},_.createElement("div",{className:"lg:col-span-2"},a()),_.createElement("div",{className:"lg:col-span-1 space-y-6"}," ",_.createElement(PC,{onOpenModal:()=>i(!0)}),_.createElement(zC,null)," ")),t&&_.createElement(RC,{onClose:()=>i(!1)}))}function zC(){const{user:s}=Zt(),[e,t]=Q.useState(""),[i,a]=Q.useState(""),[u,h]=Q.useState(!1),[m,g]=Q.useState(""),v=async T=>{T.preventDefault(),h(!0),g("");try{const k=await s.getIdToken(),D=await fetch("http://localhost:3001/api/support/send-ticket",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({subject:e,message:i})}),z=await D.json();if(!D.ok)throw new Error(z.error||"Erro ao enviar");g(z.message),t(""),a("")}catch(k){g(`Erro: ${k.message}`)}h(!1)};return _.createElement("form",{onSubmit:v,className:"bg-gray-800 p-6 rounded-xl shadow-lg"},_.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Fale com a Administrao"),m&&_.createElement("p",{className:`text-center mb-4 text-sm ${m.startsWith("Erro")?"text-red-400":"text-teal-300"}`},m),_.createElement(at,{label:"Assunto",type:"text",value:e,onChange:T=>t(T.target.value),required:!0}),_.createElement(kC,{label:"Mensagem",value:i,onChange:T=>a(T.target.value),required:!0,rows:"4",placeholder:"Descreva seu problema ou sugesto..."}),_.createElement(_t,{primary:!0,type:"submit",disabled:u},u?"Enviando...":"Enviar Mensagem"))}function jC(){return _.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg"},_.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Aes de Jogador"),_.createElement("p",{className:"text-gray-400 mb-6"},"Aguarde o Admin lanar seus resultados."))}function BC(){const[s,e]=Q.useState(10),[t,i]=Q.useState(!1),[a,u]=Q.useState(""),{user:h}=Zt(),m=async()=>{i(!0),u("");try{const g=await h.getIdToken(),v=await fetch("http://localhost:3001/api/contributions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify({valor:Number(s)})}),T=await v.json();if(!v.ok)throw new Error(T.error||"Erro ao contribuir");u(T.message),e(10)}catch(g){u(`Erro: ${g.message}`)}i(!1)};return _.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg"},_.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Apoie a Cena!"),_.createElement("p",{className:"text-gray-400 mb-6"},"Faa uma doao e ganhe XP de F. (R$ 1 = 10 XP)"),a&&_.createElement("p",{className:"text-center text-teal-300 mb-4"},a),_.createElement("div",{className:"flex flex-col md:flex-row items-center gap-4"},_.createElement(at,{label:"Valor (R$)",type:"number",value:s,onChange:g=>e(g.target.value),min:"5"}),_.createElement(_t,{primary:!0,onClick:m,disabled:t},t?"Processando...":`Contribuir R$ ${s}`)))}function $C({setPage:s}){const[e,t]=Q.useState([]),[i,a]=Q.useState([]),[u,h]=Q.useState(!0),[m,g]=Q.useState("");if(Q.useEffect(()=>{(async()=>{h(!0),g("");try{const k=await fetch("http://localhost:3001/api/ranking"),D=await k.json();if(k.ok)t(D.players),a(D.fans);else throw new Error(D.error||"Erro ao buscar ranking")}catch(k){g(k.message)}h(!1)})()},[]),u)return _.createElement(xn,{text:"Carregando Rankings..."});if(m)return _.createElement("div",{className:"animate-fade-in max-w-2xl mx-auto"},_.createElement("h1",{className:"text-4xl font-bold mb-8"},"Rankings da Comunidade"),_.createElement("div",{className:"bg-gray-800 p-10 rounded-xl shadow-lg text-center"},_.createElement("h3",{className:"text-2xl font-semibold text-red-400 mb-4"},"Erro ao Carregar"),_.createElement("p",{className:"text-gray-300"},m),_.createElement("p",{className:"text-gray-400 mt-4 italic"},'(Se este for um erro de "ndice", verifique o terminal do seu **backend** para a URL de correo.)')));const v=({data:T,title:k})=>_.createElement("div",{className:"bg-gray-800 shadow-2xl rounded-xl overflow-hidden"},_.createElement("h3",{className:"text-2xl font-semibold text-white p-4"},k),_.createElement("table",{className:"w-full text-left"},_.createElement("thead",{className:"bg-gray-700"},_.createElement("tr",null,_.createElement("th",{className:"p-4 text-lg font-semibold"},"Pos."),_.createElement("th",{className:"p-4 text-lg font-semibold"},"Nome"),_.createElement("th",{className:"p-4 text-lg font-semibold"},"XP Total"))),_.createElement("tbody",null,T.length===0&&_.createElement("tr",null,_.createElement("td",{colSpan:"3",className:"p-4 text-center text-gray-400"},"Ningum classificado ainda.")),T.map(D=>_.createElement("tr",{key:D.jogadorId,className:"border-b border-gray-700 last:border-b-0 hover:bg-gray-700/50"},_.createElement("td",{className:"p-4 text-xl font-bold text-purple-400"},D.posicao),_.createElement("td",{className:"p-4 text-lg"},D.nome),_.createElement("td",{className:"p-4 text-lg font-medium text-teal-300"},D.xpTotal.toFixed(2)))))));return _.createElement("div",{className:"animate-fade-in"},_.createElement("h1",{className:"text-4xl font-bold mb-8"},"Rankings da Comunidade"),_.createElement("div",{className:"space-y-8"}," ",_.createElement(v,{title:"Ranking de Jogadores",data:e}),_.createElement(v,{title:"Ranking de Fs",data:i})))}function HC({setPage:s}){const[e,t]=Q.useState([]),[i,a]=Q.useState(!0),[u,h]=Q.useState(""),[m,g]=Q.useState(null);return Q.useEffect(()=>{(async()=>{a(!0),h("");try{const T=await fetch("http://localhost:3001/api/organizacoes"),k=await T.json();if(T.ok)t(k);else throw new Error(k.error||"Erro ao buscar organizaes")}catch(T){h(T.message)}a(!1)})()},[]),i?_.createElement(xn,{text:"Carregando Organizaes..."}):u?_.createElement("p",{className:"text-red-400 text-center"},u):_.createElement("div",{className:"animate-fade-in"},_.createElement("h1",{className:"text-4xl font-bold mb-8"},"Campeonatos"),e.length===0&&_.createElement("p",{className:"text-gray-400 text-center"},"Nenhuma organizao registrada ainda."),_.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},e.map(v=>_.createElement("div",{key:v.id,className:"bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-purple-500/30 transition duration-300 cursor-pointer",onClick:()=>g(v)},_.createElement("h3",{className:"text-2xl font-bold text-teal-300 mb-2"},v.nome),_.createElement("p",{className:"text-gray-300 mb-6 line-clamp-2"},v.descricao),_.createElement(_t,null,"Ver Campeonatos")))),m&&_.createElement(qC,{org:m,onClose:()=>g(null)}))}function qC({org:s,onClose:e}){const[t,i]=Q.useState([]),[a,u]=Q.useState(!0),[h,m]=Q.useState("");return Q.useEffect(()=>{(async()=>{u(!0),m("");try{const v=await fetch(`http://localhost:3001/api/organizacoes/${s.id}/championships`),T=await v.json();if(v.ok)i(T);else throw new Error(T.error||"Erro ao buscar campeonatos")}catch(v){m(v.message)}u(!1)})()},[s.id]),_.createElement("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:e},_.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:g=>g.stopPropagation()},_.createElement("div",{className:"flex justify-between items-center mb-4"},_.createElement("h2",{className:"text-3xl font-bold text-teal-300"},"Campeonatos de ",s.nome),_.createElement("button",{onClick:e,className:"text-gray-400 hover:text-white text-3xl font-bold"},"")),a&&_.createElement(xn,{text:"Buscando campeonatos..."}),h&&_.createElement("p",{className:"text-red-400 text-center"},h),!a&&!h&&_.createElement("div",{className:"flex flex-col gap-4"},t.length===0&&_.createElement("p",{className:"text-gray-400"},"Nenhum campeonato encontrado para esta organizao."),t.map(g=>_.createElement("div",{key:g.id,className:"bg-gray-700 p-4 rounded-lg"},_.createElement("h4",{className:"text-xl font-semibold text-white"},g.nome),_.createElement("p",{className:"text-sm text-gray-400 mb-2"},"Data: ",new Date(g.data.seconds*1e3).toLocaleDateString("pt-BR")," | XP: ",g.xpTotal),_.createElement("p",{className:"text-sm text-gray-300 mb-3"},g.descricao),_.createElement("h5",{className:"text-md font-semibold text-purple-300 mb-2"},"Resultados"),_.createElement("div",{className:"text-sm"},g.participantes.length===0&&_.createElement("p",{className:"text-gray-400 italic"},"Resultados ainda no lanados."),g.participantes.sort((v,T)=>v.posicao-T.posicao).map(v=>_.createElement("div",{key:v.jogadorId,className:"flex justify-between p-1 border-b border-gray-600 last:border-b-0"},_.createElement("span",{className:"text-gray-300"},v.posicao<=8?`${v.posicao}`:"9+"),_.createElement("span",{className:"text-teal-300"},"+",v.xpGanho.toFixed(2)," XP")))))))))}function WC(){const[s,e]=Q.useState("championships");return _.createElement("div",{className:"animate-fade-in max-w-2xl mx-auto"},_.createElement("h1",{className:"text-4xl font-bold mb-8"},"Painel de Administrao"),_.createElement("div",{className:"flex flex-wrap mb-6 border-b border-gray-700"},_.createElement(wu,{title:"Criar Campeonato",isActive:s==="championships",onClick:()=>e("championships")}),_.createElement(wu,{title:"Lanar Resultados",isActive:s==="results",onClick:()=>e("results")}),_.createElement(wu,{title:"Organizaes",isActive:s==="organizations",onClick:()=>e("organizations")}),_.createElement(wu,{title:"Registrar Patrocnio",isActive:s==="donations",onClick:()=>e("donations")})),_.createElement("div",null,s==="championships"&&_.createElement(GC,null),s==="donations"&&_.createElement(QC,null),s==="organizations"&&_.createElement(KC,null),s==="results"&&_.createElement("div",{className:"space-y-10"},_.createElement(XC,null),_.createElement("hr",{className:"border-gray-500 border-dashed"}),_.createElement(YC,null))))}function GC(){const{user:s,userData:e}=Zt(),[t,i]=Q.useState(""),[a,u]=Q.useState(""),[h,m]=Q.useState(new Date().toISOString().split("T")[0]),[g,v]=Q.useState(""),[T,k]=Q.useState(1e3),[D,z]=Q.useState(!1),[$,G]=Q.useState(""),[B,ne]=Q.useState(!1),[re,pe]=Q.useState([]),[Ee,ce]=Q.useState("");Q.useEffect(()=>{if(!e)return;(async()=>{try{if(e.admin===!0&&e.tipo!=="organizador"){ne(!0);const S=await fetch("http://localhost:3001/api/organizacoes"),I=await S.json();S.ok&&(pe(I),I.length>0&&(ce(I[0].id),k(I[0].xpBase||1e3)))}else if(e.tipo==="organizador"&&e.organizacaoId){const S=await fetch(`http://localhost:3001/api/organizacoes/${e.organizacaoId}`),I=await S.json();S.ok&&k(I.xpBase||1e3)}}catch(S){G(`Erro ao buscar dados da organizao: ${S.message}`)}})()},[e]),Q.useEffect(()=>{if(B&&re.length>0){const R=re.find(S=>S.id===Ee);R&&k(R.xpBase||1e3)}},[Ee,B,re]);const he=async R=>{if(R.preventDefault(),z(!0),G(""),B&&!Ee){G("Erro: Admin Global deve selecionar uma organizao."),z(!1);return}try{const S=await s.getIdToken(),I={nome:t,descricao:a,data:h,xpTotal:Number(g)>0?Number(g):null,organizadorId:B?Ee:null},P=await fetch("http://localhost:3001/api/championships",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(I)}),N=await P.json();if(!P.ok)throw new Error(N.error||"Erro ao criar campeonato");G(`Campeonato "${t}" criado com sucesso!`),i(""),u(""),v(""),m(new Date().toISOString().split("T")[0])}catch(S){G(`Erro: ${S.message}`)}z(!1)};return _.createElement("form",{onSubmit:he,className:"bg-gray-800 p-6 rounded-xl shadow-2xl"},_.createElement("h2",{className:"text-2xl font-semibold text-white mb-6"},"Novo Campeonato"),B?_.createElement(Eo,{label:"Criar para a Organizao:",value:Ee,onChange:R=>ce(R.target.value)},re.length===0&&_.createElement("option",null,"Carregando organizaes..."),re.map(R=>_.createElement("option",{key:R.id,value:R.id},R.nome))):_.createElement("p",{className:"text-sm text-gray-400 mb-4 -mt-4"},"Seu campeonato ser criado sob sua organizao."),_.createElement(at,{label:"Nome do Campeonato",type:"text",value:t,onChange:R=>i(R.target.value),required:!0}),_.createElement(at,{label:"Descrio",type:"text",value:a,onChange:R=>u(R.target.value)}),_.createElement(at,{label:"Data",type:"date",value:h,onChange:R=>m(R.target.value),required:!0}),_.createElement(at,{label:"XP Base (Opcional - Override)",type:"number",value:g,onChange:R=>v(R.target.value),min:"0",placeholder:`Automtico: ${T} XP`}),$&&_.createElement("p",{className:`text-center mb-4 ${$.startsWith("Erro")?"text-red-400":"text-teal-300"}`},$),_.createElement(_t,{primary:!0,type:"submit",disabled:D},D?"Criando...":"Criar Campeonato"))}function KC(){const{user:s,userData:e}=Zt(),[t,i]=Q.useState([]),[a,u]=Q.useState(""),[h,m]=Q.useState({nome:"",descricao:"",xpBase:1e3,imagemUrl:""}),[g,v]=Q.useState(!1),[T,k]=Q.useState(!0),[D,z]=Q.useState("");Q.useEffect(()=>{if(!e)return;k(!0),(async()=>{try{if(e.admin===!0&&e.tipo!=="organizador"){const ne=await fetch("http://localhost:3001/api/organizacoes"),re=await ne.json();if(!ne.ok)throw new Error(re.error||"Erro ao buscar orgs");i(re),re.length>0&&u(re[0].id)}else if(e.tipo==="organizador"&&e.organizacaoId){const ne=await fetch(`http://localhost:3001/api/organizacoes/${e.organizacaoId}`),re=await ne.json();if(!ne.ok)throw new Error(re.error||"Erro ao buscar sua org");i([re]),u(re.id)}}catch(ne){z(`Erro: ${ne.message}`)}k(!1)})()},[e]),Q.useEffect(()=>{if(!a)return;const B=t.find(ne=>ne.id===a);B&&B.xpBase?m(B):(async()=>{try{const re=await fetch(`http://localhost:3001/api/organizacoes/${a}`),pe=await re.json();re.ok&&m(pe)}catch(re){z(`Erro ao carregar dados: ${re.message}`)}})()},[a,t]);const $=B=>{const{name:ne,value:re}=B.target;m(pe=>({...pe,[ne]:re}))},G=async B=>{B.preventDefault(),v(!0),z("");try{const ne=await s.getIdToken(),re=await fetch(`http://localhost:3001/api/organizacoes/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify(h)}),pe=await re.json();if(!re.ok)throw new Error(pe.error||"Erro ao salvar");z(pe.message),i(Ee=>Ee.map(ce=>ce.id===a?h:ce))}catch(ne){z(`Erro: ${ne.message}`)}v(!1)};return T?_.createElement(xn,{text:"Carregando organizaes..."}):_.createElement("form",{onSubmit:G,className:"bg-gray-800 p-6 rounded-xl shadow-2xl"},_.createElement("h2",{className:"text-2xl font-semibold text-white mb-6"},"Gerenciar Organizao"),e.admin===!0&&e.tipo!=="organizador"&&_.createElement(Eo,{label:"Selecione a Organizao para Editar",value:a,onChange:B=>u(B.target.value)},t.map(B=>_.createElement("option",{key:B.id,value:B.id},B.nome))),h.imagemUrl&&_.createElement("div",{className:"mb-4"},_.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"Prvia da Capa"),_.createElement("img",{src:h.imagemUrl,alt:"Capa",className:"w-full h-48 object-cover rounded-lg"})),_.createElement(at,{label:"Nome da Organizao",type:"text",name:"nome",value:h.nome,onChange:$,required:!0}),_.createElement(at,{label:"Descrio (Perfil)",type:"text",name:"descricao",value:h.descricao,onChange:$}),_.createElement(at,{label:"Link da Imagem de Capa",type:"text",name:"imagemUrl",value:h.imagemUrl,onChange:$,placeholder:"https://imgur.com/link.png"}),_.createElement(at,{label:"XP Base Padro",type:"number",name:"xpBase",value:h.xpBase,onChange:$,min:"0"}),D&&_.createElement("p",{className:`text-center mb-4 ${D.startsWith("Erro")?"text-red-400":"text-teal-300"}`},D),_.createElement(_t,{primary:!0,type:"submit",disabled:g},g?"Salvando...":"Salvar Alteraes"))}function QC(){const{user:s}=Zt(),[e,t]=Q.useState(""),[i,a]=Q.useState(500),[u,h]=Q.useState(""),[m,g]=Q.useState(0),[v,T]=Q.useState(!1),[k,D]=Q.useState(""),z=async $=>{$.preventDefault(),T(!0),D("");try{const G=await s.getIdToken(),B=await fetch("http://localhost:3001/api/donations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${G}`},body:JSON.stringify({patrocinador:e,valorTotal:Number(i),atividade:u,xpOferecido:Number(m)})}),ne=await B.json();if(!B.ok)throw new Error(ne.error||"Erro ao registrar");D(`Patrocnio de "${e}" registrado com sucesso!`),t(""),a(500),h(""),g(0)}catch(G){D(`Erro: ${G.message}`)}T(!1)};return _.createElement("form",{onSubmit:z,className:"bg-gray-800 p-6 rounded-xl shadow-2xl"},_.createElement("h2",{className:"text-2xl font-semibold text-white mb-6"},"Novo Patrocnio (Donation)"),_.createElement(at,{label:"Nome do Patrocinador",type:"text",value:e,onChange:$=>t($.target.value),required:!0}),_.createElement(at,{label:"Atividade / Causa",type:"text",value:u,onChange:$=>h($.target.value),placeholder:"Ex: Patrocnio do Major de SP",required:!0}),_.createElement(at,{label:"Valor Total (R$)",type:"number",value:i,onChange:$=>a($.target.value),min:"0",required:!0}),_.createElement(at,{label:"XP Bnus Oferecido",type:"number",value:m,onChange:$=>g($.target.value),min:"0"}),k&&_.createElement("p",{className:`text-center mb-4 ${k.startsWith("Erro")?"text-red-400":"text-teal-300"}`},k),_.createElement(_t,{primary:!0,type:"submit",disabled:v},v?"Registrando...":"Registrar Patrocnio"))}function XC(){const{user:s}=Zt(),[e,t]=Q.useState([]),[i,a]=Q.useState([]),[u,h]=Q.useState(""),[m,g]=Q.useState({1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:""}),[v,T]=Q.useState([]),[k,D]=Q.useState(!1),[z,$]=Q.useState(""),[G,B]=Q.useState(!0);Q.useEffect(()=>{(async()=>{if(s){B(!0);try{const R={Authorization:`Bearer ${await s.getIdToken()}`},S=await fetch("http://localhost:3001/api/admin/my-championships",{headers:R}),I=await S.json();if(S.ok)t(I),I.length>0&&h(I[0].id);else throw new Error(I.error||"Erro ao buscar seus campeonatos");const P=await fetch("http://localhost:3001/api/players",{headers:R}),N=await P.json();if(P.ok)a(N);else throw new Error(N.error||"Erro ao buscar jogadores")}catch(he){$(`Erro ao carregar dados: ${he.message}`)}B(!1)}})()},[s]);const ne=(ce,he)=>{g(R=>({...R,[ce]:he}))},re=ce=>{T(he=>[...he,ce])},pe=ce=>{T(he=>he.filter(R=>R.id!==ce.id))},Ee=async ce=>{if(ce.preventDefault(),!u){$("Erro: Selecione um campeonato.");return}D(!0),$("");const he=Object.entries(m).filter(([S,I])=>I).map(([S,I])=>({jogadorId:I,posicao:parseInt(S,10)})),R=v.map(S=>S.id);try{const S=await s.getIdToken(),I=await fetch(`http://localhost:3001/api/admin/championships/${u}/finalize`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({top8:he,participation:R})}),P=await I.json();if(!I.ok)throw new Error(P.error||"Erro ao registrar resultado");$(P.message),g({1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:""}),T([])}catch(S){$(`Erro: ${S.message}`)}D(!1)};return G?_.createElement(xn,{text:"Carregando campeonatos e jogadores..."}):_.createElement("form",{onSubmit:Ee,className:"bg-gray-800 p-6 rounded-xl shadow-2xl"},_.createElement("h2",{className:"text-2xl font-semibold text-white mb-6"},"Lanar Resultados do Campeonato"),_.createElement(Eo,{label:"Selecione o Campeonato da sua Organizao",value:u,onChange:ce=>h(ce.target.value),required:!0},e.length===0?_.createElement("option",null,"Nenhum campeonato criado pela sua organizao"):e.map(ce=>_.createElement("option",{key:ce.id,value:ce.id},ce.nome," (XP Base: ",ce.xpTotal,")"))),_.createElement("hr",{className:"border-gray-600 my-6"}),_.createElement("h3",{className:"text-lg font-semibold text-gray-200 mb-4"},"Vencedores (Top 8)"),_.createElement("div",{className:"grid grid-cols-2 gap-4"},[1,2,3,4,5,6,7,8].map(ce=>_.createElement(Eo,{key:ce,label:`${ce} Lugar`,value:m[ce],onChange:he=>ne(ce,he.target.value)},_.createElement("option",{value:""},"-- Selecione um Jogador --"),i.map(he=>_.createElement("option",{key:he.id,value:he.id},he.nome))))),_.createElement("hr",{className:"border-gray-600 my-6"}),_.createElement("h3",{className:"text-lg font-semibold text-gray-200 mb-4"},"Participao (9+)"),_.createElement("p",{className:"text-sm text-gray-400 mb-4"},"Adicione todos os outros jogadores que participaram e ganharo 10% do XP Base."),_.createElement(rv,{label:"Adicionar Jogadores (9+)",players:i,selectedPlayers:v,onSelect:re,onDeselect:pe}),z&&_.createElement("p",{className:`text-center my-4 ${z.startsWith("Erro")?"text-red-400":"text-teal-300"}`},z),_.createElement(_t,{primary:!0,type:"submit",disabled:k||i.length===0||e.length===0},k?"Finalizando...":"Finalizar e Distribuir XP"))}function YC(){const{user:s,userData:e}=Zt(),[t,i]=Q.useState([]),[a,u]=Q.useState([]),[h,m]=Q.useState(""),[g,v]=Q.useState({1:{id:"",xp:""},2:{id:"",xp:""},3:{id:"",xp:""},4:{id:"",xp:""},5:{id:"",xp:""},6:{id:"",xp:""},7:{id:"",xp:""},8:{id:"",xp:""}}),[T,k]=Q.useState([]),[D,z]=Q.useState(10),[$,G]=Q.useState(!1),[B,ne]=Q.useState(""),[re,pe]=Q.useState(!0);Q.useEffect(()=>{(async()=>{if(!(!s||!e)){pe(!0);try{const N={Authorization:`Bearer ${await s.getIdToken()}`},O=await fetch("http://localhost:3001/api/admin/my-championships",{headers:N}),A=await O.json();if(O.ok)i(A),A.length>0&&m(A[0].id);else throw new Error(A.error||"Erro ao buscar seus campeonatos");const Me=await fetch("http://localhost:3001/api/players",{headers:N}),nt=await Me.json();if(Me.ok)u(nt);else throw new Error(nt.error||"Erro ao buscar jogadores")}catch(P){ne(`Erro ao carregar dados: ${P.message}`)}pe(!1)}})()},[s,e]);const Ee=(I,P)=>{v(N=>({...N,[I]:{...N[I],id:P}}))},ce=(I,P)=>{v(N=>({...N,[I]:{...N[I],xp:P}}))},he=I=>{k(P=>[...P,I])},R=I=>{k(P=>P.filter(N=>N.id!==I.id))},S=async I=>{if(I.preventDefault(),!h){ne("Erro: Selecione um campeonato.");return}G(!0),ne("");const P=Object.entries(g).filter(([O,A])=>A.id&&Number(A.xp)>0).map(([O,A])=>({jogadorId:A.id,posicao:parseInt(O,10),xpGanho:Number(A.xp)})),N={jogadorIds:T.map(O=>O.id),xpGanho:Number(D)};try{const O=await s.getIdToken(),A=await fetch(`http://localhost:3001/api/admin/championships/${h}/finalize-custom`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({top8:P,participation:N})}),Me=await A.json();if(!A.ok)throw new Error(Me.error||"Erro ao registrar resultado");ne(Me.message),v({1:{id:"",xp:""},2:{id:"",xp:""},3:{id:"",xp:""},4:{id:"",xp:""},5:{id:"",xp:""},6:{id:"",xp:""},7:{id:"",xp:""},8:{id:"",xp:""}}),k([]),z(10)}catch(O){ne(`Erro: ${O.message}`)}G(!1)};return re?_.createElement(xn,{text:"Carregando campeonatos e jogadores..."}):_.createElement("form",{onSubmit:S,className:"bg-gray-700 p-6 rounded-xl shadow-2xl"},_.createElement("h2",{className:"text-2xl font-semibold text-white mb-6"},"Lanamento Customizado (XP Manual)"),_.createElement(Eo,{label:"Selecione o Campeonato",value:h,onChange:I=>m(I.target.value),required:!0},t.length===0?_.createElement("option",null,"Nenhum campeonato encontrado"):t.map(I=>_.createElement("option",{key:I.id,value:I.id},I.nome," ",e.tipo==="admin"?`(${I.organizadorNome})`:""))),_.createElement("hr",{className:"border-gray-600 my-6"}),_.createElement("h3",{className:"text-lg font-semibold text-gray-200 mb-4"},"Vencedores (Top 8)"),[1,2,3,4,5,6,7,8].map(I=>_.createElement("div",{key:I,className:"grid grid-cols-6 gap-2 items-end mb-2"},_.createElement("span",{className:"col-span-1 text-gray-300 font-bold self-center mb-4"},I,":"),_.createElement("div",{className:"col-span-3"},_.createElement(Eo,{label:I===1?"Jogador":"",value:g[I].id,onChange:P=>Ee(I,P.target.value)},_.createElement("option",{value:""},"-- Selecione Jogador --"),a.map(P=>_.createElement("option",{key:P.id,value:P.id},P.nome)))),_.createElement("div",{className:"col-span-2"},_.createElement(at,{label:I===1?"XP Manual":"",type:"number",value:g[I].xp,onChange:P=>ce(I,P.target.value),placeholder:"XP",min:"0"})))),_.createElement("hr",{className:"border-gray-600 my-6"}),_.createElement("h3",{className:"text-lg font-semibold text-gray-200 mb-4"},"Participao (9+)"),_.createElement(at,{label:"XP Manual para TODOS 9+",type:"number",value:D,onChange:I=>z(I.target.value),min:"0"}),_.createElement(rv,{label:"Adicionar Jogadores (9+)",players:a,selectedPlayers:T,onSelect:he,onDeselect:R}),B&&_.createElement("p",{className:`text-center my-4 ${B.startsWith("Erro")?"text-red-400":"text-teal-300"}`},B),_.createElement(_t,{primary:!0,type:"submit",disabled:$||a.length===0||t.length===0},$?"Finalizando...":"Finalizar Lanamento Customizado"))}yE.createRoot(document.getElementById("root")).render(_.createElement(CC,null));
